import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{P as w,W as u,S as f,B as p,M as g,a as h}from"./three.module-D1bjPEXB.js";import{H as D,j as v,q as x}from"./locar.es-owlD19To.js";const n=new w(80,window.innerWidth/window.innerHeight,.001,1e3),t=new u({canvas:document.getElementById("glscene")});t.setSize(window.innerWidth,window.innerHeight);const a=new f,o=new D(a,n),c=new v({video:{facingMode:"environment"}},null);c.on("webcamstarted",e=>{a.background=e.texture});c.on("webcamerror",e=>{alert(`Webcam error: code ${e.code} message ${e.message}`)});window.addEventListener("resize",e=>{t.setSize(window.innerWidth,window.innerHeight),n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix()});let s=!0,i=new x(n);i.on("deviceorientationgranted",e=>{e.target.connect()});i.on("deviceorientationerror",e=>{alert(`Device orientation error: code ${e.code} message ${e.message}`)});i.init();o.on("gpserror",e=>{alert(`GPS error: ${e.code}`)});o.on("gpsupdate",e=>{if(s){alert(`Got the initial location: longitude ${e.position.coords.longitude}, latitude ${e.position.coords.latitude}`);const d=[{latDis:5e-4,lonDis:0,colour:16711680},{latDis:-5e-4,lonDis:0,colour:16776960},{latDis:0,lonDis:-5e-4,colour:65535},{latDis:0,lonDis:5e-4,colour:65280}],l=new p(10,10,10);for(const r of d){const m=new g(l,new h({color:r.colour}));o.add(m,e.position.coords.longitude+r.lonDis,e.position.coords.latitude+r.latDis)}s=!1}});o.startGps();document.getElementById("setFakeLoc").addEventListener("click",e=>{alert("Using fake input GPS, not real GPS location"),o.stopGps(),o.fakeGps(parseFloat(document.getElementById("fakeLon").value),parseFloat(document.getElementById("fakeLat").value))});t.setAnimationLoop(G);function G(){i?.update(),t.render(a,n)}
