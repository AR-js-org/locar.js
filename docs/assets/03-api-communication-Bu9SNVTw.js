import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{P as l,W as m,S as p,o as g,r as u,b as h,B as f,c as b,M as y,a as k}from"./locar.es-C46cmtya.js";const t=new l(80,window.innerWidth/window.innerHeight,.001,1e3),a=new m({canvas:document.getElementById("glscene")});a.setSize(window.innerWidth,window.innerHeight);const s=new p;window.addEventListener("resize",e=>{a.setSize(window.innerWidth,window.innerHeight),t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix()});const o=new g(s,t),W=new u(t),w=new h({idealWidth:1024,idealHeight:768});w.on("webcamstarted",e=>{s.background=e});w.on("webcamerror",(e,r)=>{alert(`Webcam error: name ${e} msg ${r}`)});let c=!0;const d={},v=new f(20,20,20),B=new b(a);o.on("gpsupdate",async(e,r)=>{(c||r>100)&&((await(await fetch(`https://hikar.org/webapp/map?bbox=${e.coords.longitude-.02},${e.coords.latitude-.02},${e.coords.longitude+.02},${e.coords.latitude+.02}&layers=poi&outProj=4326`)).json()).features.forEach(n=>{if(!d[n.properties.osm_id]){const i=new y(v,new k({color:16711680}));o.add(i,n.geometry.coordinates[0],n.geometry.coordinates[1],0,n.properties),d[n.properties.osm_id]=i}}),c=!1)});document.getElementById("setFakeLoc").addEventListener("click",e=>{alert("Using fake input GPS, not real GPS location"),o.stopGps(),o.fakeGps(parseFloat(document.getElementById("fakeLon").value),parseFloat(document.getElementById("fakeLat").value))});o.startGps();a.setAnimationLoop(E);function E(){W.update();const e=B.raycast(t,s);e.length&&alert(`This is ${e[0].object.properties.name}`),a.render(s,t)}
