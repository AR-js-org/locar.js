import{e as Rl}from"./three.module-D1bjPEXB.js";var Fl={},aA={8167:e=>{var t=Object.prototype.toString;e.exports=function(i){return i.BYTES_PER_ELEMENT&&t.call(i.buffer)==="[object ArrayBuffer]"||Array.isArray(i)}},5734:e=>{e.exports=function(t,i){return typeof t=="number"?t:typeof i=="number"?i:0}},7961:(e,t)=>{t.byteLength=function(l){var h=a(l),c=h[0],g=h[1];return 3*(c+g)/4-g},t.toByteArray=function(l){var h,c,g=a(l),p=g[0],E=g[1],m=new r((function(b,B,w){return 3*(B+w)/4-w})(0,p,E)),C=0,y=E>0?p-4:p;for(c=0;c<y;c+=4)h=n[l.charCodeAt(c)]<<18|n[l.charCodeAt(c+1)]<<12|n[l.charCodeAt(c+2)]<<6|n[l.charCodeAt(c+3)],m[C++]=h>>16&255,m[C++]=h>>8&255,m[C++]=255&h;return E===2&&(h=n[l.charCodeAt(c)]<<2|n[l.charCodeAt(c+1)]>>4,m[C++]=255&h),E===1&&(h=n[l.charCodeAt(c)]<<10|n[l.charCodeAt(c+1)]<<4|n[l.charCodeAt(c+2)]>>2,m[C++]=h>>8&255,m[C++]=255&h),m},t.fromByteArray=function(l){for(var h,c=l.length,g=c%3,p=[],E=16383,m=0,C=c-g;m<C;m+=E)p.push(A(l,m,m+E>C?C:m+E));return g===1?(h=l[c-1],p.push(i[h>>2]+i[h<<4&63]+"==")):g===2&&(h=(l[c-2]<<8)+l[c-1],p.push(i[h>>10]+i[h>>4&63]+i[h<<2&63]+"=")),p.join("")};for(var i=[],n=[],r=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)i[s]=o[s],n[o.charCodeAt(s)]=s;function a(l){var h=l.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=l.indexOf("=");return c===-1&&(c=h),[c,c===h?0:4-c%4]}function A(l,h,c){for(var g,p,E=[],m=h;m<c;m+=3)g=(l[m]<<16&16711680)+(l[m+1]<<8&65280)+(255&l[m+2]),E.push(i[(p=g)>>18&63]+i[p>>12&63]+i[p>>6&63]+i[63&p]);return E.join("")}n[45]=62,n[95]=63},911:(e,t,i)=>{var n=i(9922).hp;e.exports=function(r,o){if(n.isBuffer(r)&&n.isBuffer(o)){if(typeof r.equals=="function")return r.equals(o);if(r.length!==o.length)return!1;for(var s=0;s<r.length;s++)if(r[s]!==o[s])return!1;return!0}}},9922:(e,t,i)=>{const n=i(7961),r=i(1024),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=A,t.IS=50;const s=2147483647;function a(u){if(u>s)throw new RangeError('The value "'+u+'" is invalid for option "size"');const f=new Uint8Array(u);return Object.setPrototypeOf(f,A.prototype),f}function A(u,f,v){if(typeof u=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(u)}return l(u,f,v)}function l(u,f,v){if(typeof u=="string")return(function(L,T){if(typeof T=="string"&&T!==""||(T="utf8"),!A.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const W=0|m(L,T);let tt=a(W);const dt=tt.write(L,T);return dt!==W&&(tt=tt.slice(0,dt)),tt})(u,f);if(ArrayBuffer.isView(u))return(function(L){if(Yt(L,Uint8Array)){const T=new Uint8Array(L);return p(T.buffer,T.byteOffset,T.byteLength)}return g(L)})(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(Yt(u,ArrayBuffer)||u&&Yt(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Yt(u,SharedArrayBuffer)||u&&Yt(u.buffer,SharedArrayBuffer)))return p(u,f,v);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const x=u.valueOf&&u.valueOf();if(x!=null&&x!==u)return A.from(x,f,v);const M=(function(L){if(A.isBuffer(L)){const T=0|E(L.length),W=a(T);return W.length===0||L.copy(W,0,0,T),W}return L.length!==void 0?typeof L.length!="number"||Mn(L.length)?a(0):g(L):L.type==="Buffer"&&Array.isArray(L.data)?g(L.data):void 0})(u);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return A.from(u[Symbol.toPrimitive]("string"),f,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}function h(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function c(u){return h(u),a(u<0?0:0|E(u))}function g(u){const f=u.length<0?0:0|E(u.length),v=a(f);for(let x=0;x<f;x+=1)v[x]=255&u[x];return v}function p(u,f,v){if(f<0||u.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<f+(v||0))throw new RangeError('"length" is outside of buffer bounds');let x;return x=f===void 0&&v===void 0?new Uint8Array(u):v===void 0?new Uint8Array(u,f):new Uint8Array(u,f,v),Object.setPrototypeOf(x,A.prototype),x}function E(u){if(u>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|u}function m(u,f){if(A.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||Yt(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);const v=u.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&v===0)return 0;let M=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return Wt(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*v;case"hex":return v>>>1;case"base64":return Zt(u).length;default:if(M)return x?-1:Wt(u).length;f=(""+f).toLowerCase(),M=!0}}function C(u,f,v){let x=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0)<=(f>>>=0))return"";for(u||(u="utf8");;)switch(u){case"hex":return Y(this,f,v);case"utf8":case"utf-8":return F(this,f,v);case"ascii":return P(this,f,v);case"latin1":case"binary":return O(this,f,v);case"base64":return k(this,f,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,f,v);default:if(x)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),x=!0}}function y(u,f,v){const x=u[f];u[f]=u[v],u[v]=x}function b(u,f,v,x,M){if(u.length===0)return-1;if(typeof v=="string"?(x=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),Mn(v=+v)&&(v=M?0:u.length-1),v<0&&(v=u.length+v),v>=u.length){if(M)return-1;v=u.length-1}else if(v<0){if(!M)return-1;v=0}if(typeof f=="string"&&(f=A.from(f,x)),A.isBuffer(f))return f.length===0?-1:B(u,f,v,x,M);if(typeof f=="number")return f&=255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(u,f,v):Uint8Array.prototype.lastIndexOf.call(u,f,v):B(u,[f],v,x,M);throw new TypeError("val must be string, number or Buffer")}function B(u,f,v,x,M){let L,T=1,W=u.length,tt=f.length;if(x!==void 0&&((x=String(x).toLowerCase())==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(u.length<2||f.length<2)return-1;T=2,W/=2,tt/=2,v/=2}function dt(ot,ft){return T===1?ot[ft]:ot.readUInt16BE(ft*T)}if(M){let ot=-1;for(L=v;L<W;L++)if(dt(u,L)===dt(f,ot===-1?0:L-ot)){if(ot===-1&&(ot=L),L-ot+1===tt)return ot*T}else ot!==-1&&(L-=L-ot),ot=-1}else for(v+tt>W&&(v=W-tt),L=v;L>=0;L--){let ot=!0;for(let ft=0;ft<tt;ft++)if(dt(u,L+ft)!==dt(f,ft)){ot=!1;break}if(ot)return L}return-1}function w(u,f,v,x){v=Number(v)||0;const M=u.length-v;x?(x=Number(x))>M&&(x=M):x=M;const L=f.length;let T;for(x>L/2&&(x=L/2),T=0;T<x;++T){const W=parseInt(f.substr(2*T,2),16);if(Mn(W))return T;u[v+T]=W}return T}function I(u,f,v,x){return Te(Wt(f,u.length-v),u,v,x)}function S(u,f,v,x){return Te((function(M){const L=[];for(let T=0;T<M.length;++T)L.push(255&M.charCodeAt(T));return L})(f),u,v,x)}function Q(u,f,v,x){return Te(Zt(f),u,v,x)}function D(u,f,v,x){return Te((function(M,L){let T,W,tt;const dt=[];for(let ot=0;ot<M.length&&!((L-=2)<0);++ot)T=M.charCodeAt(ot),W=T>>8,tt=T%256,dt.push(tt),dt.push(W);return dt})(f,u.length-v),u,v,x)}function k(u,f,v){return f===0&&v===u.length?n.fromByteArray(u):n.fromByteArray(u.slice(f,v))}function F(u,f,v){v=Math.min(u.length,v);const x=[];let M=f;for(;M<v;){const L=u[M];let T=null,W=L>239?4:L>223?3:L>191?2:1;if(M+W<=v){let tt,dt,ot,ft;switch(W){case 1:L<128&&(T=L);break;case 2:tt=u[M+1],(192&tt)==128&&(ft=(31&L)<<6|63&tt,ft>127&&(T=ft));break;case 3:tt=u[M+1],dt=u[M+2],(192&tt)==128&&(192&dt)==128&&(ft=(15&L)<<12|(63&tt)<<6|63&dt,ft>2047&&(ft<55296||ft>57343)&&(T=ft));break;case 4:tt=u[M+1],dt=u[M+2],ot=u[M+3],(192&tt)==128&&(192&dt)==128&&(192&ot)==128&&(ft=(15&L)<<18|(63&tt)<<12|(63&dt)<<6|63&ot,ft>65535&&ft<1114112&&(T=ft))}}T===null?(T=65533,W=1):T>65535&&(T-=65536,x.push(T>>>10&1023|55296),T=56320|1023&T),x.push(T),M+=W}return(function(L){const T=L.length;if(T<=R)return String.fromCharCode.apply(String,L);let W="",tt=0;for(;tt<T;)W+=String.fromCharCode.apply(String,L.slice(tt,tt+=R));return W})(x)}A.TYPED_ARRAY_SUPPORT=(function(){try{const u=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(u,f),u.foo()===42}catch{return!1}})(),A.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.buffer}}),Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.byteOffset}}),A.poolSize=8192,A.from=function(u,f,v){return l(u,f,v)},Object.setPrototypeOf(A.prototype,Uint8Array.prototype),Object.setPrototypeOf(A,Uint8Array),A.alloc=function(u,f,v){return(function(x,M,L){return h(x),x<=0?a(x):M!==void 0?typeof L=="string"?a(x).fill(M,L):a(x).fill(M):a(x)})(u,f,v)},A.allocUnsafe=function(u){return c(u)},A.allocUnsafeSlow=function(u){return c(u)},A.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==A.prototype},A.compare=function(u,f){if(Yt(u,Uint8Array)&&(u=A.from(u,u.offset,u.byteLength)),Yt(f,Uint8Array)&&(f=A.from(f,f.offset,f.byteLength)),!A.isBuffer(u)||!A.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===f)return 0;let v=u.length,x=f.length;for(let M=0,L=Math.min(v,x);M<L;++M)if(u[M]!==f[M]){v=u[M],x=f[M];break}return v<x?-1:x<v?1:0},A.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.concat=function(u,f){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return A.alloc(0);let v;if(f===void 0)for(f=0,v=0;v<u.length;++v)f+=u[v].length;const x=A.allocUnsafe(f);let M=0;for(v=0;v<u.length;++v){let L=u[v];if(Yt(L,Uint8Array))M+L.length>x.length?(A.isBuffer(L)||(L=A.from(L)),L.copy(x,M)):Uint8Array.prototype.set.call(x,L,M);else{if(!A.isBuffer(L))throw new TypeError('"list" argument must be an Array of Buffers');L.copy(x,M)}M+=L.length}return x},A.byteLength=m,A.prototype._isBuffer=!0,A.prototype.swap16=function(){const u=this.length;if(u%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<u;f+=2)y(this,f,f+1);return this},A.prototype.swap32=function(){const u=this.length;if(u%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<u;f+=4)y(this,f,f+3),y(this,f+1,f+2);return this},A.prototype.swap64=function(){const u=this.length;if(u%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<u;f+=8)y(this,f,f+7),y(this,f+1,f+6),y(this,f+2,f+5),y(this,f+3,f+4);return this},A.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?F(this,0,u):C.apply(this,arguments)},A.prototype.toLocaleString=A.prototype.toString,A.prototype.equals=function(u){if(!A.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u||A.compare(this,u)===0},A.prototype.inspect=function(){let u="";const f=t.IS;return u=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(u+=" ... "),"<Buffer "+u+">"},o&&(A.prototype[o]=A.prototype.inspect),A.prototype.compare=function(u,f,v,x,M){if(Yt(u,Uint8Array)&&(u=A.from(u,u.offset,u.byteLength)),!A.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(f===void 0&&(f=0),v===void 0&&(v=u?u.length:0),x===void 0&&(x=0),M===void 0&&(M=this.length),f<0||v>u.length||x<0||M>this.length)throw new RangeError("out of range index");if(x>=M&&f>=v)return 0;if(x>=M)return-1;if(f>=v)return 1;if(this===u)return 0;let L=(M>>>=0)-(x>>>=0),T=(v>>>=0)-(f>>>=0);const W=Math.min(L,T),tt=this.slice(x,M),dt=u.slice(f,v);for(let ot=0;ot<W;++ot)if(tt[ot]!==dt[ot]){L=tt[ot],T=dt[ot];break}return L<T?-1:T<L?1:0},A.prototype.includes=function(u,f,v){return this.indexOf(u,f,v)!==-1},A.prototype.indexOf=function(u,f,v){return b(this,u,f,v,!0)},A.prototype.lastIndexOf=function(u,f,v){return b(this,u,f,v,!1)},A.prototype.write=function(u,f,v,x){if(f===void 0)x="utf8",v=this.length,f=0;else if(v===void 0&&typeof f=="string")x=f,v=this.length,f=0;else{if(!isFinite(f))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");f>>>=0,isFinite(v)?(v>>>=0,x===void 0&&(x="utf8")):(x=v,v=void 0)}const M=this.length-f;if((v===void 0||v>M)&&(v=M),u.length>0&&(v<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");x||(x="utf8");let L=!1;for(;;)switch(x){case"hex":return w(this,u,f,v);case"utf8":case"utf-8":return I(this,u,f,v);case"ascii":case"latin1":case"binary":return S(this,u,f,v);case"base64":return Q(this,u,f,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,u,f,v);default:if(L)throw new TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),L=!0}},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function P(u,f,v){let x="";v=Math.min(u.length,v);for(let M=f;M<v;++M)x+=String.fromCharCode(127&u[M]);return x}function O(u,f,v){let x="";v=Math.min(u.length,v);for(let M=f;M<v;++M)x+=String.fromCharCode(u[M]);return x}function Y(u,f,v){const x=u.length;(!f||f<0)&&(f=0),(!v||v<0||v>x)&&(v=x);let M="";for(let L=f;L<v;++L)M+=kl[u[L]];return M}function it(u,f,v){const x=u.slice(f,v);let M="";for(let L=0;L<x.length-1;L+=2)M+=String.fromCharCode(x[L]+256*x[L+1]);return M}function U(u,f,v){if(u%1!=0||u<0)throw new RangeError("offset is not uint");if(u+f>v)throw new RangeError("Trying to access beyond buffer length")}function N(u,f,v,x,M,L){if(!A.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>M||f<L)throw new RangeError('"value" argument is out of bounds');if(v+x>u.length)throw new RangeError("Index out of range")}function K(u,f,v,x,M){mt(f,x,M,u,v,7);let L=Number(f&BigInt(4294967295));u[v++]=L,L>>=8,u[v++]=L,L>>=8,u[v++]=L,L>>=8,u[v++]=L;let T=Number(f>>BigInt(32)&BigInt(4294967295));return u[v++]=T,T>>=8,u[v++]=T,T>>=8,u[v++]=T,T>>=8,u[v++]=T,v}function H(u,f,v,x,M){mt(f,x,M,u,v,7);let L=Number(f&BigInt(4294967295));u[v+7]=L,L>>=8,u[v+6]=L,L>>=8,u[v+5]=L,L>>=8,u[v+4]=L;let T=Number(f>>BigInt(32)&BigInt(4294967295));return u[v+3]=T,T>>=8,u[v+2]=T,T>>=8,u[v+1]=T,T>>=8,u[v]=T,v+8}function Z(u,f,v,x,M,L){if(v+x>u.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function st(u,f,v,x,M){return f=+f,v>>>=0,M||Z(u,0,v,4),r.write(u,f,v,x,23,4),v+4}function X(u,f,v,x,M){return f=+f,v>>>=0,M||Z(u,0,v,8),r.write(u,f,v,x,52,8),v+8}A.prototype.slice=function(u,f){const v=this.length;(u=~~u)<0?(u+=v)<0&&(u=0):u>v&&(u=v),(f=f===void 0?v:~~f)<0?(f+=v)<0&&(f=0):f>v&&(f=v),f<u&&(f=u);const x=this.subarray(u,f);return Object.setPrototypeOf(x,A.prototype),x},A.prototype.readUintLE=A.prototype.readUIntLE=function(u,f,v){u>>>=0,f>>>=0,v||U(u,f,this.length);let x=this[u],M=1,L=0;for(;++L<f&&(M*=256);)x+=this[u+L]*M;return x},A.prototype.readUintBE=A.prototype.readUIntBE=function(u,f,v){u>>>=0,f>>>=0,v||U(u,f,this.length);let x=this[u+--f],M=1;for(;f>0&&(M*=256);)x+=this[u+--f]*M;return x},A.prototype.readUint8=A.prototype.readUInt8=function(u,f){return u>>>=0,f||U(u,1,this.length),this[u]},A.prototype.readUint16LE=A.prototype.readUInt16LE=function(u,f){return u>>>=0,f||U(u,2,this.length),this[u]|this[u+1]<<8},A.prototype.readUint16BE=A.prototype.readUInt16BE=function(u,f){return u>>>=0,f||U(u,2,this.length),this[u]<<8|this[u+1]},A.prototype.readUint32LE=A.prototype.readUInt32LE=function(u,f){return u>>>=0,f||U(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+16777216*this[u+3]},A.prototype.readUint32BE=A.prototype.readUInt32BE=function(u,f){return u>>>=0,f||U(u,4,this.length),16777216*this[u]+(this[u+1]<<16|this[u+2]<<8|this[u+3])},A.prototype.readBigUInt64LE=he((function(u){Et(u>>>=0,"offset");const f=this[u],v=this[u+7];f!==void 0&&v!==void 0||At(u,this.length-8);const x=f+256*this[++u]+65536*this[++u]+this[++u]*2**24,M=this[++u]+256*this[++u]+65536*this[++u]+v*2**24;return BigInt(x)+(BigInt(M)<<BigInt(32))})),A.prototype.readBigUInt64BE=he((function(u){Et(u>>>=0,"offset");const f=this[u],v=this[u+7];f!==void 0&&v!==void 0||At(u,this.length-8);const x=f*2**24+65536*this[++u]+256*this[++u]+this[++u],M=this[++u]*2**24+65536*this[++u]+256*this[++u]+v;return(BigInt(x)<<BigInt(32))+BigInt(M)})),A.prototype.readIntLE=function(u,f,v){u>>>=0,f>>>=0,v||U(u,f,this.length);let x=this[u],M=1,L=0;for(;++L<f&&(M*=256);)x+=this[u+L]*M;return M*=128,x>=M&&(x-=Math.pow(2,8*f)),x},A.prototype.readIntBE=function(u,f,v){u>>>=0,f>>>=0,v||U(u,f,this.length);let x=f,M=1,L=this[u+--x];for(;x>0&&(M*=256);)L+=this[u+--x]*M;return M*=128,L>=M&&(L-=Math.pow(2,8*f)),L},A.prototype.readInt8=function(u,f){return u>>>=0,f||U(u,1,this.length),128&this[u]?-1*(255-this[u]+1):this[u]},A.prototype.readInt16LE=function(u,f){u>>>=0,f||U(u,2,this.length);const v=this[u]|this[u+1]<<8;return 32768&v?4294901760|v:v},A.prototype.readInt16BE=function(u,f){u>>>=0,f||U(u,2,this.length);const v=this[u+1]|this[u]<<8;return 32768&v?4294901760|v:v},A.prototype.readInt32LE=function(u,f){return u>>>=0,f||U(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},A.prototype.readInt32BE=function(u,f){return u>>>=0,f||U(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},A.prototype.readBigInt64LE=he((function(u){Et(u>>>=0,"offset");const f=this[u],v=this[u+7];f!==void 0&&v!==void 0||At(u,this.length-8);const x=this[u+4]+256*this[u+5]+65536*this[u+6]+(v<<24);return(BigInt(x)<<BigInt(32))+BigInt(f+256*this[++u]+65536*this[++u]+this[++u]*2**24)})),A.prototype.readBigInt64BE=he((function(u){Et(u>>>=0,"offset");const f=this[u],v=this[u+7];f!==void 0&&v!==void 0||At(u,this.length-8);const x=(f<<24)+65536*this[++u]+256*this[++u]+this[++u];return(BigInt(x)<<BigInt(32))+BigInt(this[++u]*2**24+65536*this[++u]+256*this[++u]+v)})),A.prototype.readFloatLE=function(u,f){return u>>>=0,f||U(u,4,this.length),r.read(this,u,!0,23,4)},A.prototype.readFloatBE=function(u,f){return u>>>=0,f||U(u,4,this.length),r.read(this,u,!1,23,4)},A.prototype.readDoubleLE=function(u,f){return u>>>=0,f||U(u,8,this.length),r.read(this,u,!0,52,8)},A.prototype.readDoubleBE=function(u,f){return u>>>=0,f||U(u,8,this.length),r.read(this,u,!1,52,8)},A.prototype.writeUintLE=A.prototype.writeUIntLE=function(u,f,v,x){u=+u,f>>>=0,v>>>=0,x||N(this,u,f,v,Math.pow(2,8*v)-1,0);let M=1,L=0;for(this[f]=255&u;++L<v&&(M*=256);)this[f+L]=u/M&255;return f+v},A.prototype.writeUintBE=A.prototype.writeUIntBE=function(u,f,v,x){u=+u,f>>>=0,v>>>=0,x||N(this,u,f,v,Math.pow(2,8*v)-1,0);let M=v-1,L=1;for(this[f+M]=255&u;--M>=0&&(L*=256);)this[f+M]=u/L&255;return f+v},A.prototype.writeUint8=A.prototype.writeUInt8=function(u,f,v){return u=+u,f>>>=0,v||N(this,u,f,1,255,0),this[f]=255&u,f+1},A.prototype.writeUint16LE=A.prototype.writeUInt16LE=function(u,f,v){return u=+u,f>>>=0,v||N(this,u,f,2,65535,0),this[f]=255&u,this[f+1]=u>>>8,f+2},A.prototype.writeUint16BE=A.prototype.writeUInt16BE=function(u,f,v){return u=+u,f>>>=0,v||N(this,u,f,2,65535,0),this[f]=u>>>8,this[f+1]=255&u,f+2},A.prototype.writeUint32LE=A.prototype.writeUInt32LE=function(u,f,v){return u=+u,f>>>=0,v||N(this,u,f,4,4294967295,0),this[f+3]=u>>>24,this[f+2]=u>>>16,this[f+1]=u>>>8,this[f]=255&u,f+4},A.prototype.writeUint32BE=A.prototype.writeUInt32BE=function(u,f,v){return u=+u,f>>>=0,v||N(this,u,f,4,4294967295,0),this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=255&u,f+4},A.prototype.writeBigUInt64LE=he((function(u,f=0){return K(this,u,f,BigInt(0),BigInt("0xffffffffffffffff"))})),A.prototype.writeBigUInt64BE=he((function(u,f=0){return H(this,u,f,BigInt(0),BigInt("0xffffffffffffffff"))})),A.prototype.writeIntLE=function(u,f,v,x){if(u=+u,f>>>=0,!x){const W=Math.pow(2,8*v-1);N(this,u,f,v,W-1,-W)}let M=0,L=1,T=0;for(this[f]=255&u;++M<v&&(L*=256);)u<0&&T===0&&this[f+M-1]!==0&&(T=1),this[f+M]=(u/L|0)-T&255;return f+v},A.prototype.writeIntBE=function(u,f,v,x){if(u=+u,f>>>=0,!x){const W=Math.pow(2,8*v-1);N(this,u,f,v,W-1,-W)}let M=v-1,L=1,T=0;for(this[f+M]=255&u;--M>=0&&(L*=256);)u<0&&T===0&&this[f+M+1]!==0&&(T=1),this[f+M]=(u/L|0)-T&255;return f+v},A.prototype.writeInt8=function(u,f,v){return u=+u,f>>>=0,v||N(this,u,f,1,127,-128),u<0&&(u=255+u+1),this[f]=255&u,f+1},A.prototype.writeInt16LE=function(u,f,v){return u=+u,f>>>=0,v||N(this,u,f,2,32767,-32768),this[f]=255&u,this[f+1]=u>>>8,f+2},A.prototype.writeInt16BE=function(u,f,v){return u=+u,f>>>=0,v||N(this,u,f,2,32767,-32768),this[f]=u>>>8,this[f+1]=255&u,f+2},A.prototype.writeInt32LE=function(u,f,v){return u=+u,f>>>=0,v||N(this,u,f,4,2147483647,-2147483648),this[f]=255&u,this[f+1]=u>>>8,this[f+2]=u>>>16,this[f+3]=u>>>24,f+4},A.prototype.writeInt32BE=function(u,f,v){return u=+u,f>>>=0,v||N(this,u,f,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=255&u,f+4},A.prototype.writeBigInt64LE=he((function(u,f=0){return K(this,u,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),A.prototype.writeBigInt64BE=he((function(u,f=0){return H(this,u,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),A.prototype.writeFloatLE=function(u,f,v){return st(this,u,f,!0,v)},A.prototype.writeFloatBE=function(u,f,v){return st(this,u,f,!1,v)},A.prototype.writeDoubleLE=function(u,f,v){return X(this,u,f,!0,v)},A.prototype.writeDoubleBE=function(u,f,v){return X(this,u,f,!1,v)},A.prototype.copy=function(u,f,v,x){if(!A.isBuffer(u))throw new TypeError("argument should be a Buffer");if(v||(v=0),x||x===0||(x=this.length),f>=u.length&&(f=u.length),f||(f=0),x>0&&x<v&&(x=v),x===v||u.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),u.length-f<x-v&&(x=u.length-f+v);const M=x-v;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,v,x):Uint8Array.prototype.set.call(u,this.subarray(v,x),f),M},A.prototype.fill=function(u,f,v,x){if(typeof u=="string"){if(typeof f=="string"?(x=f,f=0,v=this.length):typeof v=="string"&&(x=v,v=this.length),x!==void 0&&typeof x!="string")throw new TypeError("encoding must be a string");if(typeof x=="string"&&!A.isEncoding(x))throw new TypeError("Unknown encoding: "+x);if(u.length===1){const L=u.charCodeAt(0);(x==="utf8"&&L<128||x==="latin1")&&(u=L)}}else typeof u=="number"?u&=255:typeof u=="boolean"&&(u=Number(u));if(f<0||this.length<f||this.length<v)throw new RangeError("Out of range index");if(v<=f)return this;let M;if(f>>>=0,v=v===void 0?this.length:v>>>0,u||(u=0),typeof u=="number")for(M=f;M<v;++M)this[M]=u;else{const L=A.isBuffer(u)?u:A.from(u,x),T=L.length;if(T===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(M=0;M<v-f;++M)this[M+f]=L[M%T]}return this};const nt={};function z(u,f,v){nt[u]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${u}]`,this.stack,delete this.name}get code(){return u}set code(x){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:x,writable:!0})}toString(){return`${this.name} [${u}]: ${this.message}`}}}function at(u){let f="",v=u.length;const x=u[0]==="-"?1:0;for(;v>=x+4;v-=3)f=`_${u.slice(v-3,v)}${f}`;return`${u.slice(0,v)}${f}`}function mt(u,f,v,x,M,L){if(u>v||u<f){const T=typeof f=="bigint"?"n":"";let W;throw W=f===0||f===BigInt(0)?`>= 0${T} and < 2${T} ** ${8*(L+1)}${T}`:`>= -(2${T} ** ${8*(L+1)-1}${T}) and < 2 ** ${8*(L+1)-1}${T}`,new nt.ERR_OUT_OF_RANGE("value",W,u)}(function(T,W,tt){Et(W,"offset"),T[W]!==void 0&&T[W+tt]!==void 0||At(W,T.length-(tt+1))})(x,M,L)}function Et(u,f){if(typeof u!="number")throw new nt.ERR_INVALID_ARG_TYPE(f,"number",u)}function At(u,f,v){throw Math.floor(u)!==u?(Et(u,v),new nt.ERR_OUT_OF_RANGE("offset","an integer",u)):f<0?new nt.ERR_BUFFER_OUT_OF_BOUNDS:new nt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,u)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(u){return u?`${u} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(u,f){return`The "${u}" argument must be of type number. Received type ${typeof f}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(u,f,v){let x=`The value of "${u}" is out of range.`,M=v;return Number.isInteger(v)&&Math.abs(v)>2**32?M=at(String(v)):typeof v=="bigint"&&(M=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(M=at(M)),M+="n"),x+=` It must be ${f}. Received ${M}`,x}),RangeError);const Ut=/[^+/0-9A-Za-z-_]/g;function Wt(u,f){let v;f=f||1/0;const x=u.length;let M=null;const L=[];for(let T=0;T<x;++T){if(v=u.charCodeAt(T),v>55295&&v<57344){if(!M){if(v>56319){(f-=3)>-1&&L.push(239,191,189);continue}if(T+1===x){(f-=3)>-1&&L.push(239,191,189);continue}M=v;continue}if(v<56320){(f-=3)>-1&&L.push(239,191,189),M=v;continue}v=65536+(M-55296<<10|v-56320)}else M&&(f-=3)>-1&&L.push(239,191,189);if(M=null,v<128){if((f-=1)<0)break;L.push(v)}else if(v<2048){if((f-=2)<0)break;L.push(v>>6|192,63&v|128)}else if(v<65536){if((f-=3)<0)break;L.push(v>>12|224,v>>6&63|128,63&v|128)}else{if(!(v<1114112))throw new Error("Invalid code point");if((f-=4)<0)break;L.push(v>>18|240,v>>12&63|128,v>>6&63|128,63&v|128)}}return L}function Zt(u){return n.toByteArray((function(f){if((f=(f=f.split("=")[0]).trim().replace(Ut,"")).length<2)return"";for(;f.length%4!=0;)f+="=";return f})(u))}function Te(u,f,v,x){let M;for(M=0;M<x&&!(M+v>=f.length||M>=u.length);++M)f[M+v]=u[M];return M}function Yt(u,f){return u instanceof f||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===f.name}function Mn(u){return u!=u}const kl=(function(){const u="0123456789abcdef",f=new Array(256);for(let v=0;v<16;++v){const x=16*v;for(let M=0;M<16;++M)f[x+M]=u[v]+u[M]}return f})();function he(u){return typeof BigInt>"u"?Tl:u}function Tl(){throw new Error("BigInt not supported")}},9089:e=>{e.exports=function(t){var i=[];return i.toString=function(){return this.map((function(n){var r="",o=n[5]!==void 0;return n[4]&&(r+="@supports (".concat(n[4],") {")),n[2]&&(r+="@media ".concat(n[2]," {")),o&&(r+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),r+=t(n),o&&(r+="}"),n[2]&&(r+="}"),n[4]&&(r+="}"),r})).join("")},i.i=function(n,r,o,s,a){typeof n=="string"&&(n=[[null,n,void 0]]);var A={};if(o)for(var l=0;l<this.length;l++){var h=this[l][0];h!=null&&(A[h]=!0)}for(var c=0;c<n.length;c++){var g=[].concat(n[c]);o&&A[g[0]]||(a!==void 0&&(g[5]===void 0||(g[1]="@layer".concat(g[5].length>0?" ".concat(g[5]):""," {").concat(g[1],"}")),g[5]=a),r&&(g[2]&&(g[1]="@media ".concat(g[2]," {").concat(g[1],"}")),g[2]=r),s&&(g[4]?(g[1]="@supports (".concat(g[4],") {").concat(g[1],"}"),g[4]=s):g[4]="".concat(s)),i.push(g))}},i}},6492:e=>{e.exports=function(t,i){return i||(i={}),t&&(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),i.hash&&(t+=i.hash),/["'() \t\n]|(%20)/.test(t)||i.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},963:e=>{e.exports=function(t){var i=t[1],n=t[3];if(!n)return i;if(typeof btoa=="function"){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(o," */");return[i].concat([s]).join(`
`)}return[i].join(`
`)}},8878:(e,t,i)=>{t.formatArgs=function(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;r.splice(1,0,o,"color: inherit");let s=0,a=0;r[0].replace(/%[a-zA-Z%]/g,(A=>{A!=="%%"&&(s++,A==="%c"&&(a=s))})),r.splice(a,0,o)},t.save=function(r){try{r?t.storage.setItem("debug",r):t.storage.removeItem("debug")}catch{}},t.load=function(){let r;try{r=t.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=Fl.DEBUG),r},t.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=i(8945)(t);const{formatters:n}=e.exports;n.j=function(r){try{return JSON.stringify(r)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}}},8945:(e,t,i)=>{e.exports=function(n){function r(a){let A,l,h,c=null;function g(...p){if(!g.enabled)return;const E=g,m=Number(new Date),C=m-(A||m);E.diff=C,E.prev=A,E.curr=m,A=m,p[0]=r.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let y=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,((b,B)=>{if(b==="%%")return"%";y++;const w=r.formatters[B];if(typeof w=="function"){const I=p[y];b=w.call(E,I),p.splice(y,1),y--}return b})),r.formatArgs.call(E,p),(E.log||r.log).apply(E,p)}return g.namespace=a,g.useColors=r.useColors(),g.color=r.selectColor(a),g.extend=o,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(l!==r.namespaces&&(l=r.namespaces,h=r.enabled(a)),h),set:p=>{c=p}}),typeof r.init=="function"&&r.init(g),g}function o(a,A){const l=r(this.namespace+(A===void 0?":":A)+a);return l.log=this.log,l}function s(a,A){let l=0,h=0,c=-1,g=0;for(;l<a.length;)if(h<A.length&&(A[h]===a[l]||A[h]==="*"))A[h]==="*"?(c=h,g=l,h++):(l++,h++);else{if(c===-1)return!1;h=c+1,g++,l=g}for(;h<A.length&&A[h]==="*";)h++;return h===A.length}return r.debug=r,r.default=r,r.coerce=function(a){return a instanceof Error?a.stack||a.message:a},r.disable=function(){const a=[...r.names,...r.skips.map((A=>"-"+A))].join(",");return r.enable(""),a},r.enable=function(a){r.save(a),r.namespaces=a,r.names=[],r.skips=[];const A=(typeof a=="string"?a:"").trim().replace(" ",",").split(",").filter(Boolean);for(const l of A)l[0]==="-"?r.skips.push(l.slice(1)):r.names.push(l)},r.enabled=function(a){for(const A of r.skips)if(s(a,A))return!1;for(const A of r.names)if(s(a,A))return!0;return!1},r.humanize=i(9192),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(n).forEach((a=>{r[a]=n[a]})),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(a){let A=0;for(let l=0;l<a.length;l++)A=(A<<5)-A+a.charCodeAt(l),A|=0;return r.colors[Math.abs(A)%r.colors.length]},r.enable(r.load()),r}},1124:(e,t,i)=>{var n=i(6240),r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(A,l,h){var c=l[h];if(c!=null){if(r.call(A,h)&&(A[h]===void 0||A[h]===null))throw new TypeError("Cannot convert undefined or null to object ("+h+")");r.call(A,h)&&n(c)?A[h]=a(Object(A[h]),l[h]):A[h]=c}}function a(A,l){if(A===l)return A;for(var h in l=Object(l))r.call(l,h)&&s(A,l,h);if(Object.getOwnPropertySymbols)for(var c=Object.getOwnPropertySymbols(l),g=0;g<c.length;g++)o.call(l,c[g])&&s(A,l,c[g]);return A}e.exports=function(A){A=(function(h){if(h==null)throw new TypeError("Sources cannot be null or undefined");return Object(h)})(A);for(var l=1;l<arguments.length;l++)a(A,arguments[l]);return A}},8480:e=>{e.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},919:(e,t,i)=>{var n;n=typeof window<"u"?window:i.g!==void 0?i.g:typeof self<"u"?self:{},e.exports=n},1024:(e,t)=>{t.read=function(i,n,r,o,s){var a,A,l=8*s-o-1,h=(1<<l)-1,c=h>>1,g=-7,p=r?s-1:0,E=r?-1:1,m=i[n+p];for(p+=E,a=m&(1<<-g)-1,m>>=-g,g+=l;g>0;a=256*a+i[n+p],p+=E,g-=8);for(A=a&(1<<-g)-1,a>>=-g,g+=o;g>0;A=256*A+i[n+p],p+=E,g-=8);if(a===0)a=1-c;else{if(a===h)return A?NaN:1/0*(m?-1:1);A+=Math.pow(2,o),a-=c}return(m?-1:1)*A*Math.pow(2,a-o)},t.write=function(i,n,r,o,s,a){var A,l,h,c=8*a-s-1,g=(1<<c)-1,p=g>>1,E=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=o?0:a-1,C=o?1:-1,y=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(l=isNaN(n)?1:0,A=g):(A=Math.floor(Math.log(n)/Math.LN2),n*(h=Math.pow(2,-A))<1&&(A--,h*=2),(n+=A+p>=1?E/h:E*Math.pow(2,1-p))*h>=2&&(A++,h/=2),A+p>=g?(l=0,A=g):A+p>=1?(l=(n*h-1)*Math.pow(2,s),A+=p):(l=n*Math.pow(2,p-1)*Math.pow(2,s),A=0));s>=8;i[r+m]=255&l,m+=C,l/=256,s-=8);for(A=A<<s|l,c+=s;c>0;i[r+m]=255&A,m+=C,A/=256,c-=8);i[r+m-C]|=128*y}},2225:e=>{function t(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}e.exports=function(i){return i!=null&&(t(i)||(function(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&t(n.slice(0,0))})(i)||!!i._isBuffer)}},8847:e=>{e.exports=function(i){if(!i)return!1;var n=t.call(i);return n==="[object Function]"||typeof i=="function"&&n!=="[object RegExp]"||typeof window<"u"&&(i===window.setTimeout||i===window.alert||i===window.confirm||i===window.prompt)};var t=Object.prototype.toString},6240:e=>{e.exports=function(t){var i=typeof t;return t!==null&&(i==="object"||i==="function")}},5651:(e,t,i)=>{var n=i(5406),r=i(4597),o=i(5734),s=["x","e","a","o","n","s","r","c","u","m","v","w","z"],a=["m","w"],A=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],l=9,h=32;function c(C){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(C)}function g(C){return new Function(["return function "+C+"() {","  return this._"+C,"}"].join(`
`))()}function p(C,y){if(!C.chars||C.chars.length===0)return null;var b=m(C.chars,y);return b>=0?C.chars[b]:null}function E(C,y,b){if(!C.kernings||C.kernings.length===0)return 0;for(var B=C.kernings,w=0;w<B.length;w++){var I=B[w];if(I.first===y&&I.second===b)return I.amount}return 0}function m(C,y,b){for(var B=b=b||0;B<C.length;B++)if(C[B].id===y)return B;return-1}e.exports=function(C){return new c(C)},c.prototype.update=function(C){if(C=r({measure:this._measure},C),this._opt=C,this._opt.tabSize=o(this._opt.tabSize,4),!C.font)throw new Error("must provide a valid bitmap font");var y=this.glyphs,b=C.text||"",B=C.font;this._setupSpaceGlyphs(B);var w=n.lines(b,C),I=C.width||0;y.length=0;var S=w.reduce((function(U,N){return Math.max(U,N.width,I)}),0),Q=0,D=0,k=o(C.lineHeight,B.common.lineHeight),F=B.common.base,R=k-F,P=C.letterSpacing||0,O=k*w.length-R,Y=(function(U){return U==="center"?1:U==="right"?2:0})(this._opt.align);D-=O,this._width=S,this._height=O,this._descender=k-F,this._baseline=F,this._xHeight=(function(U){for(var N=0;N<s.length;N++){var K=s[N].charCodeAt(0),H=m(U.chars,K);if(H>=0)return U.chars[H].height}return 0})(B),this._capHeight=(function(U){for(var N=0;N<A.length;N++){var K=A[N].charCodeAt(0),H=m(U.chars,K);if(H>=0)return U.chars[H].height}return 0})(B),this._lineHeight=k,this._ascender=k-R-this._xHeight;var it=this;w.forEach((function(U,N){for(var K,H=U.start,Z=U.end,st=U.width,X=H;X<Z;X++){var nt=b.charCodeAt(X),z=it.getGlyph(B,nt);if(z){K&&(Q+=E(B,K.id,z.id));var at=Q;Y===1?at+=(S-st)/2:Y===2&&(at+=S-st),y.push({position:[at,D],data:z,index:X,line:N}),Q+=z.xadvance+P,K=z}}D+=k,Q=0})),this._linesTotal=w.length},c.prototype._setupSpaceGlyphs=function(C){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,C.chars&&C.chars.length!==0){var y=p(C,h)||(function(B){for(var w=0;w<a.length;w++){var I=a[w].charCodeAt(0),S=m(B.chars,I);if(S>=0)return B.chars[S]}return 0})(C)||C.chars[0],b=this._opt.tabSize*y.xadvance;this._fallbackSpaceGlyph=y,this._fallbackTabGlyph=r(y,{x:0,y:0,xadvance:b,id:l,xoffset:0,yoffset:0,width:0,height:0})}},c.prototype.getGlyph=function(C,y){return p(C,y)||(y===l?this._fallbackTabGlyph:y===h?this._fallbackSpaceGlyph:null)},c.prototype.computeMetrics=function(C,y,b,B){var w,I=this._opt.letterSpacing||0,S=this._opt.font,Q=0,D=0,k=0;if(!S.chars||S.chars.length===0)return{start:y,end:y,width:0};b=Math.min(C.length,b);for(var F=y;F<b;F++){var R,P=C.charCodeAt(F);if(R=this.getGlyph(S,P)){R.xoffset;var O=(Q+=w?E(S,w.id,R.id):0)+R.xadvance+I,Y=Q+R.width;if(Y>=B||O>=B)break;Q=O,D=Y,w=R}k++}return w&&(D+=w.xoffset),{start:y,end:y+k,width:D}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach((function(C){Object.defineProperty(c.prototype,C,{get:g(C),configurable:!0})}))},5751:(e,t,i)=>{var n=i(9922).hp,r=i(3558),o=function(){},s=i(1476),a=i(7034),A=i(7480),l=i(573),h=i(4597),c=self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;e.exports=function(g,p){p=typeof p=="function"?p:o,typeof g=="string"?g={uri:g}:g||(g={}),g.binary&&(g=(function(E){if(c)return h(E,{responseType:"arraybuffer"});if(self.XMLHttpRequest===void 0)throw new Error("your browser does not support XHR loading");var m=new self.XMLHttpRequest;return m.overrideMimeType("text/plain; charset=x-user-defined"),h({xhr:m},E)})(g)),r(g,(function(E,m,C){if(E)return p(E);if(!/^2/.test(m.statusCode))return p(new Error("http status code: "+m.statusCode));if(!C)return p(new Error("no body result"));var y,b,B=!1;if(y=C,Object.prototype.toString.call(y)==="[object ArrayBuffer]"){var w=new Uint8Array(C);C=n.from(w,"binary")}l(C)&&(B=!0,typeof C=="string"&&(C=n.from(C,"binary"))),B||(n.isBuffer(C)&&(C=C.toString(g.encoding)),C=C.trim());try{var I=m.headers["content-type"];b=B?A(C):/json/.test(I)||C.charAt(0)==="{"?JSON.parse(C):/xml/.test(I)||C.charAt(0)==="<"?a(C):s(C)}catch(S){p(new Error("error parsing font "+S.message)),p=o}p(null,b)}))}},573:(e,t,i)=>{var n=i(9922).hp,r=i(911),o=n.from([66,77,70,3]);e.exports=function(s){return typeof s=="string"?s.substring(0,3)==="BMF":s.length>4&&r(s.slice(0,4),o)}},9192:e=>{var t=1e3,i=60*t,n=60*i,r=24*n,o=7*r;function s(a,A,l,h){var c=A>=1.5*l;return Math.round(a/l)+" "+h+(c?"s":"")}e.exports=function(a,A){A=A||{};var l,h,c=typeof a;if(c==="string"&&a.length>0)return(function(g){if(!((g=String(g)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(p){var E=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*E;case"weeks":case"week":case"w":return E*o;case"days":case"day":case"d":return E*r;case"hours":case"hour":case"hrs":case"hr":case"h":return E*n;case"minutes":case"minute":case"mins":case"min":case"m":return E*i;case"seconds":case"second":case"secs":case"sec":case"s":return E*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return E;default:return}}}})(a);if(c==="number"&&isFinite(a))return A.long?(l=a,(h=Math.abs(l))>=r?s(l,h,r,"day"):h>=n?s(l,h,n,"hour"):h>=i?s(l,h,i,"minute"):h>=t?s(l,h,t,"second"):l+" ms"):(function(g){var p=Math.abs(g);return p>=r?Math.round(g/r)+"d":p>=n?Math.round(g/n)+"h":p>=i?Math.round(g/i)+"m":p>=t?Math.round(g/t)+"s":g+"ms"})(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},1476:e=>{function t(n,r){if(!(n=n.replace(/\t+/g," ").trim()))return null;var o=n.indexOf(" ");if(o===-1)throw new Error("no named row at line "+r);var s=n.substring(0,o);n=(n=(n=(n=n.substring(o+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map((function(c){return c.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)}));for(var a=[],A=0;A<n.length;A++){var l=n[A];A===0?a.push({key:l[0],data:""}):A===n.length-1?a[a.length-1].data=i(l[0]):(a[a.length-1].data=i(l[0]),a.push({key:l[1],data:""}))}var h={key:s,data:{}};return a.forEach((function(c){h.data[c.key]=c.data})),h}function i(n){return n&&n.length!==0?n.indexOf('"')===0||n.indexOf("'")===0?n.substring(1,n.length-1):n.indexOf(",")!==-1?(function(r){return r.split(",").map((function(o){return parseInt(o,10)}))})(n):parseInt(n,10):""}e.exports=function(n){if(!n)throw new Error("no data provided");var r={pages:[],chars:[],kernings:[]},o=(n=n.toString().trim()).split(/\r\n?|\n/g);if(o.length===0)throw new Error("no data in BMFont file");for(var s=0;s<o.length;s++){var a=t(o[s],s);if(a)if(a.key==="page"){if(typeof a.data.id!="number")throw new Error("malformed file at line "+s+" -- needs page id=N");if(typeof a.data.file!="string")throw new Error("malformed file at line "+s+' -- needs page file="path"');r.pages[a.data.id]=a.data.file}else a.key==="chars"||a.key==="kernings"||(a.key==="char"?r.chars.push(a.data):a.key==="kerning"?r.kernings.push(a.data):r[a.key]=a.data)}return r}},7480:e=>{var t=[66,77,70];function i(r,o,s){if(s>o.length-1)return 0;var a=o.readUInt8(s++),A=o.readInt32LE(s);switch(s+=4,a){case 1:r.info=(function(l,h){var c={};c.size=l.readInt16LE(h);var g=l.readUInt8(h+2);return c.smooth=g>>7&1,c.unicode=g>>6&1,c.italic=g>>5&1,c.bold=g>>4&1,g>>3&1&&(c.fixedHeight=1),c.charset=l.readUInt8(h+3)||"",c.stretchH=l.readUInt16LE(h+4),c.aa=l.readUInt8(h+6),c.padding=[l.readInt8(h+7),l.readInt8(h+8),l.readInt8(h+9),l.readInt8(h+10)],c.spacing=[l.readInt8(h+11),l.readInt8(h+12)],c.outline=l.readUInt8(h+13),c.face=(function(p,E){return n(p,E).toString("utf8")})(l,h+14),c})(o,s);break;case 2:r.common=(function(l,h){var c={};return c.lineHeight=l.readUInt16LE(h),c.base=l.readUInt16LE(h+2),c.scaleW=l.readUInt16LE(h+4),c.scaleH=l.readUInt16LE(h+6),c.pages=l.readUInt16LE(h+8),l.readUInt8(h+10),c.packed=0,c.alphaChnl=l.readUInt8(h+11),c.redChnl=l.readUInt8(h+12),c.greenChnl=l.readUInt8(h+13),c.blueChnl=l.readUInt8(h+14),c})(o,s);break;case 3:r.pages=(function(l,h,c){for(var g=[],p=n(l,h),E=p.length+1,m=c/E,C=0;C<m;C++)g[C]=l.slice(h,h+p.length).toString("utf8"),h+=E;return g})(o,s,A);break;case 4:r.chars=(function(l,h,c){for(var g=[],p=c/20,E=0;E<p;E++){var m={},C=20*E;m.id=l.readUInt32LE(h+0+C),m.x=l.readUInt16LE(h+4+C),m.y=l.readUInt16LE(h+6+C),m.width=l.readUInt16LE(h+8+C),m.height=l.readUInt16LE(h+10+C),m.xoffset=l.readInt16LE(h+12+C),m.yoffset=l.readInt16LE(h+14+C),m.xadvance=l.readInt16LE(h+16+C),m.page=l.readUInt8(h+18+C),m.chnl=l.readUInt8(h+19+C),g[E]=m}return g})(o,s,A);break;case 5:r.kernings=(function(l,h,c){for(var g=[],p=c/10,E=0;E<p;E++){var m={},C=10*E;m.first=l.readUInt32LE(h+0+C),m.second=l.readUInt32LE(h+4+C),m.amount=l.readInt16LE(h+8+C),g[E]=m}return g})(o,s,A)}return 5+A}function n(r,o){for(var s=o;s<r.length&&r[s]!==0;s++);return r.slice(o,s)}e.exports=function(r){if(r.length<6)throw new Error("invalid buffer length for BMFont");var o=t.every((function(l,h){return r.readUInt8(h)===l}));if(!o)throw new Error("BMFont missing BMF byte header");var s=3;if(r.readUInt8(s++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var a={kernings:[],chars:[]},A=0;A<5;A++)s+=i(a,r,s);return a}},7034:(e,t,i)=>{var n=i(7829),r=i(1896),o={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};function s(a){var A=(function(l){for(var h=[],c=0;c<l.attributes.length;c++)h.push(l.attributes[c]);return h})(a);return A.reduce((function(l,h){var c;return l[c=h.nodeName,o[c.toLowerCase()]||c]=h.nodeValue,l}),{})}e.exports=function(a){a=a.toString();var A=r(a),l={pages:[],chars:[],kernings:[]};["info","common"].forEach((function(C){var y=A.getElementsByTagName(C)[0];y&&(l[C]=n(s(y)))}));var h=A.getElementsByTagName("pages")[0];if(!h)throw new Error("malformed file -- no <pages> element");for(var c=h.getElementsByTagName("page"),g=0;g<c.length;g++){var p=c[g],E=parseInt(p.getAttribute("id"),10),m=p.getAttribute("file");if(isNaN(E))throw new Error('malformed file -- page "id" attribute is NaN');if(!m)throw new Error('malformed file -- needs page "file" attribute');l.pages[parseInt(E,10)]=m}return["chars","kernings"].forEach((function(C){var y=A.getElementsByTagName(C)[0];if(y)for(var b=C.substring(0,C.length-1),B=y.getElementsByTagName(b),w=0;w<B.length;w++){var I=B[w];l[C].push(n(s(I)))}})),l}},7829:e=>{var t="chasrset";e.exports=function(i){for(var n in i=Object.assign({},i),t in i&&(i.charset=i[t],delete i[t]),i)n!=="face"&&n!=="charset"&&(i[n]=n==="padding"||n==="spacing"?i[n].split(",").map((function(r){return parseInt(r,10)})):parseInt(i[n],10));return i}},3216:e=>{var t=function(i){return i.replace(/^\s+|\s+$/g,"")};e.exports=function(i){if(!i)return{};for(var n,r={},o=t(i).split(`
`),s=0;s<o.length;s++){var a=o[s],A=a.indexOf(":"),l=t(a.slice(0,A)).toLowerCase(),h=t(a.slice(A+1));r[l]===void 0?r[l]=h:(n=r[l],Object.prototype.toString.call(n)==="[object Array]"?r[l].push(h):r[l]=[r[l],h])}return r}},9035:(e,t,i)=>{var n=i(8480),r=i(8167),o=i(2225),s=[0,2,3],a=[2,1,3];e.exports=function(A,l){A&&(r(A)||o(A))||(l=A||{},A=null);for(var h=typeof(l=typeof l=="number"?{count:l}:l||{}).type=="string"?l.type:"uint16",c=typeof l.count=="number"?l.count:1,g=l.start||0,p=l.clockwise!==!1?s:a,E=p[0],m=p[1],C=p[2],y=6*c,b=A||new(n(h))(y),B=0,w=0;B<y;B+=6,w+=4){var I=B+g;b[I+0]=w+0,b[I+1]=w+1,b[I+2]=w+2,b[I+3]=w+E,b[I+4]=w+m,b[I+5]=w+C}return b}},4433:(e,t,i)=>{var n=i(5651),r=i(9035),o=i(7106),s=i(1684);e.exports=function(A){return new a(A)};class a extends THREE.BufferGeometry{constructor(l){super(),typeof l=="string"&&(l={text:l}),this._opt=Object.assign({},l),l&&this.update(l)}update(l){if(typeof l=="string"&&(l={text:l}),!(l=Object.assign({},this._opt,l)).font)throw new TypeError("must specify a { font } in options");this.layout=n(l);var h=l.flipY!==!1,c=l.font,g=c.common.scaleW,p=c.common.scaleH,E=this.layout.glyphs.filter((function(B){var w=B.data;return w.width*w.height>0}));this.visibleGlyphs=E;var m=o.positions(E),C=o.uvs(E,g,p,h),y=r([],{clockwise:!0,type:"uint16",count:E.length});if(this.setIndex(y),this.setAttribute("position",new THREE.BufferAttribute(m,2)),this.setAttribute("uv",new THREE.BufferAttribute(C,2)),!l.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(l.multipage){var b=o.pages(E);this.setAttribute("page",new THREE.BufferAttribute(b,1))}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere()}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var l=this.attributes.position.array,h=this.attributes.position.itemSize;if(!l||!h||l.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);s.computeSphere(l,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var l=this.boundingBox,h=this.attributes.position.array,c=this.attributes.position.itemSize;!h||!c||h.length<2?l.makeEmpty():s.computeBox(h,l)}}},1684:e=>{var t={min:[0,0],max:[0,0]};function i(n){var r=n.length/2;t.min[0]=n[0],t.min[1]=n[1],t.max[0]=n[0],t.max[1]=n[1];for(var o=0;o<r;o++){var s=n[2*o+0],a=n[2*o+1];t.min[0]=Math.min(s,t.min[0]),t.min[1]=Math.min(a,t.min[1]),t.max[0]=Math.max(s,t.max[0]),t.max[1]=Math.max(a,t.max[1])}}e.exports.computeBox=function(n,r){i(n),r.min.set(t.min[0],t.min[1],0),r.max.set(t.max[0],t.max[1],0)},e.exports.computeSphere=function(n,r){i(n);var o=t.min[0],s=t.min[1],a=t.max[0]-o,A=t.max[1]-s,l=Math.sqrt(a*a+A*A);r.center.set(o+a/2,s+A/2,0),r.radius=l/2}},7106:e=>{e.exports.pages=function(t){var i=new Float32Array(4*t.length*1),n=0;return t.forEach((function(r){var o=r.data.page||0;i[n++]=o,i[n++]=o,i[n++]=o,i[n++]=o})),i},e.exports.uvs=function(t,i,n,r){var o=new Float32Array(4*t.length*2),s=0;return t.forEach((function(a){var A=a.data,l=A.x+A.width,h=A.y+A.height,c=A.x/i,g=A.y/n,p=l/i,E=h/n;r&&(g=(n-A.y)/n,E=(n-h)/n),o[s++]=c,o[s++]=g,o[s++]=c,o[s++]=E,o[s++]=p,o[s++]=E,o[s++]=p,o[s++]=g})),o},e.exports.positions=function(t){var i=new Float32Array(4*t.length*2),n=0;return t.forEach((function(r){var o=r.data,s=r.position[0]+o.xoffset,a=r.position[1]+o.yoffset,A=o.width,l=o.height;i[n++]=s,i[n++]=a,i[n++]=s,i[n++]=a+l,i[n++]=s+A,i[n++]=a+l,i[n++]=s+A,i[n++]=a})),i}},5406:e=>{var t=/\n/,i=/\s/;function n(s,a,A,l){var h=s.indexOf(a,A);return h===-1||h>l?l:h}function r(s){return i.test(s)}function o(s,a,A,l){return{start:a,end:a+Math.min(l,A-a)}}e.exports=function(s,a){return e.exports.lines(s,a).map((function(A){return s.substring(A.start,A.end)})).join(`
`)},e.exports.lines=function(s,a){if((a=a||{}).width===0&&a.mode!=="nowrap")return[];s=s||"";var A=typeof a.width=="number"?a.width:Number.MAX_VALUE,l=Math.max(0,a.start||0),h=typeof a.end=="number"?a.end:s.length,c=a.mode,g=a.measure||o;return c==="pre"?(function(p,E,m,C,y){for(var b=[],B=m,w=m;w<C&&w<E.length;w++){var I=E.charAt(w),S=t.test(I);if(S||w===C-1){var Q=p(E,B,S?w:w+1,y);b.push(Q),B=w+1}}return b})(g,s,l,h,A):(function(p,E,m,C,y,b){var B=[],w=y;for(b==="nowrap"&&(w=Number.MAX_VALUE);m<C&&m<E.length;){for(var I=n(E,`
`,m,C);m<I&&r(E.charAt(m));)m++;var S=p(E,m,I,w),Q=m+(S.end-S.start),D=Q+1;if(Q<I){for(;Q>m&&!r(E.charAt(Q));)Q--;if(Q===m)D>m+1&&D--,Q=D;else for(D=Q;Q>m&&r(E.charAt(Q-1));)Q--}if(Q>=m){var k=p(E,m,Q,w);B.push(k)}m=D}return B})(g,s,l,h,A,c)}},3558:(e,t,i)=>{var n=i(919),r=i(8847),o=i(3216),s=i(4597);function a(h,c,g){var p=h;return r(c)?(g=c,typeof h=="string"&&(p={uri:h})):p=s(c,{uri:h}),p.callback=g,p}function A(h,c,g){return l(c=a(h,c,g))}function l(h){if(h.callback===void 0)throw new Error("callback argument missing");var c=!1,g=function(R,P,O){c||(c=!0,h.callback(R,P,O))};function p(){var R=void 0;if(R=b.response?b.response:b.responseText||(function(P){try{if(P.responseType==="document")return P.responseXML;var O=P.responseXML&&P.responseXML.documentElement.nodeName==="parsererror";if(P.responseType===""&&!O)return P.responseXML}catch{}return null})(b),k)try{R=JSON.parse(R)}catch{}return R}function E(R){return clearTimeout(B),R instanceof Error||(R=new Error(""+(R||"Unknown XMLHttpRequest Error"))),R.statusCode=0,g(R,F)}function m(){if(!y){var R;clearTimeout(B),R=h.useXDR&&b.status===void 0?200:b.status===1223?204:b.status;var P=F,O=null;return R!==0?(P={body:p(),statusCode:R,method:I,headers:{},url:w,rawRequest:b},b.getAllResponseHeaders&&(P.headers=o(b.getAllResponseHeaders()))):O=new Error("Internal XMLHttpRequest Error"),g(O,P,P.body)}}var C,y,b=h.xhr||null;b||(b=h.cors||h.useXDR?new A.XDomainRequest:new A.XMLHttpRequest);var B,w=b.url=h.uri||h.url,I=b.method=h.method||"GET",S=h.body||h.data,Q=b.headers=h.headers||{},D=!!h.sync,k=!1,F={body:void 0,headers:{},statusCode:0,method:I,url:w,rawRequest:b};if("json"in h&&h.json!==!1&&(k=!0,Q.accept||Q.Accept||(Q.Accept="application/json"),I!=="GET"&&I!=="HEAD"&&(Q["content-type"]||Q["Content-Type"]||(Q["Content-Type"]="application/json"),S=JSON.stringify(h.json===!0?S:h.json))),b.onreadystatechange=function(){b.readyState===4&&setTimeout(m,0)},b.onload=m,b.onerror=E,b.onprogress=function(){},b.onabort=function(){y=!0},b.ontimeout=E,b.open(I,w,!D,h.username,h.password),D||(b.withCredentials=!!h.withCredentials),!D&&h.timeout>0&&(B=setTimeout((function(){if(!y){y=!0,b.abort("timeout");var R=new Error("XMLHttpRequest timeout");R.code="ETIMEDOUT",E(R)}}),h.timeout)),b.setRequestHeader)for(C in Q)Q.hasOwnProperty(C)&&b.setRequestHeader(C,Q[C]);else if(h.headers&&!(function(R){for(var P in R)if(R.hasOwnProperty(P))return!1;return!0})(h.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in h&&(b.responseType=h.responseType),"beforeSend"in h&&typeof h.beforeSend=="function"&&h.beforeSend(b),b.send(S||null),b}e.exports=A,e.exports.default=A,A.XMLHttpRequest=n.XMLHttpRequest||function(){},A.XDomainRequest="withCredentials"in new A.XMLHttpRequest?A.XMLHttpRequest:n.XDomainRequest,(function(h,c){for(var g=0;g<h.length;g++)c(h[g])})(["get","put","post","patch","head","delete"],(function(h){A[h==="delete"?"del":h]=function(c,g,p){return(g=a(c,g,p)).method=h.toUpperCase(),l(g)}}))},1896:e=>{e.exports=self.DOMParser!==void 0?function(t){return new self.DOMParser().parseFromString(t,"application/xml")}:self.ActiveXObject!==void 0&&new self.ActiveXObject("Microsoft.XMLDOM")?function(t){var i=new self.ActiveXObject("Microsoft.XMLDOM");return i.async="false",i.loadXML(t),i}:function(t){var i=document.createElement("div");return i.innerHTML=t,i}},4597:e=>{e.exports=function(){for(var i={},n=0;n<arguments.length;n++){var r=arguments[n];for(var o in r)t.call(r,o)&&(i[o]=r[o])}return i};var t=Object.prototype.hasOwnProperty},8132:()=>{window.aframeStats=function(e){var t=null,i=e;return{update:function(){var n;t("te").set((n=i.querySelectorAll("*"),Array.prototype.slice.call(n).filter((function(r){return r.isEntity})),n.length)),window.performance.getEntriesByName&&t("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(n){t=n},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}}},3729:e=>{window.glStats=function(){var t=null,i=0,n=0,r=0,o=0,s=0,a=0,A=0;function l(h,c){return function(){c.apply(this,arguments),h.apply(this,arguments)}}return WebGLRenderingContext.prototype.drawArrays=l(WebGLRenderingContext.prototype.drawArrays,(function(){i++,arguments[0]==this.POINTS?a+=arguments[2]:s+=arguments[2]})),WebGLRenderingContext.prototype.drawElements=l(WebGLRenderingContext.prototype.drawElements,(function(){n++,o+=arguments[1]/3,s+=arguments[1]})),WebGLRenderingContext.prototype.useProgram=l(WebGLRenderingContext.prototype.useProgram,(function(){r++})),WebGLRenderingContext.prototype.bindTexture=l(WebGLRenderingContext.prototype.bindTexture,(function(){A++})),{update:function(){t("allcalls").set(i+n),t("drawElements").set(n),t("drawArrays").set(i),t("bindTexture").set(A),t("useProgram").set(r),t("glfaces").set(o),t("glvertices").set(s),t("glpoints").set(a)},start:function(){i=0,n=0,r=0,o=0,s=0,a=0,A=0},end:function(){},attach:function(h){t=h},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(t){var i=null;return{update:function(){i("renderer.info.memory.geometries").set(t.info.memory.geometries),i("renderer.info.programs").set(t.info.programs?.length??NaN),i("renderer.info.memory.textures").set(t.info.memory.textures),i("renderer.info.render.calls").set(t.info.render.calls),i("renderer.info.render.triangles").set(t.info.render.triangles),i("renderer.info.render.points").set(t.info.render.points)},start:function(){},end:function(){},attach:function(n){i=n},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],fractions:[]}},window.BrowserStats=function(){var t=null,i=0,n=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var r=Math.log(1024);function o(s){var a=Math.floor(Math.log(s)/r);return Math.round(100*s/Math.pow(1024,a))/100}return{update:function(){i=o(performance.memory.usedJSHeapSize),n=o(performance.memory.totalJSHeapSize),t("memory").set(i),t("total").set(n)},start:function(){i=0},end:function(){},attach:function(s){t=s},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},e.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},282:e=>{(function(){"performance"in window==0&&(window.performance={});var t=window.performance;if("now"in t==0){var i=Date.now();t.timing&&t.timing.navigationStart&&(i=t.timing.navigationStart),t.now=function(){return Date.now()-i}}t.mark||(t.mark=function(){}),t.measure||(t.measure=function(){})})(),window.rStats=function(t){function i(m,C){for(var y=Object.keys(m),b=0,B=y.length;b<B;b++)C(y[b])}var n=t||{},r=n.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],o=(n.CSSPath?n.CSSPath:"")+"rStats.css";(n.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",o]).forEach((function(m){var C,y;C=m,(y=document.createElement("link")).href=C,y.rel="stylesheet",y.type="text/css",document.getElementsByTagName("head")[0].appendChild(y)})),n.values||(n.values={});var s,a,A=10,l={};function h(m,C,y){var b=y||{},B=document.createElement("canvas"),w=B.getContext("2d"),I=0,S=0,Q=b.color?b.color:"#666666",D=document.createElement("canvas"),k=D.getContext("2d");D.width=1,D.height=20,k.fillStyle="#444444",k.fillRect(0,0,1,20),k.fillStyle=Q,k.fillRect(0,A,1,A),k.fillStyle="#ffffff",k.globalAlpha=.5,k.fillRect(0,A,1,1),k.globalAlpha=1;var F=document.createElement("canvas"),R=F.getContext("2d");return F.width=1,F.height=20,R.fillStyle="#444444",R.fillRect(0,0,1,20),R.fillStyle="#b70000",R.fillRect(0,A,1,A),R.globalAlpha=.5,R.fillStyle="#ffffff",R.fillRect(0,A,1,1),R.globalAlpha=1,B.width=200,B.height=A,B.style.width=B.width+"px",B.style.height=B.height+"px",B.className="rs-canvas",m.appendChild(B),w.fillStyle="#444444",w.fillRect(0,0,B.width,B.height),{draw:function(P,O){(S+=.1*(P-S))>(I*=.99)&&(I=S),w.drawImage(B,1,0,B.width-1,B.height,0,0,B.width-1,B.height),O?w.drawImage(F,B.width-1,B.height-S*B.height/I-A):w.drawImage(D,B.width-1,B.height-S*B.height/I-A)}}}function c(m,C){var y=document.createElement("canvas"),b=y.getContext("2d");return y.width=200,y.height=A*C,y.style.width=y.width+"px",y.style.height=y.height+"px",y.className="rs-canvas",m.appendChild(y),b.fillStyle="#444444",b.fillRect(0,0,y.width,y.height),{draw:function(B){b.drawImage(y,1,0,y.width-1,y.height,0,0,y.width-1,y.height);var w=0;i(B,(function(I){var S=B[I]*y.height;b.fillStyle=r[I],b.fillRect(y.width-1,w,1,S),w+=S}))}}}function g(m,C){var y,b=m,B=0,w=0,I=0,S=0,Q=performance.now(),D=0,k=document.createElement("div"),F=document.createElement("span"),R=document.createElement("div"),P=document.createTextNode(""),O=n?n.values[b.toLowerCase()]:null,Y=new h(k,b,O),it=!1;function U(H){if(O&&O.average){S+=H,D++;var Z=performance.now();Z-Q>=(O.avgMs||1e3)&&(I=S/D,S=0,Q=Z,D=0)}}function N(){y=performance.now(),n.userTimingAPI&&performance.mark(b+"-start"),it=!0}function K(){B=performance.now()-y,n.userTimingAPI&&(performance.mark(b+"-end"),it&&performance.measure(b,b+"-start",b+"-end")),U(B)}return F.className="rs-counter-id",F.textContent=O&&O.caption?O.caption:b,R.className="rs-counter-value",R.appendChild(P),k.appendChild(F),k.appendChild(R),C?C.div.appendChild(k):a.appendChild(k),y=performance.now(),{set:function(H){U(B=H)},start:N,tick:function(){K(),N()},end:K,frame:function(){var H=performance.now(),Z=H-y;w++,Z>1e3&&(B=O&&O.interpolate===!1?w:1e3*w/Z,w=0,y=H,U(B))},value:function(){return B},draw:function(){var H=O&&O.average?I:B;P.nodeValue=Math.round(100*H)/100;var Z=O&&(O.below&&B<O.below||O.over&&B>O.over);Y.draw(B,Z),k.className=Z?"rs-counter-base alarm":"rs-counter-base"}}}function p(m){var C=m.toLowerCase();if(C===void 0&&(C="default"),l[C])return l[C];var y=null;n&&n.groups&&i(n.groups,(function(B){var w=n.groups[parseInt(B,10)];y||w.values.indexOf(C.toLowerCase())===-1||(y=w)}));var b=new g(C,y);return l[C]=b,b}function E(){i(n.plugins,(function(m){n.plugins[m].update()})),i(l,(function(m){l[m].draw()})),n&&n.fractions&&i(n.fractions,(function(m){var C=n.fractions[parseInt(m,10)],y=[],b=l[C.base.toLowerCase()];b&&(b=b.value(),i(n.fractions[m].steps,(function(B){var w=n.fractions[m].steps[parseInt(B,10)].toLowerCase(),I=l[w];I&&y.push(I.value()/b)}))),C.graph.draw(y)}))}return(function(){if(n.plugins){n.values||(n.values={}),n.groups||(n.groups=[]),n.fractions||(n.fractions=[]);for(var m=0;m<n.plugins.length;m++)n.plugins[m].attach(p),i(n.plugins[m].values,(function(C){n.values[C]=n.plugins[m].values[C]})),n.groups=n.groups.concat(n.plugins[m].groups),n.fractions=n.fractions.concat(n.plugins[m].fractions)}else n.plugins={};(s=document.createElement("div")).className="rs-base",(a=document.createElement("div")).className="rs-container",a.style.height="auto",s.appendChild(a),document.body.appendChild(s),n&&(n.groups&&i(n.groups,(function(C){var y=n.groups[parseInt(C,10)],b=document.createElement("div");b.className="rs-group",y.div=b;var B=document.createElement("h1");B.textContent=y.caption,B.addEventListener("click",(function(w){this.classList.toggle("hidden"),w.preventDefault()}).bind(b)),a.appendChild(B),a.appendChild(b)})),n.fractions&&i(n.fractions,(function(C){var y=n.fractions[parseInt(C,10)],b=document.createElement("div");b.className="rs-fraction";var B=document.createElement("div");B.className="rs-legend";var w=0;i(n.fractions[C].steps,(function(S){var Q=document.createElement("p");Q.textContent=n.fractions[C].steps[S],Q.style.color=r[w],B.appendChild(Q),w++})),b.appendChild(B),b.style.height=w*A+"px",y.div=b;var I=new c(b,w);y.graph=I,a.appendChild(b)})))})(),function(m){return m?p(m):{element:s,update:E}}},e.exports=window.rStats},2535:e=>{var t={base64:function(i,n){return"data:"+i+";base64,"+n},isMobile:function(){var i,n=!1;return i=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4)))&&(n=!0),n},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch{return!0}},appendQueryParameter:function(i,n,r){var o=i.indexOf("?")<0?"?":"&";return i+(o+n+"=")+r},getQueryParameter:function(i){i=i.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+i+"=([^&#]*)").exec(location.search);return n===null?"":decodeURIComponent(n[1].replace(/\+/g," "))},isLandscapeMode:function(){return window.orientation==90||window.orientation==-90}};e.exports=t},5928:(e,t,i)=>{var n,r=i(2535);e.exports=(n=navigator.userAgent||navigator.vendor||window.opera).match(/iPhone/i)||n.match(/iPod/i)?function(){var o=null;this.request=function(){o||(o=setInterval((function(){window.location.href="/",setTimeout(window.stop,0)}),15e3))},this.release=function(){o&&(clearInterval(o),o=null)}}:function(){var o=document.createElement("video");o.addEventListener("ended",(function(){o.play()})),this.request=function(){o.paused&&(o.src=r.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),o.play())},this.release=function(){o.pause(),o.src=""}}},8217:(e,t,i)=>{i.d(t,{A:()=>w});var n=i(963),r=i.n(n),o=i(9089),s=i.n(o),a=i(6492),A=i.n(a),l=new URL(i(9169),i.b),h=new URL(i(6085),i.b),c=new URL(i(3931),i.b),g=new URL(i(7889),i.b),p=new URL(i(6517),i.b),E=s()(r()),m=A()(l),C=A()(h),y=A()(c),b=A()(g),B=A()(p);E.push([e.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(${m}) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(${C}) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(${y});
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(${b}) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(${B}) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"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",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const w=E},2470:(e,t,i)=>{i.d(t,{A:()=>a});var n=i(963),r=i.n(n),o=i(9089),s=i.n(o)()(r());s.push([e.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const a=s},7180:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var n=i(5072),r=i.n(n),o=i(7825),s=i.n(o),a=i(7659),A=i.n(a),l=i(5056),h=i.n(l),c=i(540),g=i.n(c),p=i(1113),E=i.n(p),m=i(8217),C={};C.styleTagTransform=E(),C.setAttributes=h(),C.insert=A().bind(null,"head"),C.domAPI=s(),C.insertStyleElement=g(),r()(m.A,C);const y=m.A&&m.A.locals?m.A.locals:void 0},9379:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var n=i(5072),r=i.n(n),o=i(7825),s=i.n(o),a=i(7659),A=i.n(a),l=i(5056),h=i.n(l),c=i(540),g=i.n(c),p=i(1113),E=i.n(p),m=i(2470),C={};C.styleTagTransform=E(),C.setAttributes=h(),C.insert=A().bind(null,"head"),C.domAPI=s(),C.insertStyleElement=g(),r()(m.A,C);const y=m.A&&m.A.locals?m.A.locals:void 0},5072:e=>{var t=[];function i(o){for(var s=-1,a=0;a<t.length;a++)if(t[a].identifier===o){s=a;break}return s}function n(o,s){for(var a={},A=[],l=0;l<o.length;l++){var h=o[l],c=s.base?h[0]+s.base:h[0],g=a[c]||0,p="".concat(c," ").concat(g);a[c]=g+1;var E=i(p),m={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(E!==-1)t[E].references++,t[E].updater(m);else{var C=r(m,s);s.byIndex=l,t.splice(l,0,{identifier:p,updater:C,references:1})}A.push(p)}return A}function r(o,s){var a=s.domAPI(s);return a.update(o),function(A){if(A){if(A.css===o.css&&A.media===o.media&&A.sourceMap===o.sourceMap&&A.supports===o.supports&&A.layer===o.layer)return;a.update(o=A)}else a.remove()}}e.exports=function(o,s){var a=n(o=o||[],s=s||{});return function(A){A=A||[];for(var l=0;l<a.length;l++){var h=i(a[l]);t[h].references--}for(var c=n(A,s),g=0;g<a.length;g++){var p=i(a[g]);t[p].references===0&&(t[p].updater(),t.splice(p,1))}a=c}}},7659:e=>{var t={};e.exports=function(i,n){var r=(function(o){if(t[o]===void 0){var s=document.querySelector(o);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch{s=null}t[o]=s}return t[o]})(i);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(t){var i=document.createElement("style");return t.setAttributes(i,t.attributes),t.insert(i,t.options),i}},5056:(e,t,i)=>{e.exports=function(n){var r=i.nc;r&&n.setAttribute("nonce",r)}},7825:e=>{e.exports=function(t){if(typeof document>"u")return{update:function(){},remove:function(){}};var i=t.insertStyleElement(t);return{update:function(n){(function(r,o,s){var a="";s.supports&&(a+="@supports (".concat(s.supports,") {")),s.media&&(a+="@media ".concat(s.media," {"));var A=s.layer!==void 0;A&&(a+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),a+=s.css,A&&(a+="}"),s.media&&(a+="}"),s.supports&&(a+="}");var l=s.sourceMap;l&&typeof btoa<"u"&&(a+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),o.styleTagTransform(a,r,o.options)})(i,t,n)},remove:function(){(function(n){if(n.parentNode===null)return!1;n.parentNode.removeChild(n)})(i)}}}},1113:e=>{e.exports=function(t,i){if(i.styleSheet)i.styleSheet.cssText=t;else{for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(document.createTextNode(t))}}},3931:e=>{e.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},6085:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},9169:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},6517:e=>{e.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},7889:e=>{e.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"}},zo={};function G(e){var t=zo[e];if(t!==void 0)return t.exports;var i=zo[e]={id:e,exports:{}};return aA[e](i,i.exports,G),i.exports}G.m=aA,G.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return G.d(t,{a:t}),t},G.d=(e,t)=>{for(var i in t)G.o(t,i)&&!G.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},G.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),G.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),G.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},G.b=document.baseURI||self.location.href,G.nc=void 0;var AA={};G.d(AA,{A:()=>su});var Dr={};G.r(Dr),G.d(Dr,{computeMikkTSpaceTangents:()=>nh,computeMorphedAttributes:()=>hh,deepCloneAttribute:()=>oh,deinterleaveAttribute:()=>An,deinterleaveGeometry:()=>ah,estimateBytesUsed:()=>Ah,interleaveAttributes:()=>sh,mergeAttributes:()=>Wr,mergeGeometries:()=>rh,mergeGroups:()=>ch,mergeVertices:()=>lh,toCreasedNormals:()=>dh,toTrianglesDrawMode:()=>Yr});var kr={};G.r(kr),G.d(kr,{checkARSupport:()=>vo,checkHeadsetConnected:()=>Co,checkVRSupport:()=>Zr,isAppleVisionPro:()=>WA,isBrowserEnvironment:()=>Io,isFirefoxReality:()=>YA,isIOS:()=>mi,isIpad:()=>VA,isLandscape:()=>KA,isMobile:()=>Ce,isMobileDeviceRequestingDesktopSite:()=>yo,isMobileVR:()=>Bo,isNodeEnvironment:()=>oc,isOculusBrowser:()=>bo,isR7:()=>wo,isTablet:()=>qA,isWebXRAvailable:()=>bn});var Tr={};G.r(Tr),G.d(Tr,{clearObject:()=>Qo,createPool:()=>xo,removeUnusedKeys:()=>ui});var Rr={};G.r(Rr),G.d(Rr,{equals:()=>tn,isCoordinate:()=>hc,isCoordinates:()=>XA,parse:()=>dn,regex:()=>JA,stringify:()=>$i,toVector3:()=>cc});var Fr={};G.r(Fr),G.d(Fr,{getComponentProperty:()=>ZA,getComponentPropertyPath:()=>Bn,setComponentProperty:()=>Mo});var Or={};G.r(Or),G.d(Or,{parseUrl:()=>$r,validateCubemapSrc:()=>tl,validateEnvMapSrc:()=>Lo,validateSrc:()=>un});var Ur={};G.r(Ur),G.d(Ur,{createCompatibleTexture:()=>Do,handleTextureEvents:()=>So,isCompatibleTexture:()=>el,setTextureProperties:()=>gn,updateDistortionMap:()=>Kt,updateEnvMap:()=>to,updateMap:()=>nn,updateMapMaterialFromData:()=>wn});var We={};G.r(We),G.d(We,{parse:()=>gi,stringify:()=>pc,toCamelCase:()=>il});var _r={};G.r(_r),G.d(_r,{checkControllerPresentAndSetup:()=>Ot,emitIfAxesChanged:()=>Gt,findMatchingControllerWebXR:()=>ko,isControllerPresentWebXR:()=>nl,onButtonEvent:()=>q});var Pr={};G.r(Pr),G.d(Pr,{bind:()=>Cc,checkHeadsetConnected:()=>vc,clone:()=>Ro,coordinates:()=>Rr,debounce:()=>ol,debug:()=>et,deepEqual:()=>Fo,device:()=>kr,diff:()=>sl,entity:()=>Fr,extend:()=>Dt,extendDeep:()=>Rt,findAllScenes:()=>Al,forceCanvasResizeSafariMobile:()=>$A,getElData:()=>xc,getUrlParameter:()=>pi,isIOS:()=>yc,isIframed:()=>al,isMobile:()=>bc,material:()=>Ur,objectPool:()=>Tr,shouldCaptureKeyEvent:()=>Oo,split:()=>Ae,splitString:()=>Ic,srcLoader:()=>Or,styleParser:()=>We,throttle:()=>Bc,throttleLeadingAndTrailing:()=>rl,throttleTick:()=>wc,trackedControls:()=>_r});var Nr={};G.r(Nr),G.d(Nr,{isSingleProperty:()=>In,parseProperties:()=>dl,parseProperty:()=>xn,process:()=>Ei,processPropertyDefinition:()=>io,stringifyProperties:()=>ul,stringifyProperty:()=>Uo});var Gr={};G.r(Gr),G.d(Gr,{Component:()=>fi,components:()=>gt,registerComponent:()=>_,registrationOrderWarnings:()=>fl});var jr={};G.r(jr),G.d(jr,{System:()=>En,registerSystem:()=>Nt,systems:()=>oe});var lA={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},lo={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Ol=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],on={CSS:{},springs:{}};function re(e,t,i){return Math.min(Math.max(e,t),i)}function ai(e,t){return e.indexOf(t)>-1}function vi(e,t){return e.apply(null,t)}var Ul=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,_l=/^rgb/,Pl=/^hsl/,j={arr:function(e){return Array.isArray(e)},obj:function(e){return ai(Object.prototype.toString.call(e),"Object")},pth:function(e){return j.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||j.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return e===void 0},hex:function(e){return Ul.test(e)},rgb:function(e){return _l.test(e)},hsl:function(e){return Pl.test(e)},col:function(e){return j.hex(e)||j.rgb(e)||j.hsl(e)},key:function(e){return!lA.hasOwnProperty(e)&&!lo.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}},Nl=/\(([^)]+)\)/;function hA(e){var t=Nl.exec(e);return t?t[1].split(",").map((function(i){return parseFloat(i)})):[]}function cA(e,t){var i=hA(e),n=re(j.und(i[0])?1:i[0],.1,100),r=re(j.und(i[1])?100:i[1],.1,100),o=re(j.und(i[2])?10:i[2],.1,100),s=re(j.und(i[3])?0:i[3],.1,100),a=Math.sqrt(r/n),A=o/(2*Math.sqrt(r*n)),l=A<1?a*Math.sqrt(1-A*A):0,h=A<1?(A*a-s)/l:-s+a;function c(g){var p=t?t*g/1e3:g;return p=A<1?Math.exp(-p*A*a)*(1*Math.cos(l*p)+h*Math.sin(l*p)):(1+h*p)*Math.exp(-p*a),g===0||g===1?g:1-p}return t?c:function(){var g=on.springs[e];if(g)return g;for(var p=1/6,E=0,m=0;;)if(c(E+=p)===1){if(++m>=16)break}else m=0;var C=E*p*1e3;return on.springs[e]=C,C}}function yi(e,t){e===void 0&&(e=1),t===void 0&&(t=.5);var i=re(e,1,10),n=re(t,.1,2);return function(r){return r===0||r===1?r:-i*Math.pow(2,10*(r-1))*Math.sin((r-1-n/(2*Math.PI)*Math.asin(1/i))*(2*Math.PI)/n)}}function Gl(e){return e===void 0&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var qo=(function(){var e=.1;function t(s,a){return 1-3*a+3*s}function i(s,a){return 3*a-6*s}function n(s){return 3*s}function r(s,a,A){return((t(a,A)*s+i(a,A))*s+n(a))*s}function o(s,a,A){return 3*t(a,A)*s*s+2*i(a,A)*s+n(a)}return function(s,a,A,l){if(0<=s&&s<=1&&0<=A&&A<=1){var h=new Float32Array(11);if(s!==a||A!==l)for(var c=0;c<11;++c)h[c]=r(c*e,s,A);return function(g){return s===a&&A===l||g===0||g===1?g:r((function(p){for(var E=0,m=1;m!==10&&h[m]<=p;++m)E+=e;--m;var C=E+(p-h[m])/(h[m+1]-h[m])*e,y=o(C,s,A);return y>=.001?(function(b,B,w,I){for(var S=0;S<4;++S){var Q=o(B,w,I);if(Q===0)return B;B-=(r(B,w,I)-b)/Q}return B})(p,C,s,A):y===0?C:(function(b,B,w,I,S){var Q,D,k=0;do(Q=r(D=B+(w-B)/2,I,S)-b)>0?w=D:B=D;while(Math.abs(Q)>1e-7&&++k<10);return D})(p,E,E+e,s,A)})(g),a,l)}}}})(),dA=(function(){var e=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],t={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],yi],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(s,a){return function(A){return 1-yi(s,a)(1-A)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(s,a){return function(A){return A<.5?yi(s,a)(2*A)/2:1-yi(s,a)(-2*A+2)/2}}]},i={linear:[.25,.25,.75,.75]};for(var n in t)for(var r=0,o=t[n].length;r<o;r++)i["ease"+n+e[r]]=t[n][r];return i})();function Hr(e,t){if(j.fnc(e))return e;var i=e.split("(")[0],n=dA[i],r=hA(e);switch(i){case"spring":return cA(e,t);case"cubicBezier":return vi(qo,r);case"steps":return vi(Gl,r);default:return j.fnc(n)?vi(n,r):vi(qo,n)}}function uA(e){try{return document.querySelectorAll(e)}catch{return}}var Vo=[];function sn(e,t){for(var i=Vo,n=e.length,r=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in e){var s=e[o];t.call(r,s,o,e)&&i.push(s)}return(Vo=e).length=0,i}function yn(e,t){t||(t=[]);for(var i=0,n=e.length;i<n;i++){var r=e[i];Array.isArray(r)?yn(r,t):t.push(r)}return t}function Wo(e){return j.arr(e)?e:(j.str(e)&&(e=uA(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function ho(e,t){return e.some((function(i){return i===t}))}function co(e){var t={};for(var i in e)t[i]=e[i];return t}function zr(e,t){var i=co(e);for(var n in e)i[n]=t.hasOwnProperty(n)?t[n]:e[n];return i}function an(e,t){var i=co(e);for(var n in t)i[n]=j.und(e[n])?t[n]:e[n];return i}var jl=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g,Hl=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,zl=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ql=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,Vl=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g,Wl=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function ae(e){var t=Wl.exec(e);if(t)return t[2]}function qr(e,t){return j.fnc(e)?e(t.target,t.id,t.total):e}function Jt(e,t){return e.getAttribute(t)}function uo(e,t,i){if(ho([i,"deg","rad","turn"],ae(t)))return t;var n=on.CSS[t+i];if(!j.und(n))return n;var r=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(r),r.style.position="absolute",r.style.width=100+i;var s=100/r.offsetWidth;o.removeChild(r);var a=s*parseFloat(t);return on.CSS[t+i]=a,a}function gA(e,t,i){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(n)||"0";return i?uo(e,r,i):r}}function go(e,t){return j.dom(e)&&!j.inp(e)&&(Jt(e,t)||j.svg(e)&&e[t])?"attribute":j.dom(e)&&ho(Ol,t)?"transform":j.dom(e)&&t!=="transform"&&gA(e,t)?"css":e[t]!=null?"object":void 0}var Yl=/(\w+)\(([^)]*)\)/g;function pA(e){if(j.dom(e)){for(var t,i=e.style.transform||"",n=new Map;t=Yl.exec(i);)n.set(t[1],t[2]);return n}}function po(e,t,i,n){switch(go(e,t)){case"transform":return(function(r,o,s,a){var A=ai(o,"scale")?1:0+(function(h){return ai(h,"translate")||h==="perspective"?"px":ai(h,"rotate")||ai(h,"skew")?"deg":void 0})(o),l=pA(r).get(o)||A;return s&&(s.transforms.list.set(o,l),s.transforms.last=o),a?uo(r,l,a):l})(e,t,n,i);case"css":return gA(e,t,i);case"attribute":return Jt(e,t);default:return e[t]||0}}var Kl=/^(\*=|\+=|-=)/;function fo(e,t){var i=Kl.exec(e);if(!i)return e;var n=ae(e)||0,r=parseFloat(t),o=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return r+o+n;case"-":return r-o+n;case"*":return r*o+n}}var Jl=/\s/g;function fA(e,t){if(j.col(e))return(function(r){return j.rgb(r)?(o=r,(s=jl.exec(o))?"rgba("+s[1]+",1)":o):j.hex(r)?(function(a){var A=a.replace(Hl,(function(h,c,g,p){return c+c+g+g+p+p})),l=zl.exec(A);return"rgba("+parseInt(l[1],16)+","+parseInt(l[2],16)+","+parseInt(l[3],16)+",1)"})(r):j.hsl(r)?(function(a){var A,l,h,c=ql.exec(a)||Vl.exec(a),g=parseInt(c[1],10)/360,p=parseInt(c[2],10)/100,E=parseInt(c[3],10)/100,m=c[4]||1;function C(B,w,I){return I<0&&(I+=1),I>1&&(I-=1),I<1/6?B+6*(w-B)*I:I<.5?w:I<2/3?B+(w-B)*(2/3-I)*6:B}if(p==0)A=l=h=E;else{var y=E<.5?E*(1+p):E+p-E*p,b=2*E-y;A=C(b,y,g+1/3),l=C(b,y,g),h=C(b,y,g-1/3)}return"rgba("+255*A+","+255*l+","+255*h+","+m+")"})(r):void 0;var o,s})(e);var i=ae(e),n=i?e.substr(0,e.length-i.length):e;return t&&!Jl.test(e)?n+t:n}function Vr(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Yo(e){for(var t,i=e.points,n=0,r=0;r<i.numberOfItems;r++){var o=i.getItem(r);r>0&&(n+=Vr(t,o)),t=o}return n}function Ko(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return(function(t){return 2*Math.PI*Jt(t,"r")})(e);case"rect":return(function(t){return 2*Jt(t,"width")+2*Jt(t,"height")})(e);case"line":return(function(t){return Vr({x:Jt(t,"x1"),y:Jt(t,"y1")},{x:Jt(t,"x2"),y:Jt(t,"y2")})})(e);case"polyline":return Yo(e);case"polygon":return(function(t){var i=t.points;return Yo(t)+Vr(i.getItem(i.numberOfItems-1),i.getItem(0))})(e)}}function mA(e,t){var i=t||{},n=i.el||(function(l){for(var h=l.parentNode;j.svg(h)&&(h=h.parentNode,j.svg(h.parentNode)););return h})(e),r=n.getBoundingClientRect(),o=Jt(n,"viewBox"),s=r.width,a=r.height,A=i.viewBox||(o?o.split(" "):[0,0,s,a]);return{el:n,viewBox:A,x:A[0]/1,y:A[1]/1,w:s/A[2],h:a/A[3]}}function Xl(e,t){function i(a){a===void 0&&(a=0);var A=t+a>=1?t+a:0;return e.el.getPointAtLength(A)}var n=mA(e.el,e.svg),r=i(),o=i(-1),s=i(1);switch(e.property){case"x":return(r.x-n.x)*n.w;case"y":return(r.y-n.y)*n.h;case"angle":return 180*Math.atan2(s.y-o.y,s.x-o.x)/Math.PI}}var Ln=/-?\d*\.?\d+/g;function Jo(e,t){var i=fA(j.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(Ln)?i.match(Ln).map(Number):[0],strings:j.str(e)||t?i.split(Ln):[]}}function EA(e){return sn(e?yn(j.arr(e)?e.map(Wo):Wo(e)):[],(function(t,i,n){return n.indexOf(t)===i}))}function CA(e){var t=EA(e);return t.map((function(i,n){return{target:i,id:n,total:t.length,transforms:{list:pA(i)}}}))}var Zl=/^spring/;function $l(e,t){var i=co(t);if(Zl.test(i.easing)&&(i.duration=cA(i.easing)),j.arr(e)){var n=e.length;n!==2||j.obj(e[0])?j.fnc(t.duration)||(i.duration=t.duration/n):e={value:e}}var r=j.arr(e)?e:[e];return r.map((function(o,s){var a=j.obj(o)&&!j.pth(o)?o:{value:o};return j.und(a.delay)&&(a.delay=s?0:t.delay),j.und(a.endDelay)&&(a.endDelay=s===r.length-1?t.endDelay:0),a})).map((function(o){return an(o,i)}))}var vA={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,n,r){if(n.list.set(t,i),t===n.last||r){var o="";n.list.forEach((function(s,a){o+=a+"("+s+") "})),e.style.transform=o}}};function yA(e,t){for(var i=CA(e),n=0,r=i.length;n<r;n++){var o=i[n];for(var s in t){var a=qr(t[s],o),A=o.target,l=ae(a),h=po(A,s,l,o),c=fo(fA(a,l||ae(h)),h),g=go(A,s);vA[g](A,s,c,o.transforms,!0)}}}function th(e,t){return sn(yn(e.map((function(i){return t.map((function(n){return(function(r,o){var s=go(r.target,o.name);if(s){var a=(function(l,h){var c;return l.tweens.map((function(g){var p=(function(S,Q){var D={};for(var k in S){var F=qr(S[k],Q);j.arr(F)&&(F=F.map((function(R){return qr(R,Q)}))).length===1&&(F=F[0]),D[k]=F}return D.duration=parseFloat(D.duration),D.delay=parseFloat(D.delay),D})(g,h),E=p.value,m=j.arr(E)?E[1]:E,C=ae(m),y=po(h.target,l.name,C,h),b=c?c.to.original:y,B=j.arr(E)?E[0]:b,w=ae(B)||ae(y),I=C||w;return j.und(m)&&(m=b),p.from=Jo(B,I),p.to=Jo(fo(m,B),I),p.start=c?c.end:0,p.end=p.start+p.delay+p.duration+p.endDelay,p.easing=Hr(p.easing,p.duration),p.isPath=j.pth(E),p.isColor=j.col(p.from.original),p.isColor&&(p.round=1),c=p,p}))})(o,r),A=a[a.length-1];return{type:s,property:o.name,animatable:r,tweens:a,duration:A.end,delay:a[0].delay,endDelay:A.endDelay}}})(i,n)}))}))),(function(i){return!j.und(i)}))}function bA(e,t){var i=e.length,n=function(o){return o.timelineOffset?o.timelineOffset:0},r={};return r.duration=i?Math.max.apply(Math,e.map((function(o){return n(o)+o.duration}))):t.duration,r.delay=i?Math.min.apply(Math,e.map((function(o){return n(o)+o.delay}))):t.delay,r.endDelay=i?r.duration-Math.max.apply(Math,e.map((function(o){return n(o)+o.duration-o.endDelay}))):t.endDelay,r}var Xi,Xo=0,St=[],Sn=[],eh=(function(){function e(){Xi=requestAnimationFrame(t)}function t(i){var n=St.length;if(n){for(var r=0;r<n;){var o=St[r];if(o.paused){var s=St.indexOf(o);s>-1&&(St.splice(s,1),n=St.length)}else o.tick(i);r++}e()}else Xi=cancelAnimationFrame(Xi)}return e})();function vt(e){e===void 0&&(e={});var t,i=0,n=0,r=0,o=0,s=null;function a(){return window.Promise&&new Promise((function(y){return s=y}))}var A=a(),l=(function(y){var b=zr(lA,y),B=zr(lo,y),w=(function(k,F){var R=[],P=F.keyframes;for(var O in P&&(F=an((function(Y){for(var it=sn(yn(Y.map((function(H){return Object.keys(H)}))),(function(H){return j.key(H)})).reduce((function(H,Z){return H.indexOf(Z)<0&&H.push(Z),H}),[]),U={},N=function(H){var Z=it[H];U[Z]=Y.map((function(st){var X={};for(var nt in st)j.key(nt)?nt==Z&&(X.value=st[nt]):X[nt]=st[nt];return X}))},K=0;K<it.length;K++)N(K);return U})(P),F)),F)j.key(O)&&R.push({name:O,tweens:$l(F[O],k)});return R})(B,y),I=CA(y.targets),S=th(I,w),Q=bA(S,B),D=Xo;return Xo++,an(b,{id:D,children:[],animatables:I,animations:S,duration:Q.duration,delay:Q.delay,endDelay:Q.endDelay})})(e);function h(){l.reversed=!l.reversed;for(var y=0,b=t.length;y<b;y++)t[y].reversed=l.reversed}function c(y){return l.reversed?l.duration-y:y}function g(){i=0,n=c(l.currentTime)*(1/vt.speed)}function p(y,b){b&&b.seek(y-b.timelineOffset)}function E(y){for(var b=0,B=l.animations,w=B.length;b<w;){var I=B[b],S=I.animatable,Q=I.tweens,D=Q.length-1,k=Q[D];D&&(k=sn(Q,(function(at){return y<at.end}))[0]||k);for(var F=re(y-k.start-k.delay,0,k.duration)/k.duration,R=isNaN(F)?1:k.easing(F),P=k.to.strings,O=k.round,Y=[],it=k.to.numbers.length,U=void 0,N=0;N<it;N++){var K=void 0,H=k.to.numbers[N],Z=k.from.numbers[N]||0;K=k.isPath?Xl(k.value,R*H):Z+R*(H-Z),O&&(k.isColor&&N>2||(K=Math.round(K*O)/O)),Y.push(K)}var st=P.length;if(st){U=P[0];for(var X=0;X<st;X++){P[X];var nt=P[X+1],z=Y[X];isNaN(z)||(U+=nt?z+nt:z+" ")}}else U=Y[0];vA[I.type](S.target,I.property,U,S.transforms),I.currentValue=U,b++}}function m(y){l[y]&&!l.passThrough&&l[y](l)}function C(y){var b=l.duration,B=l.delay,w=b-l.endDelay,I=c(y);l.progress=re(I/b*100,0,100),l.reversePlayback=I<l.currentTime,t&&(function(S){if(l.reversePlayback)for(var Q=o;Q--;)p(S,t[Q]);else for(var D=0;D<o;D++)p(S,t[D])})(I),!l.began&&l.currentTime>0&&(l.began=!0,m("begin"),m("loopBegin")),I<=B&&l.currentTime!==0&&E(0),(I>=w&&l.currentTime!==b||!b)&&E(b),I>B&&I<w?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,m("changeBegin")),m("change"),E(I)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,m("changeComplete")),l.currentTime=re(I,0,b),l.began&&m("update"),y>=b&&(n=0,l.remaining&&l.remaining!==!0&&l.remaining--,l.remaining?(i=r,m("loopComplete"),m("loopBegin"),l.direction==="alternate"&&h()):(l.paused=!0,l.completed||(l.completed=!0,m("loopComplete"),m("complete"),"Promise"in window&&(s(),A=a()))))}return l.reset=function(){var y=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=y==="reverse",l.remaining=l.loop,t=l.children;for(var b=o=t.length;b--;)l.children[b].reset();(l.reversed&&l.loop!==!0||y==="alternate"&&l.loop===1)&&l.remaining++,E(0)},l.set=function(y,b){return yA(y,b),l},l.tick=function(y){r=y,i||(i=r),C((r+(n-i))*vt.speed)},l.seek=function(y){C(c(y))},l.pause=function(){l.paused=!0,g()},l.play=function(){l.paused&&(l.paused=!1,St.push(l),g(),Xi||eh())},l.reverse=function(){h(),g()},l.restart=function(){l.reset(),l.play()},l.finished=A,l.reset(),l.autoplay&&l.play(),l}function Zo(e,t){for(var i=t.length;i--;)ho(e,t[i].animatable.target)&&t.splice(i,1)}document.addEventListener("visibilitychange",(function(){if(document.hidden){for(var e=0,t=St.length;e<t;e++)activeInstance[e].pause();Sn=St.slice(0),St=[]}else for(var i=0,n=Sn.length;i<n;i++)Sn[i].play()})),vt.version="3.0.0",vt.speed=1,vt.running=St,vt.remove=function(e){for(var t=EA(e),i=St.length;i--;){var n=St[i],r=n.animations,o=n.children;Zo(t,r);for(var s=o.length;s--;){var a=o[s],A=a.animations;Zo(t,A),A.length||a.children.length||o.splice(s,1)}r.length||o.length||n.pause()}},vt.get=po,vt.set=yA,vt.convertPx=uo,vt.path=function(e,t){var i=j.str(e)?uA(e)[0]:e,n=t||100;return function(r){return{property:r,el:i,svg:mA(i),totalLength:Ko(i)*(n/100)}}},vt.setDashoffset=function(e){var t=Ko(e);return e.setAttribute("stroke-dasharray",t),t},vt.stagger=function(e,t){t===void 0&&(t={});var i=t.direction||"normal",n=t.easing?Hr(t.easing):null,r=t.grid,o=t.axis,s=t.from||0,a=s==="first",A=s==="center",l=s==="last",h=j.arr(e),c=parseFloat(h?e[0]:e),g=h?parseFloat(e[1]):0,p=ae(h?e[1]:e)||0,E=t.start||0+(h?c:0),m=[],C=0;return function(y,b,B){if(a&&(s=0),A&&(s=(B-1)/2),l&&(s=B-1),!m.length){for(var w=0;w<B;w++){if(r){var I=A?(r[0]-1)/2:s%r[0],S=A?(r[1]-1)/2:Math.floor(s/r[0]),Q=I-w%r[0],D=S-Math.floor(w/r[0]),k=Math.sqrt(Q*Q+D*D);o==="x"&&(k=-Q),o==="y"&&(k=-D),m.push(k)}else m.push(Math.abs(s-w));C=Math.max.apply(Math,m)}n&&(m=m.map((function(F){return n(F/C)*C}))),i==="reverse"&&(m=m.map((function(F){return o?F<0?-1*F:-F:Math.abs(C-F)})))}return E+(h?(g-c)/C:c)*(Math.round(100*m[b])/100)+p}},vt.timeline=function(e){e===void 0&&(e={});var t=vt(e);return t.duration=0,t.add=function(i,n){var r=St.indexOf(t),o=t.children;function s(g){g.passThrough=!0}r>-1&&St.splice(r,1);for(var a=0;a<o.length;a++)s(o[a]);var A=an(i,zr(lo,e));A.targets=A.targets||e.targets;var l=t.duration;A.autoplay=!1,A.direction=t.direction,A.timelineOffset=j.und(n)?l:fo(n,l),s(t),t.seek(A.timelineOffset);var h=vt(A);s(h),o.push(h);var c=bA(o,e);return t.delay=c.delay,t.endDelay=c.endDelay,t.duration=c.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},vt.easing=Hr,vt.penner=dA,vt.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const Zi=vt,d=Rl,Dn=new WeakMap;class BA extends d.Loader{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,i,n,r){const o=new d.FileLoader(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(s=>{this.parse(s,i,r)}),n,r)}parse(t,i,n=()=>{}){this.decodeDracoFile(t,i,null,null,d.SRGBColorSpace,n).catch(n)}decodeDracoFile(t,i,n,r,o=d.LinearSRGBColorSpace,s=()=>{}){const a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:o};return this.decodeGeometry(t,a).then(i).catch(s)}decodeGeometry(t,i){const n=JSON.stringify(i);if(Dn.has(t)){const A=Dn.get(t);if(A.key===n)return A.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const o=this.workerNextTaskID++,s=t.byteLength,a=this._getWorker(o,s).then((A=>(r=A,new Promise(((l,h)=>{r._callbacks[o]={resolve:l,reject:h},r.postMessage({type:"decode",id:o,taskConfig:i,buffer:t},[t])}))))).then((A=>this._createGeometry(A.geometry)));return a.catch((()=>!0)).then((()=>{r&&o&&this._releaseTask(r,o)})),Dn.set(t,{key:n,promise:a}),a}_createGeometry(t){const i=new d.BufferGeometry;t.index&&i.setIndex(new d.BufferAttribute(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const r=t.attributes[n],o=r.name,s=r.array,a=r.itemSize,A=new d.BufferAttribute(s,a);o==="color"&&(this._assignVertexColorSpace(A,r.vertexColorSpace),A.normalized=s instanceof Float32Array==0),i.setAttribute(o,A)}return i}_assignVertexColorSpace(t,i){if(i!==d.SRGBColorSpace)return;const n=new d.Color;for(let r=0,o=t.count;r<o;r++)n.fromBufferAttribute(t,r),d.ColorManagement.toWorkingColorSpace(n,d.SRGBColorSpace),t.setXYZ(r,n.r,n.g,n.b)}_loadLibrary(t,i){const n=new d.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(i),n.setWithCredentials(this.withCredentials),new Promise(((r,o)=>{n.load(t,r,void 0,o)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",i=[];return t?i.push(this._loadLibrary("draco_decoder.js","text")):(i.push(this._loadLibrary("draco_wasm_wrapper.js","text")),i.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(i).then((n=>{const r=n[0];t||(this.decoderConfig.wasmBinary=n[1]);const o=ih.toString(),s=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))})),this.decoderPending}_getWorker(t,i){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(o){const s=o.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort((function(r,o){return r._taskLoad>o._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=i,n._taskLoad+=i,n}))}_releaseTask(t,i){t._taskLoad-=t._taskCosts[i],delete t._callbacks[i],delete t._taskCosts[i]}debug(){console.log("Task load: ",this.workerPool.map((t=>t._taskLoad)))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function ih(){let e,t;function i(n,r,o,s,a,A){const l=A.num_components(),h=o.num_points()*l,c=h*a.BYTES_PER_ELEMENT,g=(function(m,C){switch(C){case Float32Array:return m.DT_FLOAT32;case Int8Array:return m.DT_INT8;case Int16Array:return m.DT_INT16;case Int32Array:return m.DT_INT32;case Uint8Array:return m.DT_UINT8;case Uint16Array:return m.DT_UINT16;case Uint32Array:return m.DT_UINT32}})(n,a),p=n._malloc(c);r.GetAttributeDataArrayForAllPoints(o,A,g,c,p);const E=new a(n.HEAPF32.buffer,p,h).slice();return n._free(p),{name:s,array:E,itemSize:l}}onmessage=function(n){const r=n.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(a){e.onModuleLoaded=function(A){a({draco:A})},DracoDecoderModule(e)}));break;case"decode":const o=r.buffer,s=r.taskConfig;t.then((a=>{const A=a.draco,l=new A.Decoder;try{const h=(function(g,p,E,m){const C=m.attributeIDs,y=m.attributeTypes;let b,B;const w=p.GetEncodedGeometryType(E);if(w===g.TRIANGULAR_MESH)b=new g.Mesh,B=p.DecodeArrayToMesh(E,E.byteLength,b);else{if(w!==g.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");b=new g.PointCloud,B=p.DecodeArrayToPointCloud(E,E.byteLength,b)}if(!B.ok()||b.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+B.error_msg());const I={index:null,attributes:[]};for(const S in C){const Q=self[y[S]];let D,k;if(m.useUniqueIDs)k=C[S],D=p.GetAttributeByUniqueId(b,k);else{if(k=p.GetAttributeId(b,g[C[S]]),k===-1)continue;D=p.GetAttribute(b,k)}const F=i(g,p,b,S,Q,D);S==="color"&&(F.vertexColorSpace=m.vertexColorSpace),I.attributes.push(F)}return w===g.TRIANGULAR_MESH&&(I.index=(function(S,Q,D){const k=3*D.num_faces(),F=4*k,R=S._malloc(F);Q.GetTrianglesUInt32Array(D,F,R);const P=new Uint32Array(S.HEAPF32.buffer,R,k).slice();return S._free(R),{array:P,itemSize:1}})(g,p,b)),g.destroy(b),I})(A,l,new Int8Array(o),s),c=h.attributes.map((g=>g.array.buffer));h.index&&c.push(h.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:h},c)}catch(h){console.error(h),self.postMessage({type:"error",id:r.id,error:h.message})}finally{A.destroy(l)}}))}}}function nh(e,t,i=!0){if(!t||!t.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!e.hasAttribute("position")||!e.hasAttribute("normal")||!e.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function n(s){if(s.normalized||s.isInterleavedBufferAttribute){const a=new Float32Array(s.count*s.itemSize);for(let A=0,l=0;A<s.count;A++)a[l++]=s.getX(A),a[l++]=s.getY(A),s.itemSize>2&&(a[l++]=s.getZ(A));return a}return s.array instanceof Float32Array?s.array:new Float32Array(s.array)}const r=e.index?e.toNonIndexed():e,o=t.generateTangents(n(r.attributes.position),n(r.attributes.normal),n(r.attributes.uv));if(i)for(let s=3;s<o.length;s+=4)o[s]*=-1;return r.setAttribute("tangent",new d.BufferAttribute(o,4)),e!==r&&e.copy(r),e}function rh(e,t=!1){const i=e[0].index!==null,n=new Set(Object.keys(e[0].attributes)),r=new Set(Object.keys(e[0].morphAttributes)),o={},s={},a=e[0].morphTargetsRelative,A=new d.BufferGeometry;let l=0;for(let h=0;h<e.length;++h){const c=e[h];let g=0;if(i!==(c.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const p in c.attributes){if(!n.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+p+'" attribute exists among all geometries, or in none of them.'),null;o[p]===void 0&&(o[p]=[]),o[p].push(c.attributes[p]),g++}if(g!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(a!==c.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const p in c.morphAttributes){if(!r.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;s[p]===void 0&&(s[p]=[]),s[p].push(c.morphAttributes[p])}if(t){let p;if(i)p=c.index.count;else{if(c.attributes.position===void 0)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;p=c.attributes.position.count}A.addGroup(l,p,h),l+=p}}if(i){let h=0;const c=[];for(let g=0;g<e.length;++g){const p=e[g].index;for(let E=0;E<p.count;++E)c.push(p.getX(E)+h);h+=e[g].attributes.position.count}A.setIndex(c)}for(const h in o){const c=Wr(o[h]);if(!c)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+h+" attribute."),null;A.setAttribute(h,c)}for(const h in s){const c=s[h][0].length;if(c===0)break;A.morphAttributes=A.morphAttributes||{},A.morphAttributes[h]=[];for(let g=0;g<c;++g){const p=[];for(let m=0;m<s[h].length;++m)p.push(s[h][m][g]);const E=Wr(p);if(!E)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+h+" morphAttribute."),null;A.morphAttributes[h].push(E)}}return A}function Wr(e){let t,i,n,r=-1,o=0;for(let l=0;l<e.length;++l){const h=e[l];if(t===void 0&&(t=h.array.constructor),t!==h.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(i===void 0&&(i=h.itemSize),i!==h.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=h.normalized),n!==h.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(r===-1&&(r=h.gpuType),r!==h.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;o+=h.count*i}const s=new t(o),a=new d.BufferAttribute(s,i,n);let A=0;for(let l=0;l<e.length;++l){const h=e[l];if(h.isInterleavedBufferAttribute){const c=A/i;for(let g=0,p=h.count;g<p;g++)for(let E=0;E<i;E++){const m=h.getComponent(g,E);a.setComponent(g+c,E,m)}}else s.set(h.array,A);A+=h.count*i}return r!==void 0&&(a.gpuType=r),a}function oh(e){return e.isInstancedInterleavedBufferAttribute||e.isInterleavedBufferAttribute?An(e):e.isInstancedBufferAttribute?new d.InstancedBufferAttribute().copy(e):new d.BufferAttribute().copy(e)}function sh(e){let t,i=0,n=0;for(let l=0,h=e.length;l<h;++l){const c=e[l];if(t===void 0&&(t=c.array.constructor),t!==c.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;i+=c.array.length,n+=c.itemSize}const r=new d.InterleavedBuffer(new t(i),n);let o=0;const s=[],a=["getX","getY","getZ","getW"],A=["setX","setY","setZ","setW"];for(let l=0,h=e.length;l<h;l++){const c=e[l],g=c.itemSize,p=c.count,E=new d.InterleavedBufferAttribute(r,g,o,c.normalized);s.push(E),o+=g;for(let m=0;m<p;m++)for(let C=0;C<g;C++)E[A[C]](m,c[a[C]](m))}return s}function An(e){const t=e.data.array.constructor,i=e.count,n=e.itemSize,r=e.normalized,o=new t(i*n);let s;s=e.isInstancedInterleavedBufferAttribute?new d.InstancedBufferAttribute(o,n,r,e.meshPerAttribute):new d.BufferAttribute(o,n,r);for(let a=0;a<i;a++)s.setX(a,e.getX(a)),n>=2&&s.setY(a,e.getY(a)),n>=3&&s.setZ(a,e.getZ(a)),n>=4&&s.setW(a,e.getW(a));return s}function ah(e){const t=e.attributes,i=e.morphTargets,n=new Map;for(const r in t){const o=t[r];o.isInterleavedBufferAttribute&&(n.has(o)||n.set(o,An(o)),t[r]=n.get(o))}for(const r in i){const o=i[r];o.isInterleavedBufferAttribute&&(n.has(o)||n.set(o,An(o)),i[r]=n.get(o))}}function Ah(e){let t=0;for(const n in e.attributes){const r=e.getAttribute(n);t+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}const i=e.getIndex();return t+=i?i.count*i.itemSize*i.array.BYTES_PER_ELEMENT:0,t}function lh(e,t=1e-4){t=Math.max(t,Number.EPSILON);const i={},n=e.getIndex(),r=e.getAttribute("position"),o=n?n.count:r.count;let s=0;const a=Object.keys(e.attributes),A={},l={},h=[],c=["getX","getY","getZ","getW"],g=["setX","setY","setZ","setW"];for(let b=0,B=a.length;b<B;b++){const w=a[b],I=e.attributes[w];A[w]=new I.constructor(new I.array.constructor(I.count*I.itemSize),I.itemSize,I.normalized);const S=e.morphAttributes[w];S&&(l[w]||(l[w]=[]),S.forEach(((Q,D)=>{const k=new Q.array.constructor(Q.count*Q.itemSize);l[w][D]=new Q.constructor(k,Q.itemSize,Q.normalized)})))}const p=.5*t,E=Math.log10(1/t),m=Math.pow(10,E),C=p*m;for(let b=0;b<o;b++){const B=n?n.getX(b):b;let w="";for(let I=0,S=a.length;I<S;I++){const Q=a[I],D=e.getAttribute(Q),k=D.itemSize;for(let F=0;F<k;F++)w+=~~(D[c[F]](B)*m+C)+","}if(w in i)h.push(i[w]);else{for(let I=0,S=a.length;I<S;I++){const Q=a[I],D=e.getAttribute(Q),k=e.morphAttributes[Q],F=D.itemSize,R=A[Q],P=l[Q];for(let O=0;O<F;O++){const Y=c[O],it=g[O];if(R[it](s,D[Y](B)),k)for(let U=0,N=k.length;U<N;U++)P[U][it](s,k[U][Y](B))}}i[w]=s,h.push(s),s++}}const y=e.clone();for(const b in e.attributes){const B=A[b];if(y.setAttribute(b,new B.constructor(B.array.slice(0,s*B.itemSize),B.itemSize,B.normalized)),b in l)for(let w=0;w<l[b].length;w++){const I=l[b][w];y.morphAttributes[b][w]=new I.constructor(I.array.slice(0,s*I.itemSize),I.itemSize,I.normalized)}}return y.setIndex(h),y}function Yr(e,t){if(t===d.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===d.TriangleFanDrawMode||t===d.TriangleStripDrawMode){let i=e.getIndex();if(i===null){const s=[],a=e.getAttribute("position");if(a===void 0)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let A=0;A<a.count;A++)s.push(A);e.setIndex(s),i=e.getIndex()}const n=i.count-2,r=[];if(t===d.TriangleFanDrawMode)for(let s=1;s<=n;s++)r.push(i.getX(0)),r.push(i.getX(s)),r.push(i.getX(s+1));else for(let s=0;s<n;s++)s%2==0?(r.push(i.getX(s)),r.push(i.getX(s+1)),r.push(i.getX(s+2))):(r.push(i.getX(s+2)),r.push(i.getX(s+1)),r.push(i.getX(s)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}function hh(e){const t=new d.Vector3,i=new d.Vector3,n=new d.Vector3,r=new d.Vector3,o=new d.Vector3,s=new d.Vector3,a=new d.Vector3,A=new d.Vector3,l=new d.Vector3;function h(N,K,H,Z,st,X,nt,z){t.fromBufferAttribute(K,st),i.fromBufferAttribute(K,X),n.fromBufferAttribute(K,nt);const at=N.morphTargetInfluences;if(H&&at){a.set(0,0,0),A.set(0,0,0),l.set(0,0,0);for(let mt=0,Et=H.length;mt<Et;mt++){const At=at[mt],Ut=H[mt];At!==0&&(r.fromBufferAttribute(Ut,st),o.fromBufferAttribute(Ut,X),s.fromBufferAttribute(Ut,nt),Z?(a.addScaledVector(r,At),A.addScaledVector(o,At),l.addScaledVector(s,At)):(a.addScaledVector(r.sub(t),At),A.addScaledVector(o.sub(i),At),l.addScaledVector(s.sub(n),At)))}t.add(a),i.add(A),n.add(l)}N.isSkinnedMesh&&(N.applyBoneTransform(st,t),N.applyBoneTransform(X,i),N.applyBoneTransform(nt,n)),z[3*st+0]=t.x,z[3*st+1]=t.y,z[3*st+2]=t.z,z[3*X+0]=i.x,z[3*X+1]=i.y,z[3*X+2]=i.z,z[3*nt+0]=n.x,z[3*nt+1]=n.y,z[3*nt+2]=n.z}const c=e.geometry,g=e.material;let p,E,m;const C=c.index,y=c.attributes.position,b=c.morphAttributes.position,B=c.morphTargetsRelative,w=c.attributes.normal,I=c.morphAttributes.position,S=c.groups,Q=c.drawRange;let D,k,F,R,P,O,Y;const it=new Float32Array(y.count*y.itemSize),U=new Float32Array(w.count*w.itemSize);if(C!==null)if(Array.isArray(g))for(D=0,F=S.length;D<F;D++)for(P=S[D],O=Math.max(P.start,Q.start),Y=Math.min(P.start+P.count,Q.start+Q.count),k=O,R=Y;k<R;k+=3)p=C.getX(k),E=C.getX(k+1),m=C.getX(k+2),h(e,y,b,B,p,E,m,it),h(e,w,I,B,p,E,m,U);else for(O=Math.max(0,Q.start),Y=Math.min(C.count,Q.start+Q.count),D=O,F=Y;D<F;D+=3)p=C.getX(D),E=C.getX(D+1),m=C.getX(D+2),h(e,y,b,B,p,E,m,it),h(e,w,I,B,p,E,m,U);else if(Array.isArray(g))for(D=0,F=S.length;D<F;D++)for(P=S[D],O=Math.max(P.start,Q.start),Y=Math.min(P.start+P.count,Q.start+Q.count),k=O,R=Y;k<R;k+=3)p=k,E=k+1,m=k+2,h(e,y,b,B,p,E,m,it),h(e,w,I,B,p,E,m,U);else for(O=Math.max(0,Q.start),Y=Math.min(y.count,Q.start+Q.count),D=O,F=Y;D<F;D+=3)p=D,E=D+1,m=D+2,h(e,y,b,B,p,E,m,it),h(e,w,I,B,p,E,m,U);return{positionAttribute:y,normalAttribute:w,morphedPositionAttribute:new d.Float32BufferAttribute(it,3),morphedNormalAttribute:new d.Float32BufferAttribute(U,3)}}function ch(e){if(e.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),e;let t=e.groups;if(t=t.sort(((s,a)=>s.materialIndex!==a.materialIndex?s.materialIndex-a.materialIndex:s.start-a.start)),e.getIndex()===null){const s=e.getAttribute("position"),a=[];for(let A=0;A<s.count;A+=3)a.push(A,A+1,A+2);e.setIndex(a)}const i=e.getIndex(),n=[];for(let s=0;s<t.length;s++){const a=t[s],A=a.start,l=A+a.count;for(let h=A;h<l;h++)n.push(i.getX(h))}e.dispose(),e.setIndex(n);let r=0;for(let s=0;s<t.length;s++){const a=t[s];a.start=r,r+=a.count}let o=t[0];e.groups=[o];for(let s=1;s<t.length;s++){const a=t[s];o.materialIndex===a.materialIndex?o.count+=a.count:(o=a,e.groups.push(o))}return e}function dh(e,t=Math.PI/3){const i=Math.cos(t),n=100*(1+1e-10),r=[new d.Vector3,new d.Vector3,new d.Vector3],o=new d.Vector3,s=new d.Vector3,a=new d.Vector3,A=new d.Vector3;function l(m){return`${~~(m.x*n)},${~~(m.y*n)},${~~(m.z*n)}`}const h=e.index?e.toNonIndexed():e,c=h.attributes.position,g={};for(let m=0,C=c.count/3;m<C;m++){const y=3*m,b=r[0].fromBufferAttribute(c,y+0),B=r[1].fromBufferAttribute(c,y+1),w=r[2].fromBufferAttribute(c,y+2);o.subVectors(w,B),s.subVectors(b,B);const I=new d.Vector3().crossVectors(o,s).normalize();for(let S=0;S<3;S++){const Q=l(r[S]);Q in g||(g[Q]=[]),g[Q].push(I)}}const p=new Float32Array(3*c.count),E=new d.BufferAttribute(p,3,!1);for(let m=0,C=c.count/3;m<C;m++){const y=3*m,b=r[0].fromBufferAttribute(c,y+0),B=r[1].fromBufferAttribute(c,y+1),w=r[2].fromBufferAttribute(c,y+2);o.subVectors(w,B),s.subVectors(b,B),a.crossVectors(o,s).normalize();for(let I=0;I<3;I++){const S=g[l(r[I])];A.set(0,0,0);for(let Q=0,D=S.length;Q<D;Q++){const k=S[Q];a.dot(k)>i&&A.add(k)}A.normalize(),E.setXYZ(y+I,A.x,A.y,A.z)}}return h.setAttribute("normal",E),h}class mo extends d.Loader{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(i){return new mh(i)})),this.register((function(i){return new Eh(i)})),this.register((function(i){return new Qh(i)})),this.register((function(i){return new Mh(i)})),this.register((function(i){return new Lh(i)})),this.register((function(i){return new vh(i)})),this.register((function(i){return new yh(i)})),this.register((function(i){return new bh(i)})),this.register((function(i){return new Bh(i)})),this.register((function(i){return new fh(i)})),this.register((function(i){return new wh(i)})),this.register((function(i){return new Ch(i)})),this.register((function(i){return new xh(i)})),this.register((function(i){return new Ih(i)})),this.register((function(i){return new gh(i)})),this.register((function(i){return new Sh(i)})),this.register((function(i){return new Dh(i)}))}load(t,i,n,r){const o=this;let s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){const l=d.LoaderUtils.extractUrlBase(t);s=d.LoaderUtils.resolveURL(l,this.path)}else s=d.LoaderUtils.extractUrlBase(t);this.manager.itemStart(t);const a=function(l){r?r(l):console.error(l),o.manager.itemError(t),o.manager.itemEnd(t)},A=new d.FileLoader(this.manager);A.setPath(this.path),A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(t,(function(l){try{o.parse(l,s,(function(h){i(h),o.manager.itemEnd(t)}),a)}catch(h){a(h)}}),n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,i,n,r){let o;const s={},a={},A=new TextDecoder;if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(A.decode(new Uint8Array(t,0,4))===wA){try{s[J.KHR_BINARY_GLTF]=new kh(t)}catch(h){return void(r&&r(h))}o=JSON.parse(s[J.KHR_BINARY_GLTF].content)}else o=JSON.parse(A.decode(t));else o=t;if(o.asset===void 0||o.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new Hh(o,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const c=this.pluginCallbacks[h](l);c.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[c.name]=c,s[c.name]=!0}if(o.extensionsUsed)for(let h=0;h<o.extensionsUsed.length;++h){const c=o.extensionsUsed[h],g=o.extensionsRequired||[];switch(c){case J.KHR_MATERIALS_UNLIT:s[c]=new ph;break;case J.KHR_DRACO_MESH_COMPRESSION:s[c]=new Th(o,this.dracoLoader);break;case J.KHR_TEXTURE_TRANSFORM:s[c]=new Rh;break;case J.KHR_MESH_QUANTIZATION:s[c]=new Fh;break;default:g.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(s),l.setPlugins(a),l.parse(n,r)}parseAsync(t,i){const n=this;return new Promise((function(r,o){n.parse(t,i,r,o)}))}}function uh(){let e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const J={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class gh{constructor(t){this.parser=t,this.name=J.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,i=this.parser.json.nodes||[];for(let n=0,r=i.length;n<r;n++){const o=i[n];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){const i=this.parser,n="light:"+t;let r=i.cache.get(n);if(r)return r;const o=i.json,s=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let a;const A=new d.Color(16777215);s.color!==void 0&&A.setRGB(s.color[0],s.color[1],s.color[2],d.LinearSRGBColorSpace);const l=s.range!==void 0?s.range:0;switch(s.type){case"directional":a=new d.DirectionalLight(A),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new d.PointLight(A),a.distance=l;break;case"spot":a=new d.SpotLight(A),a.distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=s.spot.innerConeAngle!==void 0?s.spot.innerConeAngle:0,s.spot.outerConeAngle=s.spot.outerConeAngle!==void 0?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return a.position.set(0,0,0),ne(a,s),s.intensity!==void 0&&(a.intensity=s.intensity),a.name=i.createUniqueName(s.name||"light_"+t),r=Promise.resolve(a),i.cache.add(n,r),r}getDependency(t,i){if(t==="light")return this._loadLight(i)}createNodeAttachment(t){const i=this,n=this.parser,r=n.json.nodes[t],o=(r.extensions&&r.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then((function(s){return n._getNodeRef(i.cache,o,s)}))}}class ph{constructor(){this.name=J.KHR_MATERIALS_UNLIT}getMaterialType(){return d.MeshBasicMaterial}extendParams(t,i,n){const r=[];t.color=new d.Color(1,1,1),t.opacity=1;const o=i.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const s=o.baseColorFactor;t.color.setRGB(s[0],s[1],s[2],d.LinearSRGBColorSpace),t.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(n.assignTexture(t,"map",o.baseColorTexture,d.SRGBColorSpace))}return Promise.all(r)}}class fh{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,i){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return r!==void 0&&(i.emissiveIntensity=r),Promise.resolve()}}class mh{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?d.MeshPhysicalMaterial:null}extendMaterialParams(t,i){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(i.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(n.assignTexture(i,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(i.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(n.assignTexture(i,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(n.assignTexture(i,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const a=s.clearcoatNormalTexture.scale;i.clearcoatNormalScale=new d.Vector2(a,a)}return Promise.all(o)}}class Eh{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_DISPERSION}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?d.MeshPhysicalMaterial:null}extendMaterialParams(t,i){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return i.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class Ch{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?d.MeshPhysicalMaterial:null}extendMaterialParams(t,i){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(i.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(n.assignTexture(i,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(i.iridescenceIOR=s.iridescenceIor),i.iridescenceThicknessRange===void 0&&(i.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(i.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(i.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(n.assignTexture(i,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}}class vh{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_SHEEN}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?d.MeshPhysicalMaterial:null}extendMaterialParams(t,i){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[];i.sheenColor=new d.Color(0,0,0),i.sheenRoughness=0,i.sheen=1;const s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){const a=s.sheenColorFactor;i.sheenColor.setRGB(a[0],a[1],a[2],d.LinearSRGBColorSpace)}return s.sheenRoughnessFactor!==void 0&&(i.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(n.assignTexture(i,"sheenColorMap",s.sheenColorTexture,d.SRGBColorSpace)),s.sheenRoughnessTexture!==void 0&&o.push(n.assignTexture(i,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}}class yh{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?d.MeshPhysicalMaterial:null}extendMaterialParams(t,i){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(i.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(n.assignTexture(i,"transmissionMap",s.transmissionTexture)),Promise.all(o)}}class bh{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_VOLUME}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?d.MeshPhysicalMaterial:null}extendMaterialParams(t,i){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];i.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(n.assignTexture(i,"thicknessMap",s.thicknessTexture)),i.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return i.attenuationColor=new d.Color().setRGB(a[0],a[1],a[2],d.LinearSRGBColorSpace),Promise.all(o)}}class Bh{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_IOR}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?d.MeshPhysicalMaterial:null}extendMaterialParams(t,i){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return i.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class wh{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_SPECULAR}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?d.MeshPhysicalMaterial:null}extendMaterialParams(t,i){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];i.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(n.assignTexture(i,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return i.specularColor=new d.Color().setRGB(a[0],a[1],a[2],d.LinearSRGBColorSpace),s.specularColorTexture!==void 0&&o.push(n.assignTexture(i,"specularColorMap",s.specularColorTexture,d.SRGBColorSpace)),Promise.all(o)}}class Ih{constructor(t){this.parser=t,this.name=J.EXT_MATERIALS_BUMP}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?d.MeshPhysicalMaterial:null}extendMaterialParams(t,i){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return i.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(n.assignTexture(i,"bumpMap",s.bumpTexture)),Promise.all(o)}}class xh{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?d.MeshPhysicalMaterial:null}extendMaterialParams(t,i){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(i.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(i.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(n.assignTexture(i,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}}class Qh{constructor(t){this.parser=t,this.name=J.KHR_TEXTURE_BASISU}loadTexture(t){const i=this.parser,n=i.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],s=i.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return i.loadTextureImage(t,o.source,s)}}class Mh{constructor(t){this.parser=t,this.name=J.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const i=this.name,n=this.parser,r=n.json,o=r.textures[t];if(!o.extensions||!o.extensions[i])return null;const s=o.extensions[i],a=r.images[s.source];let A=n.textureLoader;if(a.uri){const l=n.options.manager.getHandler(a.uri);l!==null&&(A=l)}return this.detectSupport().then((function(l){if(l)return n.loadTextureImage(t,s.source,A);if(r.extensionsRequired&&r.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const i=new Image;i.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",i.onload=i.onerror=function(){t(i.height===1)}}))),this.isSupported}}class Lh{constructor(t){this.parser=t,this.name=J.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const i=this.name,n=this.parser,r=n.json,o=r.textures[t];if(!o.extensions||!o.extensions[i])return null;const s=o.extensions[i],a=r.images[s.source];let A=n.textureLoader;if(a.uri){const l=n.options.manager.getHandler(a.uri);l!==null&&(A=l)}return this.detectSupport().then((function(l){if(l)return n.loadTextureImage(t,s.source,A);if(r.extensionsRequired&&r.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const i=new Image;i.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",i.onload=i.onerror=function(){t(i.height===1)}}))),this.isSupported}}class Sh{constructor(t){this.name=J.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const i=this.parser.json,n=i.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then((function(a){const A=r.byteOffset||0,l=r.byteLength||0,h=r.count,c=r.byteStride,g=new Uint8Array(a,A,l);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(h,c,g,r.mode,r.filter).then((function(p){return p.buffer})):s.ready.then((function(){const p=new ArrayBuffer(h*c);return s.decodeGltfBuffer(new Uint8Array(p),h,c,g,r.mode,r.filter),p}))}))}return null}}class Dh{constructor(t){this.name=J.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const i=this.parser.json,n=i.nodes[t];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=i.meshes[n.mesh];for(const A of r.primitives)if(A.mode!==Pt.TRIANGLES&&A.mode!==Pt.TRIANGLE_STRIP&&A.mode!==Pt.TRIANGLE_FAN&&A.mode!==void 0)return null;const o=n.extensions[this.name].attributes,s=[],a={};for(const A in o)s.push(this.parser.getDependency("accessor",o[A]).then((l=>(a[A]=l,a[A]))));return s.length<1?null:(s.push(this.parser.createNodeMesh(t)),Promise.all(s).then((A=>{const l=A.pop(),h=l.isGroup?l.children:[l],c=A[0].count,g=[];for(const p of h){const E=new d.Matrix4,m=new d.Vector3,C=new d.Quaternion,y=new d.Vector3(1,1,1),b=new d.InstancedMesh(p.geometry,p.material,c);for(let B=0;B<c;B++)a.TRANSLATION&&m.fromBufferAttribute(a.TRANSLATION,B),a.ROTATION&&C.fromBufferAttribute(a.ROTATION,B),a.SCALE&&y.fromBufferAttribute(a.SCALE,B),b.setMatrixAt(B,E.compose(m,C,y));for(const B in a)if(B==="_COLOR_0"){const w=a[B];b.instanceColor=new d.InstancedBufferAttribute(w.array,w.itemSize,w.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&p.geometry.setAttribute(B,a[B]);d.Object3D.prototype.copy.call(b,p),this.parser.assignFinalMaterial(b),g.push(b)}return l.isGroup?(l.clear(),l.add(...g),l):g[0]})))}}const wA="glTF";class kh{constructor(t){this.name=J.KHR_BINARY_GLTF,this.content=null,this.body=null;const i=new DataView(t,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(t.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==wA)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,o=new DataView(t,12);let s=0;for(;s<r;){const a=o.getUint32(s,!0);s+=4;const A=o.getUint32(s,!0);if(s+=4,A===1313821514){const l=new Uint8Array(t,12+s,a);this.content=n.decode(l)}else if(A===5130562){const l=12+s;this.body=t.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Th{constructor(t,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=J.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=i,this.dracoLoader.preload()}decodePrimitive(t,i){const n=this.json,r=this.dracoLoader,o=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},A={},l={};for(const h in s){const c=Kr[h]||h.toLowerCase();a[c]=s[h]}for(const h in t.attributes){const c=Kr[h]||h.toLowerCase();if(s[h]!==void 0){const g=n.accessors[t.attributes[h]],p=Ve[g.componentType];l[c]=p.name,A[c]=g.normalized===!0}}return i.getDependency("bufferView",o).then((function(h){return new Promise((function(c,g){r.decodeDracoFile(h,(function(p){for(const E in p.attributes){const m=p.attributes[E],C=A[E];C!==void 0&&(m.normalized=C)}c(p)}),a,l,d.LinearSRGBColorSpace,g)}))}))}}class Rh{constructor(){this.name=J.KHR_TEXTURE_TRANSFORM}extendTexture(t,i){return(i.texCoord!==void 0&&i.texCoord!==t.channel||i.offset!==void 0||i.rotation!==void 0||i.scale!==void 0)&&(t=t.clone(),i.texCoord!==void 0&&(t.channel=i.texCoord),i.offset!==void 0&&t.offset.fromArray(i.offset),i.rotation!==void 0&&(t.rotation=i.rotation),i.scale!==void 0&&t.repeat.fromArray(i.scale),t.needsUpdate=!0),t}}class Fh{constructor(){this.name=J.KHR_MESH_QUANTIZATION}}class IA extends d.Interpolant{constructor(t,i,n,r){super(t,i,n,r)}copySampleValue_(t){const i=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=t*r*3+r;for(let s=0;s!==r;s++)i[s]=n[o+s];return i}interpolate_(t,i,n,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,A=2*a,l=3*a,h=r-i,c=(n-i)/h,g=c*c,p=g*c,E=t*l,m=E-l,C=-2*p+3*g,y=p-g,b=1-C,B=y-g+c;for(let w=0;w!==a;w++){const I=s[m+w+a],S=s[m+w+A]*h,Q=s[E+w+a],D=s[E+w]*h;o[w]=b*I+B*S+C*Q+y*D}return o}}const Oh=new d.Quaternion;class Uh extends IA{interpolate_(t,i,n,r){const o=super.interpolate_(t,i,n,r);return Oh.fromArray(o).normalize().toArray(o),o}}const Pt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Ve={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},$o={9728:d.NearestFilter,9729:d.LinearFilter,9984:d.NearestMipmapNearestFilter,9985:d.LinearMipmapNearestFilter,9986:d.NearestMipmapLinearFilter,9987:d.LinearMipmapLinearFilter},ts={33071:d.ClampToEdgeWrapping,33648:d.MirroredRepeatWrapping,10497:d.RepeatWrapping},kn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Kr={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ce={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},_h={CUBICSPLINE:void 0,LINEAR:d.InterpolateLinear,STEP:d.InterpolateDiscrete};function Ph(e){return e.DefaultMaterial===void 0&&(e.DefaultMaterial=new d.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:d.FrontSide})),e.DefaultMaterial}function Be(e,t,i){for(const n in i.extensions)e[n]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=i.extensions[n])}function ne(e,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Nh(e,t){if(e.updateMorphTargets(),t.weights!==void 0)for(let i=0,n=t.weights.length;i<n;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){const i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(let n=0,r=i.length;n<r;n++)e.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Gh(e){let t;const i=e.extensions&&e.extensions[J.KHR_DRACO_MESH_COMPRESSION];if(t=i?"draco:"+i.bufferView+":"+i.indices+":"+Tn(i.attributes):e.indices+":"+Tn(e.attributes)+":"+e.mode,e.targets!==void 0)for(let n=0,r=e.targets.length;n<r;n++)t+=":"+Tn(e.targets[n]);return t}function Tn(e){let t="";const i=Object.keys(e).sort();for(let n=0,r=i.length;n<r;n++)t+=i[n]+":"+e[i[n]]+";";return t}function Jr(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const jh=new d.Matrix4;class Hh{constructor(t={},i={}){this.json=t,this.extensions={},this.plugins={},this.options=i,this.cache=new uh,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){const a=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(a)===!0;const A=a.match(/Version\/(\d+)/);r=n&&A?parseInt(A[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&r<17||o&&s<98?this.textureLoader=new d.TextureLoader(this.options.manager):this.textureLoader=new d.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new d.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,i){const n=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(s){return s._markDefs&&s._markDefs()})),Promise.all(this._invokeAll((function(s){return s.beforeRoot&&s.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(s){const a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:n,userData:{}};return Be(o,a,r),ne(a,r),Promise.all(n._invokeAll((function(A){return A.afterRoot&&A.afterRoot(a)}))).then((function(){for(const A of a.scenes)A.updateMatrixWorld();t(a)}))})).catch(i)}_markDefs(){const t=this.json.nodes||[],i=this.json.skins||[],n=this.json.meshes||[];for(let r=0,o=i.length;r<o;r++){const s=i[r].joints;for(let a=0,A=s.length;a<A;a++)t[s[a]].isBone=!0}for(let r=0,o=t.length;r<o;r++){const s=t[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(n[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(t,i){i!==void 0&&(t.refs[i]===void 0&&(t.refs[i]=t.uses[i]=0),t.refs[i]++)}_getNodeRef(t,i,n){if(t.refs[i]<=1)return n;const r=n.clone(),o=(s,a)=>{const A=this.associations.get(s);A!=null&&this.associations.set(a,A);for(const[l,h]of s.children.entries())o(h,a.children[l])};return o(n,r),r.name+="_instance_"+t.uses[i]++,r}_invokeOne(t){const i=Object.values(this.plugins);i.push(this);for(let n=0;n<i.length;n++){const r=t(i[n]);if(r)return r}return null}_invokeAll(t){const i=Object.values(this.plugins);i.unshift(this);const n=[];for(let r=0;r<i.length;r++){const o=t(i[r]);o&&n.push(o)}return n}getDependency(t,i){const n=t+":"+i;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(i);break;case"node":r=this._invokeOne((function(o){return o.loadNode&&o.loadNode(i)}));break;case"mesh":r=this._invokeOne((function(o){return o.loadMesh&&o.loadMesh(i)}));break;case"accessor":r=this.loadAccessor(i);break;case"bufferView":r=this._invokeOne((function(o){return o.loadBufferView&&o.loadBufferView(i)}));break;case"buffer":r=this.loadBuffer(i);break;case"material":r=this._invokeOne((function(o){return o.loadMaterial&&o.loadMaterial(i)}));break;case"texture":r=this._invokeOne((function(o){return o.loadTexture&&o.loadTexture(i)}));break;case"skin":r=this.loadSkin(i);break;case"animation":r=this._invokeOne((function(o){return o.loadAnimation&&o.loadAnimation(i)}));break;case"camera":r=this.loadCamera(i);break;default:if(r=this._invokeOne((function(o){return o!=this&&o.getDependency&&o.getDependency(t,i)})),!r)throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let i=this.cache.get(t);if(!i){const n=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];i=Promise.all(r.map((function(o,s){return n.getDependency(t,s)}))),this.cache.add(t,i)}return i}loadBuffer(t){const i=this.json.buffers[t],n=this.fileLoader;if(i.type&&i.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(i.uri===void 0&&t===0)return Promise.resolve(this.extensions[J.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(o,s){n.load(d.LoaderUtils.resolveURL(i.uri,r.path),o,void 0,(function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))}))}))}loadBufferView(t){const i=this.json.bufferViews[t];return this.getDependency("buffer",i.buffer).then((function(n){const r=i.byteLength||0,o=i.byteOffset||0;return n.slice(o,o+r)}))}loadAccessor(t){const i=this,n=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){const s=kn[r.type],a=Ve[r.componentType],A=r.normalized===!0,l=new a(r.count*s);return Promise.resolve(new d.BufferAttribute(l,s,A))}const o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then((function(s){const a=s[0],A=kn[r.type],l=Ve[r.componentType],h=l.BYTES_PER_ELEMENT,c=h*A,g=r.byteOffset||0,p=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,E=r.normalized===!0;let m,C;if(p&&p!==c){const y=Math.floor(g/p),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+y+":"+r.count;let B=i.cache.get(b);B||(m=new l(a,y*p,r.count*p/h),B=new d.InterleavedBuffer(m,p/h),i.cache.add(b,B)),C=new d.InterleavedBufferAttribute(B,A,g%p/h,E)}else m=a===null?new l(r.count*A):new l(a,g,r.count*A),C=new d.BufferAttribute(m,A,E);if(r.sparse!==void 0){const y=kn.SCALAR,b=Ve[r.sparse.indices.componentType],B=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,I=new b(s[1],B,r.sparse.count*y),S=new l(s[2],w,r.sparse.count*A);a!==null&&(C=new d.BufferAttribute(C.array.slice(),C.itemSize,C.normalized)),C.normalized=!1;for(let Q=0,D=I.length;Q<D;Q++){const k=I[Q];if(C.setX(k,S[Q*A]),A>=2&&C.setY(k,S[Q*A+1]),A>=3&&C.setZ(k,S[Q*A+2]),A>=4&&C.setW(k,S[Q*A+3]),A>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}C.normalized=E}return C}))}loadTexture(t){const i=this.json,n=this.options,r=i.textures[t].source,o=i.images[r];let s=this.textureLoader;if(o.uri){const a=n.manager.getHandler(o.uri);a!==null&&(s=a)}return this.loadTextureImage(t,r,s)}loadTextureImage(t,i,n){const r=this,o=this.json,s=o.textures[t],a=o.images[i],A=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[A])return this.textureCache[A];const l=this.loadImageSource(i,n).then((function(h){h.flipY=!1,h.name=s.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const c=(o.samplers||{})[s.sampler]||{};return h.magFilter=$o[c.magFilter]||d.LinearFilter,h.minFilter=$o[c.minFilter]||d.LinearMipmapLinearFilter,h.wrapS=ts[c.wrapS]||d.RepeatWrapping,h.wrapT=ts[c.wrapT]||d.RepeatWrapping,h.generateMipmaps=!h.isCompressedTexture&&h.minFilter!==d.NearestFilter&&h.minFilter!==d.LinearFilter,r.associations.set(h,{textures:t}),h})).catch((function(){return null}));return this.textureCache[A]=l,l}loadImageSource(t,i){const n=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then((h=>h.clone()));const o=n.images[t],s=self.URL||self.webkitURL;let a=o.uri||"",A=!1;if(o.bufferView!==void 0)a=this.getDependency("bufferView",o.bufferView).then((function(h){A=!0;const c=new Blob([h],{type:o.mimeType});return a=s.createObjectURL(c),a}));else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const l=Promise.resolve(a).then((function(h){return new Promise((function(c,g){let p=c;i.isImageBitmapLoader===!0&&(p=function(E){const m=new d.Texture(E);m.needsUpdate=!0,c(m)}),i.load(d.LoaderUtils.resolveURL(h,r.path),p,void 0,g)}))})).then((function(h){var c;return A===!0&&s.revokeObjectURL(a),ne(h,o),h.userData.mimeType=o.mimeType||((c=o.uri).search(/\.jpe?g($|\?)/i)>0||c.search(/^data\:image\/jpeg/)===0?"image/jpeg":c.search(/\.webp($|\?)/i)>0||c.search(/^data\:image\/webp/)===0?"image/webp":c.search(/\.ktx2($|\?)/i)>0||c.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"),h})).catch((function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),h}));return this.sourceCache[t]=l,l}assignTexture(t,i,n,r){const o=this;return this.getDependency("texture",n.index).then((function(s){if(!s)return null;if(n.texCoord!==void 0&&n.texCoord>0&&((s=s.clone()).channel=n.texCoord),o.extensions[J.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[J.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const A=o.associations.get(s);s=o.extensions[J.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,A)}}return r!==void 0&&(s.colorSpace=r),t[i]=s,s}))}assignFinalMaterial(t){const i=t.geometry;let n=t.material;const r=i.attributes.tangent===void 0,o=i.attributes.color!==void 0,s=i.attributes.normal===void 0;if(t.isPoints){const a="PointsMaterial:"+n.uuid;let A=this.cache.get(a);A||(A=new d.PointsMaterial,d.Material.prototype.copy.call(A,n),A.color.copy(n.color),A.map=n.map,A.sizeAttenuation=!1,this.cache.add(a,A)),n=A}else if(t.isLine){const a="LineBasicMaterial:"+n.uuid;let A=this.cache.get(a);A||(A=new d.LineBasicMaterial,d.Material.prototype.copy.call(A,n),A.color.copy(n.color),A.map=n.map,this.cache.add(a,A)),n=A}if(r||o||s){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let A=this.cache.get(a);A||(A=n.clone(),o&&(A.vertexColors=!0),s&&(A.flatShading=!0),r&&(A.normalScale&&(A.normalScale.y*=-1),A.clearcoatNormalScale&&(A.clearcoatNormalScale.y*=-1)),this.cache.add(a,A),this.associations.set(A,this.associations.get(n))),n=A}t.material=n}getMaterialType(){return d.MeshStandardMaterial}loadMaterial(t){const i=this,n=this.json,r=this.extensions,o=n.materials[t];let s;const a={},A=[];if((o.extensions||{})[J.KHR_MATERIALS_UNLIT]){const h=r[J.KHR_MATERIALS_UNLIT];s=h.getMaterialType(),A.push(h.extendParams(a,o,i))}else{const h=o.pbrMetallicRoughness||{};if(a.color=new d.Color(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const c=h.baseColorFactor;a.color.setRGB(c[0],c[1],c[2],d.LinearSRGBColorSpace),a.opacity=c[3]}h.baseColorTexture!==void 0&&A.push(i.assignTexture(a,"map",h.baseColorTexture,d.SRGBColorSpace)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(A.push(i.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),A.push(i.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),s=this._invokeOne((function(c){return c.getMaterialType&&c.getMaterialType(t)})),A.push(Promise.all(this._invokeAll((function(c){return c.extendMaterialParams&&c.extendMaterialParams(t,a)}))))}o.doubleSided===!0&&(a.side=d.DoubleSide);const l=o.alphaMode||"OPAQUE";if(l==="BLEND"?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l==="MASK"&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==d.MeshBasicMaterial&&(A.push(i.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new d.Vector2(1,1),o.normalTexture.scale!==void 0)){const h=o.normalTexture.scale;a.normalScale.set(h,h)}if(o.occlusionTexture!==void 0&&s!==d.MeshBasicMaterial&&(A.push(i.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==d.MeshBasicMaterial){const h=o.emissiveFactor;a.emissive=new d.Color().setRGB(h[0],h[1],h[2],d.LinearSRGBColorSpace)}return o.emissiveTexture!==void 0&&s!==d.MeshBasicMaterial&&A.push(i.assignTexture(a,"emissiveMap",o.emissiveTexture,d.SRGBColorSpace)),Promise.all(A).then((function(){const h=new s(a);return o.name&&(h.name=o.name),ne(h,o),i.associations.set(h,{materials:t}),o.extensions&&Be(r,h,o),h}))}createUniqueName(t){const i=d.PropertyBinding.sanitizeNodeName(t||"");return i in this.nodeNamesUsed?i+"_"+ ++this.nodeNamesUsed[i]:(this.nodeNamesUsed[i]=0,i)}loadGeometries(t){const i=this,n=this.extensions,r=this.primitiveCache;function o(a){return n[J.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,i).then((function(A){return es(A,a,i)}))}const s=[];for(let a=0,A=t.length;a<A;a++){const l=t[a],h=Gh(l),c=r[h];if(c)s.push(c.promise);else{let g;g=l.extensions&&l.extensions[J.KHR_DRACO_MESH_COMPRESSION]?o(l):es(new d.BufferGeometry,l,i),r[h]={primitive:l,promise:g},s.push(g)}}return Promise.all(s)}loadMesh(t){const i=this,n=this.json,r=this.extensions,o=n.meshes[t],s=o.primitives,a=[];for(let A=0,l=s.length;A<l;A++){const h=s[A].material===void 0?Ph(this.cache):this.getDependency("material",s[A].material);a.push(h)}return a.push(i.loadGeometries(s)),Promise.all(a).then((function(A){const l=A.slice(0,A.length-1),h=A[A.length-1],c=[];for(let p=0,E=h.length;p<E;p++){const m=h[p],C=s[p];let y;const b=l[p];if(C.mode===Pt.TRIANGLES||C.mode===Pt.TRIANGLE_STRIP||C.mode===Pt.TRIANGLE_FAN||C.mode===void 0)y=o.isSkinnedMesh===!0?new d.SkinnedMesh(m,b):new d.Mesh(m,b),y.isSkinnedMesh===!0&&y.normalizeSkinWeights(),C.mode===Pt.TRIANGLE_STRIP?y.geometry=Yr(y.geometry,d.TriangleStripDrawMode):C.mode===Pt.TRIANGLE_FAN&&(y.geometry=Yr(y.geometry,d.TriangleFanDrawMode));else if(C.mode===Pt.LINES)y=new d.LineSegments(m,b);else if(C.mode===Pt.LINE_STRIP)y=new d.Line(m,b);else if(C.mode===Pt.LINE_LOOP)y=new d.LineLoop(m,b);else{if(C.mode!==Pt.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+C.mode);y=new d.Points(m,b)}Object.keys(y.geometry.morphAttributes).length>0&&Nh(y,o),y.name=i.createUniqueName(o.name||"mesh_"+t),ne(y,o),C.extensions&&Be(r,y,C),i.assignFinalMaterial(y),c.push(y)}for(let p=0,E=c.length;p<E;p++)i.associations.set(c[p],{meshes:t,primitives:p});if(c.length===1)return o.extensions&&Be(r,c[0],o),c[0];const g=new d.Group;o.extensions&&Be(r,g,o),i.associations.set(g,{meshes:t});for(let p=0,E=c.length;p<E;p++)g.add(c[p]);return g}))}loadCamera(t){let i;const n=this.json.cameras[t],r=n[n.type];if(r)return n.type==="perspective"?i=new d.PerspectiveCamera(d.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(i=new d.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(i.name=this.createUniqueName(n.name)),ne(i,n),Promise.resolve(i);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const i=this.json.skins[t],n=[];for(let r=0,o=i.joints.length;r<o;r++)n.push(this._loadNodeShallow(i.joints[r]));return i.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",i.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(r){const o=r.pop(),s=r,a=[],A=[];for(let l=0,h=s.length;l<h;l++){const c=s[l];if(c){a.push(c);const g=new d.Matrix4;o!==null&&g.fromArray(o.array,16*l),A.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',i.joints[l])}return new d.Skeleton(a,A)}))}loadAnimation(t){const i=this.json,n=this,r=i.animations[t],o=r.name?r.name:"animation_"+t,s=[],a=[],A=[],l=[],h=[];for(let c=0,g=r.channels.length;c<g;c++){const p=r.channels[c],E=r.samplers[p.sampler],m=p.target,C=m.node,y=r.parameters!==void 0?r.parameters[E.input]:E.input,b=r.parameters!==void 0?r.parameters[E.output]:E.output;m.node!==void 0&&(s.push(this.getDependency("node",C)),a.push(this.getDependency("accessor",y)),A.push(this.getDependency("accessor",b)),l.push(E),h.push(m))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(A),Promise.all(l),Promise.all(h)]).then((function(c){const g=c[0],p=c[1],E=c[2],m=c[3],C=c[4],y=[];for(let b=0,B=g.length;b<B;b++){const w=g[b],I=p[b],S=E[b],Q=m[b],D=C[b];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const k=n._createAnimationTracks(w,I,S,Q,D);if(k)for(let F=0;F<k.length;F++)y.push(k[F])}return new d.AnimationClip(o,void 0,y)}))}createNodeMesh(t){const i=this.json,n=this,r=i.nodes[t];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then((function(o){const s=n._getNodeRef(n.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse((function(a){if(a.isMesh)for(let A=0,l=r.weights.length;A<l;A++)a.morphTargetInfluences[A]=r.weights[A]})),s}))}loadNode(t){const i=this,n=this.json.nodes[t],r=i._loadNodeShallow(t),o=[],s=n.children||[];for(let A=0,l=s.length;A<l;A++)o.push(i.getDependency("node",s[A]));const a=n.skin===void 0?Promise.resolve(null):i.getDependency("skin",n.skin);return Promise.all([r,Promise.all(o),a]).then((function(A){const l=A[0],h=A[1],c=A[2];c!==null&&l.traverse((function(g){g.isSkinnedMesh&&g.bind(c,jh)}));for(let g=0,p=h.length;g<p;g++)l.add(h[g]);return l}))}_loadNodeShallow(t){const i=this.json,n=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const o=i.nodes[t],s=o.name?r.createUniqueName(o.name):"",a=[],A=r._invokeOne((function(l){return l.createNodeMesh&&l.createNodeMesh(t)}));return A&&a.push(A),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then((function(l){return r._getNodeRef(r.cameraCache,o.camera,l)}))),r._invokeAll((function(l){return l.createNodeAttachment&&l.createNodeAttachment(t)})).forEach((function(l){a.push(l)})),this.nodeCache[t]=Promise.all(a).then((function(l){let h;if(h=o.isBone===!0?new d.Bone:l.length>1?new d.Group:l.length===1?l[0]:new d.Object3D,h!==l[0])for(let c=0,g=l.length;c<g;c++)h.add(l[c]);if(o.name&&(h.userData.name=o.name,h.name=s),ne(h,o),o.extensions&&Be(n,h,o),o.matrix!==void 0){const c=new d.Matrix4;c.fromArray(o.matrix),h.applyMatrix4(c)}else o.translation!==void 0&&h.position.fromArray(o.translation),o.rotation!==void 0&&h.quaternion.fromArray(o.rotation),o.scale!==void 0&&h.scale.fromArray(o.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=t,h})),this.nodeCache[t]}loadScene(t){const i=this.extensions,n=this.json.scenes[t],r=this,o=new d.Group;n.name&&(o.name=r.createUniqueName(n.name)),ne(o,n),n.extensions&&Be(i,o,n);const s=n.nodes||[],a=[];for(let A=0,l=s.length;A<l;A++)a.push(r.getDependency("node",s[A]));return Promise.all(a).then((function(A){for(let l=0,h=A.length;l<h;l++)o.add(A[l]);return r.associations=(l=>{const h=new Map;for(const[c,g]of r.associations)(c instanceof d.Material||c instanceof d.Texture)&&h.set(c,g);return l.traverse((c=>{const g=r.associations.get(c);g!=null&&h.set(c,g)})),h})(o),o}))}_createAnimationTracks(t,i,n,r,o){const s=[],a=t.name?t.name:t.uuid,A=[];let l;switch(ce[o.path]===ce.weights?t.traverse((function(g){g.morphTargetInfluences&&A.push(g.name?g.name:g.uuid)})):A.push(a),ce[o.path]){case ce.weights:l=d.NumberKeyframeTrack;break;case ce.rotation:l=d.QuaternionKeyframeTrack;break;case ce.position:case ce.scale:l=d.VectorKeyframeTrack;break;default:l=n.itemSize===1?d.NumberKeyframeTrack:d.VectorKeyframeTrack}const h=r.interpolation!==void 0?_h[r.interpolation]:d.InterpolateLinear,c=this._getArrayFromAccessor(n);for(let g=0,p=A.length;g<p;g++){const E=new l(A[g]+"."+ce[o.path],i.array,c,h);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(E),s.push(E)}return s}_getArrayFromAccessor(t){let i=t.array;if(t.normalized){const n=Jr(i.constructor),r=new Float32Array(i.length);for(let o=0,s=i.length;o<s;o++)r[o]=i[o]*n;i=r}return i}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(i){return new(this instanceof d.QuaternionKeyframeTrack?Uh:IA)(this.times,this.values,this.getValueSize()/3,i)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function es(e,t,i){const n=t.attributes,r=[];function o(s,a){return i.getDependency("accessor",s).then((function(A){e.setAttribute(a,A)}))}for(const s in n){const a=Kr[s]||s.toLowerCase();a in e.attributes||r.push(o(n[s],a))}if(t.indices!==void 0&&!e.index){const s=i.getDependency("accessor",t.indices).then((function(a){e.setIndex(a)}));r.push(s)}return d.ColorManagement.workingColorSpace!==d.LinearSRGBColorSpace&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${d.ColorManagement.workingColorSpace}" not supported.`),ne(e,t),(function(s,a,A){const l=a.attributes,h=new d.Box3;if(l.POSITION===void 0)return;{const p=A.json.accessors[l.POSITION],E=p.min,m=p.max;if(E===void 0||m===void 0)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(h.set(new d.Vector3(E[0],E[1],E[2]),new d.Vector3(m[0],m[1],m[2])),p.normalized){const C=Jr(Ve[p.componentType]);h.min.multiplyScalar(C),h.max.multiplyScalar(C)}}const c=a.targets;if(c!==void 0){const p=new d.Vector3,E=new d.Vector3;for(let m=0,C=c.length;m<C;m++){const y=c[m];if(y.POSITION!==void 0){const b=A.json.accessors[y.POSITION],B=b.min,w=b.max;if(B!==void 0&&w!==void 0){if(E.setX(Math.max(Math.abs(B[0]),Math.abs(w[0]))),E.setY(Math.max(Math.abs(B[1]),Math.abs(w[1]))),E.setZ(Math.max(Math.abs(B[2]),Math.abs(w[2]))),b.normalized){const I=Jr(Ve[b.componentType]);E.multiplyScalar(I)}p.max(E)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}h.expandByVector(p)}s.boundingBox=h;const g=new d.Sphere;h.getCenter(g.center),g.radius=h.min.distanceTo(h.max)/2,s.boundingSphere=g})(e,t,i),Promise.all(r).then((function(){return t.targets!==void 0?(function(s,a,A){let l=!1,h=!1,c=!1;for(let m=0,C=a.length;m<C;m++){const y=a[m];if(y.POSITION!==void 0&&(l=!0),y.NORMAL!==void 0&&(h=!0),y.COLOR_0!==void 0&&(c=!0),l&&h&&c)break}if(!l&&!h&&!c)return Promise.resolve(s);const g=[],p=[],E=[];for(let m=0,C=a.length;m<C;m++){const y=a[m];if(l){const b=y.POSITION!==void 0?A.getDependency("accessor",y.POSITION):s.attributes.position;g.push(b)}if(h){const b=y.NORMAL!==void 0?A.getDependency("accessor",y.NORMAL):s.attributes.normal;p.push(b)}if(c){const b=y.COLOR_0!==void 0?A.getDependency("accessor",y.COLOR_0):s.attributes.color;E.push(b)}}return Promise.all([Promise.all(g),Promise.all(p),Promise.all(E)]).then((function(m){const C=m[0],y=m[1],b=m[2];return l&&(s.morphAttributes.position=C),h&&(s.morphAttributes.normal=y),c&&(s.morphAttributes.color=b),s.morphTargetsRelative=!0,s}))})(e,t.targets,i):e}))}class zh{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const i=this.workerCreator();i.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=i}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,i){const n=this.workersResolve[t];if(n&&n(i),this.queue.length){const{resolve:r,msg:o,transfer:s}=this.queue.shift();this.workersResolve[t]=r,this.workers[t].postMessage(o,s)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,i){return new Promise((n=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=n,this.workers[r].postMessage(t,i)):this.queue.push({resolve:n,msg:t,transfer:i})}))}dispose(){this.workers.forEach((t=>t.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const xA=9,QA=15,MA=16,LA=22,SA=37,DA=43,kA=76,TA=83,RA=97,FA=100,OA=103,UA=109,_A=165,PA=166,Eo=1000066e3;class qh{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Ye{constructor(t,i,n,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+i,n),this._littleEndian=r,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){const i=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,i}_skip(t){return this._offset+=t,this}_scan(t,i){i===void 0&&(i=0);const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==i&&r<t;)r++,this._offset++;return r<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}const Qt=[171,75,84,88,32,50,48,187,13,10,26,10];function is(e){return new TextDecoder().decode(e)}var Vh=G(9922).hp;let Rn,ie,Xr;const Fn={env:{emscripten_notify_memory_growth:function(e){Xr=new Uint8Array(ie.exports.memory.buffer)}}};class Wh{init(){return Rn||(Rn=typeof fetch<"u"?fetch("data:application/wasm;base64,"+ns).then((t=>t.arrayBuffer())).then((t=>WebAssembly.instantiate(t,Fn))).then(this._init):WebAssembly.instantiate(Vh.from(ns,"base64"),Fn).then(this._init),Rn)}_init(t){ie=t.instance,Fn.env.emscripten_notify_memory_growth(0)}decode(t,i=0){if(!ie)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=t.byteLength,r=ie.exports.malloc(n);Xr.set(t,r),i=i||Number(ie.exports.ZSTD_findDecompressedSize(r,n));const o=ie.exports.malloc(i),s=ie.exports.ZSTD_decompress(o,i,r,n),a=Xr.slice(o,o+s);return ie.exports.free(r),ie.exports.free(o),a}}const ns="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",On=new WeakMap;let Un,_n=0;class Ft extends d.Loader{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new zh,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}async detectSupportAsync(t){return this.workerConfig={astcSupported:await t.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await t.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await t.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await t.hasFeatureAsync("texture-compression-bc"),bptcSupported:await t.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await t.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(t){return t.isWebGPURenderer===!0?this.workerConfig={astcSupported:t.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:t.hasFeature("texture-compression-etc1"),etc2Supported:t.hasFeature("texture-compression-etc2"),dxtSupported:t.hasFeature("texture-compression-bc"),bptcSupported:t.hasFeature("texture-compression-bptc"),pvrtcSupported:t.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:t.extensions.has("WEBGL_compressed_texture_astc")&&t.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const t=new d.FileLoader(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const i=t.loadAsync("basis_transcoder.js"),n=new d.FileLoader(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const r=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([i,r]).then((([o,s])=>{const a=Ft.BasisWorker.toString(),A=["/* constants */","let _EngineFormat = "+JSON.stringify(Ft.EngineFormat),"let _EngineType = "+JSON.stringify(Ft.EngineType),"let _TranscoderFormat = "+JSON.stringify(Ft.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Ft.BasisFormat),"/* basis_transcoder.js */",o,"/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([A])),this.transcoderBinary=s,this.workerPool.setWorkerCreator((()=>{const l=new Worker(this.workerSourceURL),h=this.transcoderBinary.slice(0);return l.postMessage({type:"init",config:this.workerConfig,transcoderBinary:h},[h]),l}))})),_n>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),_n++}return this.transcoderPending}load(t,i,n,r){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const o=new d.FileLoader(this.manager);o.setResponseType("arraybuffer"),o.setWithCredentials(this.withCredentials),o.load(t,(s=>{this.parse(s,i,r)}),n,r)}parse(t,i,n){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(On.has(t))return On.get(t).promise.then(i).catch(n);this._createTexture(t).then((r=>i?i(r):null)).catch(n)}_createTextureFrom(t,i){const{type:n,error:r,data:{faces:o,width:s,height:a,format:A,type:l,dfdFlags:h}}=t;if(n==="error")return Promise.reject(r);let c;if(i.faceCount===6)c=new d.CompressedCubeTexture(o,A,l);else{const g=o[0].mipmaps;c=i.layerCount>1?new d.CompressedArrayTexture(g,s,a,i.layerCount,A,l):new d.CompressedTexture(g,s,a,A,l)}return c.minFilter=o[0].mipmaps.length===1?d.LinearFilter:d.LinearMipmapLinearFilter,c.magFilter=d.LinearFilter,c.generateMipmaps=!1,c.needsUpdate=!0,c.colorSpace=rs(i),c.premultiplyAlpha=!!(1&h),c}async _createTexture(t,i={}){const n=(function(a){const A=new Uint8Array(a.buffer,a.byteOffset,Qt.length);if(A[0]!==Qt[0]||A[1]!==Qt[1]||A[2]!==Qt[2]||A[3]!==Qt[3]||A[4]!==Qt[4]||A[5]!==Qt[5]||A[6]!==Qt[6]||A[7]!==Qt[7]||A[8]!==Qt[8]||A[9]!==Qt[9]||A[10]!==Qt[10]||A[11]!==Qt[11])throw new Error("Missing KTX 2.0 identifier.");const l=new qh,h=17*Uint32Array.BYTES_PER_ELEMENT,c=new Ye(a,Qt.length,h,!0);l.vkFormat=c._nextUint32(),l.typeSize=c._nextUint32(),l.pixelWidth=c._nextUint32(),l.pixelHeight=c._nextUint32(),l.pixelDepth=c._nextUint32(),l.layerCount=c._nextUint32(),l.faceCount=c._nextUint32();const g=c._nextUint32();l.supercompressionScheme=c._nextUint32();const p=c._nextUint32(),E=c._nextUint32(),m=c._nextUint32(),C=c._nextUint32(),y=c._nextUint64(),b=c._nextUint64(),B=new Ye(a,Qt.length+h,3*g*8,!0);for(let z=0;z<g;z++)l.levels.push({levelData:new Uint8Array(a.buffer,a.byteOffset+B._nextUint64(),B._nextUint64()),uncompressedByteLength:B._nextUint64()});const w=new Ye(a,p,E,!0),I={vendorId:w._skip(4)._nextUint16(),descriptorType:w._nextUint16(),versionNumber:w._nextUint16(),descriptorBlockSize:w._nextUint16(),colorModel:w._nextUint8(),colorPrimaries:w._nextUint8(),transferFunction:w._nextUint8(),flags:w._nextUint8(),texelBlockDimension:[w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8()],bytesPlane:[w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8()],samples:[]},S=(I.descriptorBlockSize/4-6)/4;for(let z=0;z<S;z++){const at={bitOffset:w._nextUint16(),bitLength:w._nextUint8(),channelType:w._nextUint8(),samplePosition:[w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&at.channelType?(at.sampleLower=w._nextInt32(),at.sampleUpper=w._nextInt32()):(at.sampleLower=w._nextUint32(),at.sampleUpper=w._nextUint32()),I.samples[z]=at}l.dataFormatDescriptor.length=0,l.dataFormatDescriptor.push(I);const Q=new Ye(a,m,C,!0);for(;Q._offset<C;){const z=Q._nextUint32(),at=Q._scan(z),mt=is(at);if(l.keyValue[mt]=Q._nextUint8Array(z-at.byteLength-1),mt.match(/^ktx/i)){const Et=is(l.keyValue[mt]);l.keyValue[mt]=Et.substring(0,Et.lastIndexOf("\0"))}Q._skip(z%4?4-z%4:0)}if(b<=0)return l;const D=new Ye(a,y,b,!0),k=D._nextUint16(),F=D._nextUint16(),R=D._nextUint32(),P=D._nextUint32(),O=D._nextUint32(),Y=D._nextUint32(),it=[];for(let z=0;z<g;z++)it.push({imageFlags:D._nextUint32(),rgbSliceByteOffset:D._nextUint32(),rgbSliceByteLength:D._nextUint32(),alphaSliceByteOffset:D._nextUint32(),alphaSliceByteLength:D._nextUint32()});const U=y+D._offset,N=U+R,K=N+P,H=K+O,Z=new Uint8Array(a.buffer,a.byteOffset+U,R),st=new Uint8Array(a.buffer,a.byteOffset+N,P),X=new Uint8Array(a.buffer,a.byteOffset+K,O),nt=new Uint8Array(a.buffer,a.byteOffset+H,Y);return l.globalData={endpointCount:k,selectorCount:F,imageDescs:it,endpointsData:Z,selectorsData:st,tablesData:X,extendedData:nt},l})(new Uint8Array(t)),r=n.vkFormat===Eo&&n.dataFormatDescriptor[0].colorModel===167;if(n.vkFormat!==0&&(!r||this.workerConfig.astcHDRSupported))return(async function(a){const{vkFormat:A}=a;if(Pn[A]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let l;a.supercompressionScheme===2&&(Un||(Un=new Promise((async g=>{const p=new Wh;await p.init(),g(p)}))),l=await Un);const h=[];for(let g=0;g<a.levels.length;g++){const p=Math.max(1,a.pixelWidth>>g),E=Math.max(1,a.pixelHeight>>g),m=a.pixelDepth?Math.max(1,a.pixelDepth>>g):0,C=a.levels[g];let y,b;if(a.supercompressionScheme===0)y=C.levelData;else{if(a.supercompressionScheme!==2)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");y=l.decode(C.levelData,C.uncompressedByteLength)}b=Nn[A]===d.FloatType?new Float32Array(y.buffer,y.byteOffset,y.byteLength/Float32Array.BYTES_PER_ELEMENT):Nn[A]===d.HalfFloatType?new Uint16Array(y.buffer,y.byteOffset,y.byteLength/Uint16Array.BYTES_PER_ELEMENT):y,h.push({data:b,width:p,height:E,depth:m})}let c;if(Yh.has(Pn[A]))c=a.pixelDepth===0?new d.DataTexture(h[0].data,a.pixelWidth,a.pixelHeight):new d.Data3DTexture(h[0].data,a.pixelWidth,a.pixelHeight,a.pixelDepth);else{if(a.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");c=new d.CompressedTexture(h,a.pixelWidth,a.pixelHeight),c.minFilter=h.length===1?d.LinearFilter:d.LinearMipmapLinearFilter,c.magFilter=d.LinearFilter}return c.mipmaps=h,c.type=Nn[A],c.format=Pn[A],c.colorSpace=rs(a),c.needsUpdate=!0,Promise.resolve(c)})(n);const o=i,s=this.init().then((()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:o},[t]))).then((a=>this._createTextureFrom(a.data,n)));return On.set(t,{promise:s}),s}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),_n--,this}}Ft.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2},Ft.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25},Ft.EngineFormat={RGBAFormat:d.RGBAFormat,RGBA_ASTC_4x4_Format:d.RGBA_ASTC_4x4_Format,RGB_BPTC_UNSIGNED_Format:d.RGB_BPTC_UNSIGNED_Format,RGBA_BPTC_Format:d.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:d.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:d.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:d.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:d.RGB_ETC1_Format,RGB_ETC2_Format:d.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:d.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:d.RGBA_S3TC_DXT1_Format},Ft.EngineType={UnsignedByteType:d.UnsignedByteType,HalfFloatType:d.HalfFloatType,FloatType:d.FloatType},Ft.BasisWorker=function(){let e,t,i;const n=_EngineFormat,r=_EngineType,o=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",(function(c){const g=c.data;switch(g.type){case"init":e=g.config,p=g.transcoderBinary,t=new Promise((E=>{i={wasmBinary:p,onRuntimeInitialized:E},BASIS(i)})).then((()=>{i.initializeBasis(),i.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":t.then((()=>{try{const{faces:E,buffers:m,width:C,height:y,hasAlpha:b,format:B,type:w,dfdFlags:I}=(function(S){const Q=new i.KTX2File(new Uint8Array(S));function D(){Q.close(),Q.delete()}if(!Q.isValid())throw D(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let k;if(Q.isUASTC())k=s.UASTC;else if(Q.isETC1S())k=s.ETC1S;else{if(!Q.isHDR())throw new Error("THREE.KTX2Loader: Unknown Basis encoding");k=s.UASTC_HDR}const F=Q.getWidth(),R=Q.getHeight(),P=Q.getLayers()||1,O=Q.getLevels(),Y=Q.getFaces(),it=Q.getHasAlpha(),U=Q.getDFDFlags(),{transcoderFormat:N,engineFormat:K,engineType:H}=(function(X,nt,z,at){const mt=A[X];for(let Et=0;Et<mt.length;Et++){const At=mt[Et];if((!At.if||e[At.if])&&At.basisFormat.includes(X)&&!(at&&At.transcoderFormat.length<2)&&(!At.needsPowerOfTwo||l(nt)&&l(z)))return{transcoderFormat:At.transcoderFormat[at?1:0],engineFormat:At.engineFormat[at?1:0],engineType:At.engineType[0]}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")})(k,F,R,it);if(!F||!R||!O)throw D(),new Error("THREE.KTX2Loader:	Invalid texture");if(!Q.startTranscoding())throw D(),new Error("THREE.KTX2Loader: .startTranscoding failed");const Z=[],st=[];for(let X=0;X<Y;X++){const nt=[];for(let z=0;z<O;z++){const at=[];let mt,Et;for(let Ut=0;Ut<P;Ut++){const Wt=Q.getImageLevelInfo(z,Ut,X);X!==0||z!==0||Ut!==0||Wt.origWidth%4==0&&Wt.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),O>1?(mt=Wt.origWidth,Et=Wt.origHeight):(mt=Wt.width,Et=Wt.height);let Zt=new Uint8Array(Q.getImageTranscodedSizeInBytes(z,Ut,0,N));const Te=Q.transcodeImage(Zt,z,Ut,X,N,0,-1,-1);if(H===r.HalfFloatType&&(Zt=new Uint16Array(Zt.buffer,Zt.byteOffset,Zt.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!Te)throw D(),new Error("THREE.KTX2Loader: .transcodeImage failed.");at.push(Zt)}const At=h(at);nt.push({data:At,width:mt,height:Et}),st.push(At.buffer)}Z.push({mipmaps:nt,width:F,height:R,format:K,type:H})}return D(),{faces:Z,buffers:st,width:F,height:R,hasAlpha:it,dfdFlags:U,format:K,type:H}})(g.buffer);self.postMessage({type:"transcode",id:g.id,data:{faces:E,width:C,height:y,hasAlpha:b,format:B,type:w,dfdFlags:I}},m)}catch(E){console.error(E),self.postMessage({type:"error",id:g.id,error:E.message})}}))}var p}));const a=[{if:"astcSupported",basisFormat:[s.UASTC],transcoderFormat:[o.ASTC_4x4,o.ASTC_4x4],engineFormat:[n.RGBA_ASTC_4x4_Format,n.RGBA_ASTC_4x4_Format],engineType:[r.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.BC7_M5,o.BC7_M5],engineFormat:[n.RGBA_BPTC_Format,n.RGBA_BPTC_Format],engineType:[r.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.BC1,o.BC3],engineFormat:[n.RGBA_S3TC_DXT1_Format,n.RGBA_S3TC_DXT5_Format],engineType:[r.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.ETC1,o.ETC2],engineFormat:[n.RGB_ETC2_Format,n.RGBA_ETC2_EAC_Format],engineType:[r.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.ETC1],engineFormat:[n.RGB_ETC1_Format],engineType:[r.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.PVRTC1_4_RGB,o.PVRTC1_4_RGBA],engineFormat:[n.RGB_PVRTC_4BPPV1_Format,n.RGBA_PVRTC_4BPPV1_Format],engineType:[r.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[s.UASTC_HDR],transcoderFormat:[o.BC6H],engineFormat:[n.RGB_BPTC_UNSIGNED_Format],engineType:[r.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.RGBA32,o.RGBA32],engineFormat:[n.RGBAFormat,n.RGBAFormat],engineType:[r.UnsignedByteType,r.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[s.UASTC_HDR],transcoderFormat:[o.RGBA_HALF],engineFormat:[n.RGBAFormat],engineType:[r.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],A={[s.ETC1S]:a.filter((c=>c.basisFormat.includes(s.ETC1S))).sort(((c,g)=>c.priorityUASTC-g.priorityUASTC)),[s.UASTC]:a.filter((c=>c.basisFormat.includes(s.UASTC))).sort(((c,g)=>c.priorityUASTC-g.priorityUASTC)),[s.UASTC_HDR]:a.filter((c=>c.basisFormat.includes(s.UASTC_HDR))).sort(((c,g)=>c.priorityHDR-g.priorityHDR))};function l(c){return c<=2||!(c&c-1)&&c!==0}function h(c){if(c.length===1)return c[0];let g=0;for(let m=0;m<c.length;m++)g+=c[m].byteLength;const p=new Uint8Array(g);let E=0;for(let m=0;m<c.length;m++){const C=c[m];p.set(C,E),E+=C.byteLength}return p}};const Yh=new Set([d.RGBAFormat,d.RGFormat,d.RedFormat]),Pn={[UA]:d.RGBAFormat,[RA]:d.RGBAFormat,[SA]:d.RGBAFormat,[DA]:d.RGBAFormat,[OA]:d.RGFormat,[TA]:d.RGFormat,[MA]:d.RGFormat,[LA]:d.RGFormat,[FA]:d.RedFormat,[kA]:d.RedFormat,[QA]:d.RedFormat,[xA]:d.RedFormat,[Eo]:d.RGBA_ASTC_4x4_Format,[PA]:d.RGBA_ASTC_6x6_Format,[_A]:d.RGBA_ASTC_6x6_Format},Nn={[UA]:d.FloatType,[RA]:d.HalfFloatType,[SA]:d.UnsignedByteType,[DA]:d.UnsignedByteType,[OA]:d.FloatType,[TA]:d.HalfFloatType,[MA]:d.UnsignedByteType,[LA]:d.UnsignedByteType,[FA]:d.FloatType,[kA]:d.HalfFloatType,[QA]:d.UnsignedByteType,[xA]:d.UnsignedByteType,[Eo]:d.HalfFloatType,[PA]:d.UnsignedByteType,[_A]:d.UnsignedByteType};function rs(e){const t=e.dataFormatDescriptor[0];return t.colorPrimaries===1?t.transferFunction===2?d.SRGBColorSpace:d.LinearSRGBColorSpace:t.colorPrimaries===10?t.transferFunction===2?"display-p3":"display-p3-linear":(t.colorPrimaries===0||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t.colorPrimaries}"`),d.NoColorSpace)}const $={c:null,u:[new d.Vector3,new d.Vector3,new d.Vector3],e:[]},rt={c:null,u:[new d.Vector3,new d.Vector3,new d.Vector3],e:[]},ht=[[],[],[]],V=[[],[],[]],lt=[],we=new d.Vector3,Ie=new d.Vector3,xe=new d.Vector3,Ct=new d.Vector3,os=new d.Vector3,ss=new d.Vector3,jt=new d.Matrix3,as=new d.Box3,bi=new d.Matrix4,As=new d.Matrix4,ls=new d.Ray;class ln{constructor(t=new d.Vector3,i=new d.Vector3,n=new d.Matrix3){this.center=t,this.halfSize=i,this.rotation=n}set(t,i,n){return this.center=t,this.halfSize=i,this.rotation=n,this}copy(t){return this.center.copy(t.center),this.halfSize.copy(t.halfSize),this.rotation.copy(t.rotation),this}clone(){return new this.constructor().copy(this)}getSize(t){return t.copy(this.halfSize).multiplyScalar(2)}clampPoint(t,i){const n=this.halfSize;Ct.subVectors(t,this.center),this.rotation.extractBasis(we,Ie,xe),i.copy(this.center);const r=d.MathUtils.clamp(Ct.dot(we),-n.x,n.x);i.add(we.multiplyScalar(r));const o=d.MathUtils.clamp(Ct.dot(Ie),-n.y,n.y);i.add(Ie.multiplyScalar(o));const s=d.MathUtils.clamp(Ct.dot(xe),-n.z,n.z);return i.add(xe.multiplyScalar(s)),i}containsPoint(t){return Ct.subVectors(t,this.center),this.rotation.extractBasis(we,Ie,xe),Math.abs(Ct.dot(we))<=this.halfSize.x&&Math.abs(Ct.dot(Ie))<=this.halfSize.y&&Math.abs(Ct.dot(xe))<=this.halfSize.z}intersectsBox3(t){return this.intersectsOBB(Kh.fromBox3(t))}intersectsSphere(t){return this.clampPoint(t.center,ss),ss.distanceToSquared(t.center)<=t.radius*t.radius}intersectsOBB(t,i=Number.EPSILON){$.c=this.center,$.e[0]=this.halfSize.x,$.e[1]=this.halfSize.y,$.e[2]=this.halfSize.z,this.rotation.extractBasis($.u[0],$.u[1],$.u[2]),rt.c=t.center,rt.e[0]=t.halfSize.x,rt.e[1]=t.halfSize.y,rt.e[2]=t.halfSize.z,t.rotation.extractBasis(rt.u[0],rt.u[1],rt.u[2]);for(let o=0;o<3;o++)for(let s=0;s<3;s++)ht[o][s]=$.u[o].dot(rt.u[s]);Ct.subVectors(rt.c,$.c),lt[0]=Ct.dot($.u[0]),lt[1]=Ct.dot($.u[1]),lt[2]=Ct.dot($.u[2]);for(let o=0;o<3;o++)for(let s=0;s<3;s++)V[o][s]=Math.abs(ht[o][s])+i;let n,r;for(let o=0;o<3;o++)if(n=$.e[o],r=rt.e[0]*V[o][0]+rt.e[1]*V[o][1]+rt.e[2]*V[o][2],Math.abs(lt[o])>n+r)return!1;for(let o=0;o<3;o++)if(n=$.e[0]*V[0][o]+$.e[1]*V[1][o]+$.e[2]*V[2][o],r=rt.e[o],Math.abs(lt[0]*ht[0][o]+lt[1]*ht[1][o]+lt[2]*ht[2][o])>n+r)return!1;return n=$.e[1]*V[2][0]+$.e[2]*V[1][0],r=rt.e[1]*V[0][2]+rt.e[2]*V[0][1],!(Math.abs(lt[2]*ht[1][0]-lt[1]*ht[2][0])>n+r||(n=$.e[1]*V[2][1]+$.e[2]*V[1][1],r=rt.e[0]*V[0][2]+rt.e[2]*V[0][0],Math.abs(lt[2]*ht[1][1]-lt[1]*ht[2][1])>n+r||(n=$.e[1]*V[2][2]+$.e[2]*V[1][2],r=rt.e[0]*V[0][1]+rt.e[1]*V[0][0],Math.abs(lt[2]*ht[1][2]-lt[1]*ht[2][2])>n+r||(n=$.e[0]*V[2][0]+$.e[2]*V[0][0],r=rt.e[1]*V[1][2]+rt.e[2]*V[1][1],Math.abs(lt[0]*ht[2][0]-lt[2]*ht[0][0])>n+r||(n=$.e[0]*V[2][1]+$.e[2]*V[0][1],r=rt.e[0]*V[1][2]+rt.e[2]*V[1][0],Math.abs(lt[0]*ht[2][1]-lt[2]*ht[0][1])>n+r||(n=$.e[0]*V[2][2]+$.e[2]*V[0][2],r=rt.e[0]*V[1][1]+rt.e[1]*V[1][0],Math.abs(lt[0]*ht[2][2]-lt[2]*ht[0][2])>n+r||(n=$.e[0]*V[1][0]+$.e[1]*V[0][0],r=rt.e[1]*V[2][2]+rt.e[2]*V[2][1],Math.abs(lt[1]*ht[0][0]-lt[0]*ht[1][0])>n+r||(n=$.e[0]*V[1][1]+$.e[1]*V[0][1],r=rt.e[0]*V[2][2]+rt.e[2]*V[2][0],Math.abs(lt[1]*ht[0][1]-lt[0]*ht[1][1])>n+r||(n=$.e[0]*V[1][2]+$.e[1]*V[0][2],r=rt.e[0]*V[2][1]+rt.e[1]*V[2][0],Math.abs(lt[1]*ht[0][2]-lt[0]*ht[1][2])>n+r)))))))))}intersectsPlane(t){this.rotation.extractBasis(we,Ie,xe);const i=this.halfSize.x*Math.abs(t.normal.dot(we))+this.halfSize.y*Math.abs(t.normal.dot(Ie))+this.halfSize.z*Math.abs(t.normal.dot(xe)),n=t.normal.dot(this.center)-t.constant;return Math.abs(n)<=i}intersectRay(t,i){return this.getSize(os),as.setFromCenterAndSize(Ct.set(0,0,0),os),bi.setFromMatrix3(this.rotation),bi.setPosition(this.center),As.copy(bi).invert(),ls.copy(t).applyMatrix4(As),ls.intersectBox(as,i)?i.applyMatrix4(bi):null}intersectsRay(t){return this.intersectRay(t,Ct)!==null}fromBox3(t){return t.getCenter(this.center),t.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(t){return t.center.equals(this.center)&&t.halfSize.equals(this.halfSize)&&t.rotation.equals(this.rotation)}applyMatrix4(t){const i=t.elements;let n=Ct.set(i[0],i[1],i[2]).length();const r=Ct.set(i[4],i[5],i[6]).length(),o=Ct.set(i[8],i[9],i[10]).length();t.determinant()<0&&(n=-n),jt.setFromMatrix4(t);const s=1/n,a=1/r,A=1/o;return jt.elements[0]*=s,jt.elements[1]*=s,jt.elements[2]*=s,jt.elements[3]*=a,jt.elements[4]*=a,jt.elements[5]*=a,jt.elements[6]*=A,jt.elements[7]*=A,jt.elements[8]*=A,this.rotation.multiply(jt),this.halfSize.x*=n,this.halfSize.y*=r,this.halfSize.z*=o,Ct.setFromMatrixPosition(t),this.center.add(Ct),this}}const Kh=new ln,Jh=/^[og]\s*(.+)?/,Xh=/^mtllib /,Zh=/^usemtl /,$h=/^usemap /,hs=/\s+/,cs=new d.Vector3,Gn=new d.Vector3,ds=new d.Vector3,us=new d.Vector3,_t=new d.Vector3,Bi=new d.Color;function tc(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,i){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=t,void(this.object.fromDeclaration=i!==!1);const n=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:i!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,o){const s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:s!==void 0?s.smooth:this.smooth,groupStart:s!==void 0?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(A){const l={index:typeof A=="number"?A:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return l.clone=this.clone.bind(l),l}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),r&&this.materials.length>1)for(let s=this.materials.length-1;s>=0;s--)this.materials[s].groupCount<=0&&this.materials.splice(s,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},n&&n.name&&typeof n.clone=="function"){const r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(t,i){const n=parseInt(t,10);return 3*(n>=0?n-1:n+i/3)},parseNormalIndex:function(t,i){const n=parseInt(t,10);return 3*(n>=0?n-1:n+i/3)},parseUVIndex:function(t,i){const n=parseInt(t,10);return 2*(n>=0?n-1:n+i/2)},addVertex:function(t,i,n){const r=this.vertices,o=this.object.geometry.vertices;o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2]),o.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(t){const i=this.vertices;this.object.geometry.vertices.push(i[t+0],i[t+1],i[t+2])},addVertexLine:function(t){const i=this.vertices;this.object.geometry.vertices.push(i[t+0],i[t+1],i[t+2])},addNormal:function(t,i,n){const r=this.normals,o=this.object.geometry.normals;o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2]),o.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(t,i,n){const r=this.vertices,o=this.object.geometry.normals;cs.fromArray(r,t),Gn.fromArray(r,i),ds.fromArray(r,n),_t.subVectors(ds,Gn),us.subVectors(cs,Gn),_t.cross(us),_t.normalize(),o.push(_t.x,_t.y,_t.z),o.push(_t.x,_t.y,_t.z),o.push(_t.x,_t.y,_t.z)},addColor:function(t,i,n){const r=this.colors,o=this.object.geometry.colors;r[t]!==void 0&&o.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&o.push(r[i+0],r[i+1],r[i+2]),r[n]!==void 0&&o.push(r[n+0],r[n+1],r[n+2])},addUV:function(t,i,n){const r=this.uvs,o=this.object.geometry.uvs;o.push(r[t+0],r[t+1]),o.push(r[i+0],r[i+1]),o.push(r[n+0],r[n+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const i=this.uvs;this.object.geometry.uvs.push(i[t+0],i[t+1])},addFace:function(t,i,n,r,o,s,a,A,l){const h=this.vertices.length;let c=this.parseVertexIndex(t,h),g=this.parseVertexIndex(i,h),p=this.parseVertexIndex(n,h);if(this.addVertex(c,g,p),this.addColor(c,g,p),a!==void 0&&a!==""){const E=this.normals.length;c=this.parseNormalIndex(a,E),g=this.parseNormalIndex(A,E),p=this.parseNormalIndex(l,E),this.addNormal(c,g,p)}else this.addFaceNormal(c,g,p);if(r!==void 0&&r!==""){const E=this.uvs.length;c=this.parseUVIndex(r,E),g=this.parseUVIndex(o,E),p=this.parseUVIndex(s,E),this.addUV(c,g,p),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const i=this.vertices.length;for(let n=0,r=t.length;n<r;n++){const o=this.parseVertexIndex(t[n],i);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(t,i){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let o=0,s=t.length;o<s;o++)this.addVertexLine(this.parseVertexIndex(t[o],n));for(let o=0,s=i.length;o<s;o++)this.addUVLine(this.parseUVIndex(i[o],r))}};return e.startObject("",!1),e}class NA extends d.Loader{constructor(t){super(t),this.materials=null}load(t,i,n,r){const o=this,s=new d.FileLoader(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(a){try{i(o.parse(a))}catch(A){r?r(A):console.error(A),o.manager.itemError(t)}}),n,r)}setMaterials(t){return this.materials=t,this}parse(t){const i=new tc;t.indexOf(`\r
`)!==-1&&(t=t.replace(/\r\n/g,`
`)),t.indexOf(`\\
`)!==-1&&(t=t.replace(/\\\n/g,""));const n=t.split(`
`);let r=[];for(let s=0,a=n.length;s<a;s++){const A=n[s].trimStart();if(A.length===0)continue;const l=A.charAt(0);if(l!=="#")if(l==="v"){const h=A.split(hs);switch(h[0]){case"v":i.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(Bi.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]),d.SRGBColorSpace),i.colors.push(Bi.r,Bi.g,Bi.b)):i.colors.push(void 0,void 0,void 0);break;case"vn":i.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":i.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}}else if(l==="f"){const h=A.slice(1).trim().split(hs),c=[];for(let p=0,E=h.length;p<E;p++){const m=h[p];if(m.length>0){const C=m.split("/");c.push(C)}}const g=c[0];for(let p=1,E=c.length-1;p<E;p++){const m=c[p],C=c[p+1];i.addFace(g[0],m[0],C[0],g[1],m[1],C[1],g[2],m[2],C[2])}}else if(l==="l"){const h=A.substring(1).trim().split(" ");let c=[];const g=[];if(A.indexOf("/")===-1)c=h;else for(let p=0,E=h.length;p<E;p++){const m=h[p].split("/");m[0]!==""&&c.push(m[0]),m[1]!==""&&g.push(m[1])}i.addLineGeometry(c,g)}else if(l==="p"){const h=A.slice(1).trim().split(" ");i.addPointGeometry(h)}else if((r=Jh.exec(A))!==null){const h=(" "+r[0].slice(1).trim()).slice(1);i.startObject(h)}else if(Zh.test(A))i.object.startMaterial(A.substring(7).trim(),i.materialLibraries);else if(Xh.test(A))i.materialLibraries.push(A.substring(7).trim());else if($h.test(A))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(l==="s"){if(r=A.split(" "),r.length>1){const c=r[1].trim().toLowerCase();i.object.smooth=c!=="0"&&c!=="off"}else i.object.smooth=!0;const h=i.object.currentMaterial();h&&(h.smooth=i.object.smooth)}else{if(A==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+A+'"')}}i.finalize();const o=new d.Group;if(o.materialLibraries=[].concat(i.materialLibraries),!(i.objects.length===1&&i.objects[0].geometry.vertices.length===0))for(let s=0,a=i.objects.length;s<a;s++){const A=i.objects[s],l=A.geometry,h=A.materials,c=l.type==="Line",g=l.type==="Points";let p=!1;if(l.vertices.length===0)continue;const E=new d.BufferGeometry;E.setAttribute("position",new d.Float32BufferAttribute(l.vertices,3)),l.normals.length>0&&E.setAttribute("normal",new d.Float32BufferAttribute(l.normals,3)),l.colors.length>0&&(p=!0,E.setAttribute("color",new d.Float32BufferAttribute(l.colors,3))),l.hasUVIndices===!0&&E.setAttribute("uv",new d.Float32BufferAttribute(l.uvs,2));const m=[];for(let y=0,b=h.length;y<b;y++){const B=h[y],w=B.name+"_"+B.smooth+"_"+p;let I=i.materials[w];if(this.materials!==null)if(I=this.materials.create(B.name),!c||!I||I instanceof d.LineBasicMaterial){if(g&&I&&!(I instanceof d.PointsMaterial)){const S=new d.PointsMaterial({size:10,sizeAttenuation:!1});d.Material.prototype.copy.call(S,I),S.color.copy(I.color),S.map=I.map,I=S}}else{const S=new d.LineBasicMaterial;d.Material.prototype.copy.call(S,I),S.color.copy(I.color),I=S}I===void 0&&(I=c?new d.LineBasicMaterial:g?new d.PointsMaterial({size:1,sizeAttenuation:!1}):new d.MeshPhongMaterial,I.name=B.name,I.flatShading=!B.smooth,I.vertexColors=p,i.materials[w]=I),m.push(I)}let C;if(m.length>1){for(let y=0,b=h.length;y<b;y++){const B=h[y];E.addGroup(B.groupStart,B.groupCount,y)}C=c?new d.LineSegments(E,m):g?new d.Points(E,m):new d.Mesh(E,m)}else C=c?new d.LineSegments(E,m[0]):g?new d.Points(E,m[0]):new d.Mesh(E,m[0]);C.name=A.name,o.add(C)}else if(i.vertices.length>0){const s=new d.PointsMaterial({size:1,sizeAttenuation:!1}),a=new d.BufferGeometry;a.setAttribute("position",new d.Float32BufferAttribute(i.vertices,3)),i.colors.length>0&&i.colors[0]!==void 0&&(a.setAttribute("color",new d.Float32BufferAttribute(i.colors,3)),s.vertexColors=!0);const A=new d.Points(a,s);o.add(A)}return o}}class GA extends d.Loader{constructor(t){super(t)}load(t,i,n,r){const o=this,s=this.path===""?d.LoaderUtils.extractUrlBase(t):this.path,a=new d.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(A){try{i(o.parse(A,s))}catch(l){r?r(l):console.error(l),o.manager.itemError(t)}}),n,r)}setMaterialOptions(t){return this.materialOptions=t,this}parse(t,i){const n=t.split(`
`);let r={};const o=/\s+/,s={};for(let A=0;A<n.length;A++){let l=n[A];if(l=l.trim(),l.length===0||l.charAt(0)==="#")continue;const h=l.indexOf(" ");let c=h>=0?l.substring(0,h):l;c=c.toLowerCase();let g=h>=0?l.substring(h+1):"";if(g=g.trim(),c==="newmtl")r={name:g},s[g]=r;else if(c==="ka"||c==="kd"||c==="ks"||c==="ke"){const p=g.split(o,3);r[c]=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])]}else r[c]=g}const a=new ec(this.resourcePath||i,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(s),a}}class ec{constructor(t="",i={}){this.baseUrl=t,this.options=i,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:d.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:d.RepeatWrapping}setCrossOrigin(t){return this.crossOrigin=t,this}setManager(t){this.manager=t}setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(t){if(!this.options)return t;const i={};for(const n in t){const r=t[n],o={};i[n]=o;for(const s in r){let a=!0,A=r[s];const l=s.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(A=[A[0]/255,A[1]/255,A[2]/255]),this.options&&this.options.ignoreZeroRGBs&&A[0]===0&&A[1]===0&&A[2]===0&&(a=!1)}a&&(o[l]=A)}}return i}preload(){for(const t in this.materialsInfo)this.create(t)}getIndex(t){return this.nameLookup[t]}getAsArray(){let t=0;for(const i in this.materialsInfo)this.materialsArray[t]=this.create(i),this.nameLookup[i]=t,t++;return this.materialsArray}create(t){return this.materials[t]===void 0&&this.createMaterial_(t),this.materials[t]}createMaterial_(t){const i=this,n=this.materialsInfo[t],r={name:t,side:this.side};function o(s,a){if(r[s])return;const A=i.getTextureParams(a,r),l=i.loadTexture((h=i.baseUrl,typeof(c=A.url)!="string"||c===""?"":/^https?:\/\//i.test(c)?c:h+c));var h,c;l.repeat.copy(A.scale),l.offset.copy(A.offset),l.wrapS=i.wrap,l.wrapT=i.wrap,s!=="map"&&s!=="emissiveMap"||(l.colorSpace=d.SRGBColorSpace),r[s]=l}for(const s in n){const a=n[s];let A;if(a!=="")switch(s.toLowerCase()){case"kd":r.color=d.ColorManagement.toWorkingColorSpace(new d.Color().fromArray(a),d.SRGBColorSpace);break;case"ks":r.specular=d.ColorManagement.toWorkingColorSpace(new d.Color().fromArray(a),d.SRGBColorSpace);break;case"ke":r.emissive=d.ColorManagement.toWorkingColorSpace(new d.Color().fromArray(a),d.SRGBColorSpace);break;case"map_kd":o("map",a);break;case"map_ks":o("specularMap",a);break;case"map_ke":o("emissiveMap",a);break;case"norm":o("normalMap",a);break;case"map_bump":case"bump":o("bumpMap",a);break;case"map_d":o("alphaMap",a),r.transparent=!0;break;case"ns":r.shininess=parseFloat(a);break;case"d":A=parseFloat(a),A<1&&(r.opacity=A,r.transparent=!0);break;case"tr":A=parseFloat(a),this.options&&this.options.invertTrProperty&&(A=1-A),A>0&&(r.opacity=1-A,r.transparent=!0)}}return this.materials[t]=new d.MeshPhongMaterial(r),this.materials[t]}getTextureParams(t,i){const n={scale:new d.Vector2(1,1),offset:new d.Vector2(0,0)},r=t.split(/\s+/);let o;return o=r.indexOf("-bm"),o>=0&&(i.bumpScale=parseFloat(r[o+1]),r.splice(o,2)),o=r.indexOf("-s"),o>=0&&(n.scale.set(parseFloat(r[o+1]),parseFloat(r[o+2])),r.splice(o,4)),o=r.indexOf("-o"),o>=0&&(n.offset.set(parseFloat(r[o+1]),parseFloat(r[o+2])),r.splice(o,4)),n.url=r.join(" ").trim(),n}loadTexture(t,i,n,r,o){const s=this.manager!==void 0?this.manager:d.DefaultLoadingManager;let a=s.getHandler(t);a===null&&(a=new d.TextureLoader(s)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const A=a.load(t,n,r,o);return i!==void 0&&(A.mapping=i),A}}class jA{static fromCubeTexture(t){let i=0;const n=new d.Vector3,r=new d.Vector3,o=new d.Color,s=[0,0,0,0,0,0,0,0,0],a=new d.SphericalHarmonics3,A=a.coefficients;for(let h=0;h<6;h++){const c=t.image[h],g=c.width,p=c.height,E=document.createElement("canvas");E.width=g,E.height=p;const m=E.getContext("2d");m.drawImage(c,0,0,g,p);const C=m.getImageData(0,0,g,p),y=C.data,b=C.width,B=2/b;for(let w=0,I=y.length;w<I;w+=4){o.setRGB(y[w]/255,y[w+1]/255,y[w+2]/255),gs(o,t.colorSpace);const S=w/4,Q=(S%b+.5)*B-1,D=1-(Math.floor(S/b)+.5)*B;switch(h){case 0:n.set(-1,D,-Q);break;case 1:n.set(1,D,Q);break;case 2:n.set(-Q,1,-D);break;case 3:n.set(-Q,-1,D);break;case 4:n.set(-Q,D,1);break;case 5:n.set(Q,D,-1)}const k=n.lengthSq(),F=4/(Math.sqrt(k)*k);i+=F,r.copy(n).normalize(),d.SphericalHarmonics3.getBasisAt(r,s);for(let R=0;R<9;R++)A[R].x+=s[R]*o.r*F,A[R].y+=s[R]*o.g*F,A[R].z+=s[R]*o.b*F}}const l=4*Math.PI/i;for(let h=0;h<9;h++)A[h].x*=l,A[h].y*=l,A[h].z*=l;return new d.LightProbe(a)}static async fromCubeRenderTarget(t,i){const n=t.coordinateSystem===d.WebGLCoordinateSystem?-1:1;let r=0;const o=new d.Vector3,s=new d.Vector3,a=new d.Color,A=[0,0,0,0,0,0,0,0,0],l=new d.SphericalHarmonics3,h=l.coefficients,c=i.texture.type,g=i.width;let p;t.isWebGLRenderer&&(p=c===d.HalfFloatType?new Uint16Array(g*g*4):new Uint8Array(g*g*4));for(let m=0;m<6;m++){t.isWebGLRenderer?await t.readRenderTargetPixelsAsync(i,0,0,g,g,p,m):p=await t.readRenderTargetPixelsAsync(i,0,0,g,g,0,m);const C=2/g;for(let y=0,b=p.length;y<b;y+=4){let B,w,I;c===d.HalfFloatType?(B=d.DataUtils.fromHalfFloat(p[y]),w=d.DataUtils.fromHalfFloat(p[y+1]),I=d.DataUtils.fromHalfFloat(p[y+2])):(B=p[y]/255,w=p[y+1]/255,I=p[y+2]/255),a.setRGB(B,w,I),gs(a,i.texture.colorSpace);const S=y/4,Q=(1-(S%g+.5)*C)*n,D=1-(Math.floor(S/g)+.5)*C;switch(m){case 0:o.set(-1*n,D,Q*n);break;case 1:o.set(1*n,D,-Q*n);break;case 2:o.set(Q,1,-D);break;case 3:o.set(Q,-1,D);break;case 4:o.set(Q,D,1);break;case 5:o.set(-Q,D,-1)}const k=o.lengthSq(),F=4/(Math.sqrt(k)*k);r+=F,s.copy(o).normalize(),d.SphericalHarmonics3.getBasisAt(s,A);for(let R=0;R<9;R++)h[R].x+=A[R]*a.r*F,h[R].y+=A[R]*a.g*F,h[R].z+=A[R]*a.b*F}}const E=4*Math.PI/r;for(let m=0;m<9;m++)h[m].x*=E,h[m].y*=E,h[m].z*=E;return new d.LightProbe(l)}}function gs(e,t){switch(t){case d.SRGBColorSpace:e.convertSRGBToLinear();break;case d.LinearSRGBColorSpace:case d.NoColorSpace:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.")}return e}var HA=function(e){var t=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var i,n,r,o,s=function(l){t.deviceOrientation=l},a=function(){t.screenOrientation=window.orientation||0},A=(i=new THREE.Vector3(0,0,1),n=new THREE.Euler,r=new THREE.Quaternion,o=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(l,h,c,g,p){n.set(c,h,-g,"YXZ"),l.setFromEuler(n),l.multiply(o),l.multiply(r.setFromAxisAngle(i,-p))});this.connect=function(){a(),window.addEventListener("orientationchange",a,!1),window.addEventListener("deviceorientation",s,!1),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",a,!1),window.removeEventListener("deviceorientation",s,!1),t.enabled=!1},this.update=function(){if(t.enabled!==!1){var l=t.deviceOrientation;if(l){var h=l.alpha?THREE.MathUtils.degToRad(l.alpha)+t.alphaOffset:0,c=l.beta?THREE.MathUtils.degToRad(l.beta):0,g=l.gamma?THREE.MathUtils.degToRad(l.gamma):0,p=t.screenOrientation?THREE.MathUtils.degToRad(t.screenOrientation):0;A(t.object.quaternion,h,c,g,p)}}},this.dispose=function(){t.disconnect()},this.connect()},qt=globalThis.THREE={...d};qt.DRACOLoader=BA,qt.GLTFLoader=mo,qt.KTX2Loader=Ft,qt.OBJLoader=NA,qt.MTLLoader=GA,qt.OBB=ln,qt.BufferGeometryUtils=Dr,qt.LightProbeGenerator=jA,qt.DeviceOrientationControls=HA,qt.Cache.enabled=!0;const zA=qt;var ut=window.AFRAME_CDN_ROOT||"https://cdn.aframe.io/",Bt="aframe-injected",ic=G(8878),di=G.n(ic),ps={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}};di().formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" "),this.useColors){var t;this.color=(t=(function(o){var s=o.split(":");return s[s.length-1]})(this.namespace),ps.colors&&ps.colors[t]||null);var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(function(o){o!=="%%"&&(n++,o==="%c"&&(r=n))})),e.splice(r,0,i)}};var jn=(function(){try{return window.localStorage}catch{}})();jn&&(parseInt(jn.logs,10)||jn.logs==="true")?di().enable("*"):di().enable("*:error,*:info,*:warn");const et=di();var nc=G(1124),rc=G.n(nc),fs=et("device:error"),hn=!1,cn=!1,bn=navigator.xr!==void 0;if(bn){var Re=function(){var e=document.querySelector("a-scene");e?e.hasLoaded?e.components["xr-mode-ui"].updateEnterInterfaces():e.addEventListener("loaded",Re):window.addEventListener("DOMContentLoaded",Re)},ms=function(e){fs("WebXR session support error: "+e.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then((function(e){hn=e,Re()})).catch(ms),navigator.xr.isSessionSupported("immersive-ar").then((function(e){cn=e,Re()})).catch((function(){}))):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then((function(){hn=!0,Re()})).catch(ms),navigator.xr.supportsSession("immersive-ar").then((function(){cn=!0,Re()})).catch((function(){}))):fs("WebXR has neither isSessionSupported or supportsSession?!")}function Co(){return hn||cn}function vo(){return cn}function Zr(){return hn}var Ke,Hn,Ce=(Ke=!1,Hn=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Hn)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Hn.substr(0,4)))&&(Ke=!0),(mi()||qA()||wo())&&(Ke=!0),Bo()&&(Ke=!1),function(){return Ke});function qA(e){var t=e||window.navigator.userAgent;return/Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(t)||VA()}function VA(e,t,i){var n=e||window.navigator.userAgent,r=t||window.navigator.platform,o=i||window.navigator.maxTouchPoints||0;return(r==="iPad"||r==="MacIntel")&&o>0&&/Macintosh|Intel|iPad|ipad/i.test(n)&&!window.MSStream}function WA(){var e=navigator.userAgent.includes("Macintosh"),t=navigator.maxTouchPoints===5;return e&&t&&bn}function mi(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function yo(){return!Ce()&&!Bo()&&window.orientation!==void 0}function bo(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}function YA(){return/(Mobile VR)/i.test(window.navigator.userAgent)}function Bo(){return bo()||YA()||WA()}function wo(){return/R7 Build/.test(window.navigator.userAgent)}function KA(){var e=window.orientation;return wo()&&(e+=90),e===90||e===-90}var Io=typeof process>"u"||process.browser===!0,oc=!Io,sc=Object.freeze(Object.create(null));function ac(){return{}}function xo(e){var t=[],i=null;function n(r){var o,s;if((r=r===void 0?t.length:r)>0&&i==null&&(i=0),r>0)for(o=t.length,t.length+=Number(r),s=o;s<t.length;s++)t[s]=e();return t.length}return e=e||ac,{grow:n,pool:t,recycle:function(r){r instanceof Object&&(i!==null&&i!==-1?t[--i]=r:t[t.length]=r)},size:function(){return t.length},use:function(){var r;return i!==null&&i!==t.length||n(t.length||5),r=t[i],t[i++]=sc,Qo(r),r}}}function Qo(e){var t;if(e&&e.constructor===Object)for(t in e)e[t]=void 0}function ui(e,t){var i;if(e&&e.constructor===Object)for(i in e)i in t||delete e[i]}var Ac=et("utils:coordinates:warn"),Es=["x","y","z","w"],JA=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/,lc=/\s+/g;function dn(e,t,i){var n,r,o,s,a,A,l,h,c=i&&typeof i=="object"?i:{};if(e&&e instanceof Object)return a=e.x===void 0?t&&t.x:e.x,A=e.y===void 0?t&&t.y:e.y,l=e.z===void 0?t&&t.z:e.z,h=e.w===void 0?t&&t.w:e.w,a!=null&&(c.x=Je(a)),A!=null&&(c.y=Je(A)),l!=null&&(c.z=Je(l)),h!=null&&(c.w=Je(h)),c;if(e==null)return typeof t=="object"?Object.assign(c,t):t;for(n=e.trim().split(lc),s=0;s<Es.length;s++)if(o=Es[s],n[s])c[o]=parseFloat(n[s],10);else{if((r=t&&t[o])===void 0)continue;c[o]=Je(r)}return c}function $i(e){var t;return typeof e!="object"?e:(t=e.x+" "+e.y,e.z!=null&&(t+=" "+e.z),e.w!=null&&(t+=" "+e.w),t)}function tn(e,t){return typeof e!="object"||typeof t!="object"?e===t:e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}function XA(e){return JA.test(e)}function hc(e){return Ac("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),XA(e)}function Je(e){return e!=null&&e.constructor===String?parseFloat(e,10):e}function cc(e){return new d.Vector3(e.x,e.y,e.z)}var Ae=(function(){var e={};return function(t,i){return i in e||(e[i]={}),t in e[i]||(e[i][t]=t.split(i)),e[i][t]}})();function Bn(e,t){var i=Ae(e,t=t||".");return i.length===1?i[0]:i}function ZA(e,t,i){var n;return i=i||".",t.indexOf(i)!==-1?(n=Bn(t,i)).constructor===String?e.getAttribute(n):e.getAttribute(n[0])[n[1]]:e.getAttribute(t)}function Mo(e,t,i,n){var r;n=n||".",t.indexOf(n)===-1?e.setAttribute(t,i):(r=Bn(t,n)).constructor===String?e.setAttribute(r,i):e.setAttribute(r[0],r[1],i)}function $A(e){var t=e.style.width,i=e.style.height;e.style.width=parseInt(t,10)+1+"px",e.style.height=parseInt(i,10)+1+"px",setTimeout((function(){e.style.width=t,e.style.height=i}),200)}var en=et("utils:src-loader:warn");function un(e,t,i){(function(n,r){var o;n.tagName?r(n.tagName==="IMG"):((o=new XMLHttpRequest).open("HEAD",n),o.addEventListener("load",(function(s){var a;o.status>=200&&o.status<300?(a=o.getResponseHeader("Content-Type"))==null?Cs(n,r):a.startsWith("image")?r(!0):r(!1):Cs(n,r),o.abort()})),o.send())})(e,(function(n){n?t(e):i(e)}))}function Lo(e,t,i){var n,r,o,s="",a=[];if(typeof e=="string"){let A=function(l){a.push(l),a.length===6&&t(a)};for(r=0;r<5;r++)s+="(url\\((?:[^\\)]+)\\),\\s*)";if(s+="(url\\((?:[^\\)]+)\\)\\s*)",o=e.match(new RegExp(s))){for(r=1;r<7;r++)un($r(o[r]),A);return}if(!e.startsWith("#"))return void un($r(e)||e,i)}if(n=e.tagName?e:(function(A){try{var l=document.querySelector(A);return l||en('No element was found matching the selector: "%s"',A),l}catch{return void en('"%s" is not a valid selector',A)}})(e))return n.tagName==="A-CUBEMAP"&&n.srcs?t(n.srcs):n.tagName==="IMG"?i(n):void en('Selector "%s" does not point to <a-cubemap> or <img>',e)}function tl(e,t){return Lo(e,t,(function(){en("Expected cubemap but got image")}))}function $r(e){var t=e.match(/url\((.+)\)/);if(t)return t[1]}function Cs(e,t){var i=new Image;i.addEventListener("load",(function(){t(!0)})),i.addEventListener("error",(function(){t(!1)})),i.src=e}var dc=et("utils:material:warn"),uc=new Set(["emissiveMap","envMap","map","specularMap"]);function gn(e,t){var i=t.offset||{x:0,y:0},n=t.repeat||{x:1,y:1},r=t.npot||!1,o=t.anisotropy||d.Texture.DEFAULT_ANISOTROPY,s=e.wrapS,a=e.wrapT,A=e.magFilter,l=e.minFilter;r&&(s=d.ClampToEdgeWrapping,a=d.ClampToEdgeWrapping,A=d.LinearFilter,l=d.LinearFilter),n.x===1&&n.y===1||(s=d.RepeatWrapping,a=d.RepeatWrapping),e.offset.set(i.x,i.y),e.repeat.set(n.x,n.y),e.wrapS===s&&e.wrapT===a&&e.magFilter===A&&e.minFilter===l&&e.anisotropy===o||(e.wrapS=s,e.wrapT=a,e.magFilter=A,e.minFilter=l,e.anisotropy=o,e.needsUpdate=!0)}function wn(e,t,i,n){var r=i.el,o=i.material,s=r.sceneEl.systems.renderer,a=n[t];if(i.materialSrcs||(i.materialSrcs={}),!a)return delete i.materialSrcs[e],void A(null);function A(l){o[e]!==l&&(o[e]&&o[e].dispose(),o[e]=l,o.needsUpdate=!0,So(r,l))}a===i.materialSrcs[e]&&o[e]?gn(o[e],n):(i.materialSrcs[e]=a,a instanceof d.Texture?A(a):r.sceneEl.systems.material.loadTextureSource(a,(function(l){if(i.materialSrcs[e]===a){var h=o[e];!h||l!==null&&el(h,l)||(h=null),!h&&l&&(h=Do(l)),h&&(h.source!==l&&(h.source=l,h.needsUpdate=!0),uc.has(e)&&s.applyColorCorrection(h),gn(h,n)),A(h)}})))}function nn(e,t){return wn("map","src",e,t)}function Kt(e,t,i){var n=e;e==="ambientOcclusion"&&(n="ao");var r={};return r.src=i[e+"Map"],r.offset=i[e+"TextureOffset"],r.repeat=i[e+"TextureRepeat"],r.wrap=i[e+"TextureWrap"],wn(n+"Map","src",t,r)}var zn={};function to(e,t){var i=e.material,n=e.el,r="envMap",o=t.envMap,s=t.sphericalEnvMap,a=t.refract;if(s&&(o=s,dc("`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. Use `envMap` property with a CubeMap or Equirectangular image instead.")),e.materialSrcs||(e.materialSrcs={}),!o)return delete e.materialSrcs[r],i.envMap=null,void(i.needsUpdate=!0);function A(l){e.materialSrcs[r]===o&&(i.envMap=l,i.needsUpdate=!0,So(n,l))}e.materialSrcs[r]=o,zn[o]?zn[o].then(A):zn[o]=new Promise((function(l){Lo(o,(function(h){n.sceneEl.systems.material.loadCubeMapTexture(h,(function(c){c.mapping=a?d.CubeRefractionMapping:d.CubeReflectionMapping,A(c),l(c)}))}),(function(h){n.sceneEl.systems.material.loadTexture(h,{src:h},(function(c){c.mapping=a?d.EquirectangularRefractionMapping:d.EquirectangularReflectionMapping,A(c),l(c)}))}))}))}function So(e,t){function i(){e.emit("materialvideoloadeddata",{src:t.image,texture:t})}function n(){e.emit("materialvideoended",{src:t.image,texture:t})}t&&(e.emit("materialtextureloaded",{src:t.image,texture:t}),t.image&&t.image.tagName==="VIDEO"&&(t.image.addEventListener("loadeddata",i),t.image.addEventListener("ended",n),t.addEventListener("dispose",(function(){t.image.removeEventListener("loadeddata",i),t.image.removeEventListener("ended",n)}))))}function el(e,t){return e.source===t&&(t.data instanceof HTMLCanvasElement?e.isCanvasTexture:t.data instanceof HTMLVideoElement?e.isVideoTexture:e.isTexture&&!e.isCanvasTexture&&!e.isVideoTexture)}function Do(e){var t;return(t=e.data instanceof HTMLCanvasElement?new d.CanvasTexture:e.data instanceof HTMLVideoElement?new d.VideoTexture(e.data):new d.Texture).source=e,t.needsUpdate=!0,t}var gc=/-([a-z])/g;function gi(e,t){var i;return typeof e!="string"?e:(i=(function(n,r){var o,s,a,A,l,h;for(r=r||{},o=fc(n),s=0;s<o.length;s++)(a=o[s])&&(A=a.indexOf(":"),l=a.substr(0,A).trim(),h=a.substr(A+1).trim(),r[il(l)]=h);return r})(e,t),i[""]?e:i)}function pc(e){return typeof e=="string"?e:(function(t){var i,n=0,r=0,o="";for(i in t)n++;for(i in t)o+=i+": "+t[i],r<n-1&&(o+="; "),r++;return o})(e)}function il(e){return e.replace(gc,mc)}var wi,vs,fc=(wi=[],vs=/url\([^)]+$/,function(e){var t,i="",n=0;for(wi.length=0;n<e.length;)(t=e.indexOf(";",n))===-1&&(t=e.length),i+=e.substring(n,t),vs.test(i)?(i+=";",n=t+1):(wi.push(i.trim()),i="",n=t+1);return wi});function mc(e){return e[1].toUpperCase()}var Ec=["x","y","z","w"];function Ot(e,t,i){var n,r,o=e.el;if((r=!!(n=nl(e,t,i)))===e.controllerPresent)return r;e.controllerPresent=r,r?(e.addEventListeners(),e.injectTrackedControls(n),o.emit("controllerconnected",{name:e.name,component:e})):(e.removeEventListeners(),o.emit("controllerdisconnected",{name:e.name,component:e}))}function nl(e,t,i){var n,r=e.el.sceneEl,o=r&&r.systems["tracked-controls"];return!!o&&!(!(n=o.controllers)||!n.length)&&ko(n,t,i.hand,i.index,i.iterateControllerProfiles,i.handTracking)}function ko(e,t,i,n,r,o){var s,a,A,l,h=!1;for(s=0;s<e.length;s++){if(l=(A=e[s]).profiles,o)h=A.hand;else if(r)for(a=0;a<l.length&&!(h=l[a].startsWith(t));a++);else h=l.length>0&&l[0].startsWith(t);if(h){if(A.handedness==="right"||A.handedness==="left"){if(A.handedness===i)return e[s]}else if(s===n)return e[s]}}}function Gt(e,t,i){var n,r,o,s,a;for(r in t){for(n=t[r],o=!1,a=0;a<n.length;a++)i.detail.changed[n[a]]&&(o=!0);if(o){for(s={},a=0;a<n.length;a++)s[Ec[a]]=i.detail.axis[n[a]];e.el.emit(r+"moved",s)}}}function q(e,t,i,n){var r=(n?i.mapping[n]:i.mapping).buttons[e];i.el.emit(r+t),i.updateModel&&i.updateModel(r,t)}var To=et("utils:warn");function Cc(e){return e.bind.apply(e,Array.prototype.slice.call(arguments,1))}function vc(){return To("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),Co()}function yc(){return To("`utils.isIOS` has moved to `utils.device.isIOS`"),mi()}function bc(){return To("`utils.isMobile has moved to `utils.device.isMobile`"),Ce(arguments)}function Bc(e,t,i){var n;return i&&(e=e.bind(i)),function(){var r=Date.now();(n===void 0||(n===void 0?t:r-n)>=t)&&(n=r,e.apply(null,arguments))}}function rl(e,t,i){var n,r,o;i&&(e=e.bind(i));var s=function(){n=Date.now(),e.apply(this,o),r=void 0};return function(){var a=Date.now(),A=n===void 0?t:a-n;A>=t?(clearTimeout(r),r=void 0,n=a,e.apply(null,arguments)):(r=r||setTimeout(s,t-A),o=arguments)}}function wc(e,t,i){var n;return i&&(e=e.bind(i)),function(r,o){var s=n===void 0?o:r-n;(n===void 0||s>=t)&&(n=r,e(r,s))}}function ol(e,t,i){var n;return function(){var r=this,o=arguments,s=i&&!n;clearTimeout(n),n=setTimeout((function(){n=null,i||e.apply(r,o)}),t),s&&e.apply(r,o)}}var Dt=Object.assign,Rt=rc();function Ro(e){return JSON.parse(JSON.stringify(e))}var Ht,Qe,Fo=(Ht=xo((function(){return[]})),function(e,t){var i,n,r,o,s,a;if(e===void 0||t===void 0||e===null||t===null||!(e&&t&&e.constructor===Object&&t.constructor===Object||e.constructor===Array&&t.constructor===Array))return e===t;for(i in n=Ht.use(),r=Ht.use(),n.length=0,r.length=0,e)n.push(i);for(i in t)r.push(i);if(n.length!==r.length)return Ht.recycle(n),Ht.recycle(r),!1;for(o=0;o<n.length;++o)if(s=e[n[o]],a=t[n[o]],typeof s=="object"||typeof a=="object"||Array.isArray(s)&&Array.isArray(a)){if(s===a)continue;if(!Fo(s,a))return Ht.recycle(n),Ht.recycle(r),!1}else if(s!==a)return Ht.recycle(n),Ht.recycle(r),!1;return Ht.recycle(n),Ht.recycle(r),!0}),sl=(Qe=[],function(e,t,i){var n,r,o,s,a,A,l;for(a in s=i||{},Qe.length=0,e)Qe.push(a);if(!t)return s;for(o in t)Qe.indexOf(o)===-1&&Qe.push(o);for(A=0;A<Qe.length;A++)n=e[a=Qe[A]],r=t[a],((l=n&&r&&n.constructor===Object&&r.constructor===Object)&&!Fo(n,r)||!l&&n!==r)&&(s[a]=r);return s});function Oo(e){return!e.metaKey&&document.activeElement===document.body}function Ic(e,t){t===void 0&&(t=" ");var i=new RegExp(t,"g");return(e=(e||"").replace(i,t)).split(t)}function xc(e,t){t=t||{};var i={};return Object.keys(t).forEach((function(n){e.hasAttribute(n)&&(i[n]=e.getAttribute(n))})),i}function pi(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function al(){return window.top!==window.self}function Al(e){for(var t=[],i=e.getElementsByTagName("*"),n=0,r=i.length;n<r;n++)i[n].isScene&&t.push(i[n]);return t}var qn,Qc=[li({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),li({name:"mobile-web-app-capable",content:"yes"}),li({name:"theme-color",content:"black"})],Mc=[li({name:"apple-mobile-web-app-capable",content:"yes"}),li({name:"apple-mobile-web-app-status-bar-style",content:"black"}),(qn={rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"},{tagName:"link",attributes:qn,exists:function(){return document.querySelector('link[rel="'+qn.rel+'"]')}})];function li(e){return{tagName:"meta",attributes:e,exists:function(){return document.querySelector('meta[name="'+e.name+'"]')}}}var Vt,de,ll,Lc=G(5928),Sc=G.n(Lc),Dc=We,ys="loading-screen";function Vn(e){var t=Vt.hasAttribute("embedded"),i=ll(Vt.canvas,t,Vt.maxCanvasSize,Vt.is("vr-mode"));e.aspect=i.width/i.height,e.updateProjectionMatrix(),Vt.renderer.setSize(i.width,i.height,!1)}const ke=[];var hl=di()("core:propertyTypes:warn"),eo={},kc=/[,> .[\]:]/,Tc=/url\((.+)\)/;function bt(e,t,i,n,r,o){if(e in eo)throw new Error("Property type "+e+" is already registered.");eo[e]={default:t,parse:i||Rc,stringify:n||pn,equals:r||cl,isCacheable:o!==!1}}function bs(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function Xe(e){var t,i;return typeof e!="string"?e:(i=e.match(Tc))?i[1]:e.charAt(0)==="#"?(t=document.getElementById(e.substring(1)))?t.tagName==="CANVAS"||t.tagName==="VIDEO"||t.tagName==="IMG"?t:t.getAttribute("src"):void hl('"'+e+'" asset not found.'):e}function Ze(e){return e.getAttribute?e.getAttribute("id")?"#"+e.getAttribute("id"):e.getAttribute("src"):pn(e)}function Rc(e){return e}function pn(e){return e===null?"null":e.toString()}function cl(e,t){return e===t}function Bs(e){return parseInt(e,10)}function Wn(e,t,i){return dn(e,t,i)}function Yn(e,t){if(e===null)return!0;if(typeof e!="object"||Object.keys(e).length!==t)return!1;var i=e.x,n=e.y,r=e.z,o=e.w;return!(typeof i!="number"||typeof n!="number"||t>2&&typeof r!="number"||t>3&&typeof o!="number")}bt("audio","",Xe,Ze),bt("array",[],(function(e){return Array.isArray(e)?e:e&&typeof e=="string"?e.split(",").map((function(t){return t.trim()})):[]}),(function(e){return e.join(", ")}),bs),bt("asset","",Xe,Ze),bt("boolean",!1,(function(e){return e!=="false"&&e!==!1})),bt("color","#FFF"),bt("int",0,Bs),bt("number",0,(function(e){return parseFloat(e,10)})),bt("map","",Xe,Ze),bt("model","",Xe,Ze),bt("selector",null,(function(e){return e?typeof e!="string"?e:e[0]!=="#"||kc.test(e)?document.querySelector(e):document.getElementById(e.substring(1)):null}),(function(e){return e.getAttribute?"#"+e.getAttribute("id"):pn(e)}),cl,!1),bt("selectorAll",null,(function(e){return e?typeof e!="string"?e:Array.prototype.slice.call(document.querySelectorAll(e),0):null}),(function(e){return e instanceof Array?e.map((function(t){return"#"+t.getAttribute("id")})).join(", "):pn(e)}),bs,!1),bt("src","",(function(e){return hl("`src` property type is deprecated. Use `asset` instead."),Xe(e)}),Ze),bt("string",""),bt("time",0,Bs),bt("vec2",{x:0,y:0},Wn,$i,tn),bt("vec3",{x:0,y:0,z:0},Wn,$i,tn),bt("vec4",{x:0,y:0,z:0,w:1},Wn,$i,tn);var Fc=function(e,t){return(e!=="audio"||typeof t=="string")&&!(e==="array"&&!Array.isArray(t))&&(e!=="asset"||typeof t=="string")&&(e!=="boolean"||typeof t=="boolean")&&(e!=="color"||typeof t=="string")&&(e!=="int"||typeof t=="number")&&(e!=="number"||typeof t=="number")&&(e!=="map"||typeof t=="string")&&(e!=="model"||typeof t=="string")&&(e!=="selector"||typeof t=="string"||t===null)&&(e!=="selectorAll"||typeof t=="string"||t===null)&&(e!=="src"||typeof t=="string")&&(e!=="string"||typeof t=="string")&&(e!=="time"||typeof t=="number")&&(e==="vec2"?Yn(t,2):e==="vec3"?Yn(t,3):e!=="vec4"||Yn(t,4))},Oc=eo,fn=et("core:schema:warn");function In(e){return"type"in e?typeof e.type=="string":"default"in e}function Ei(e,t){var i;if(In(e))return io(e,t);for(i in e)e[i]=io(e[i],t);return e}function io(e,t){var i,n,r=e.default,o=e.type;return e.type?e.type==="bool"?o="boolean":e.type==="float"&&(o="number"):o=r===void 0||typeof r!="boolean"&&typeof r!="number"?Array.isArray(r)?"array":"string":typeof r,(n=Oc[o])||fn("Unknown property type for component `"+t+"`: "+o),i=!!e.parse,e.parse=e.parse||n.parse,e.stringify=e.stringify||n.stringify,e.equals=e.equals||n.equals,e.isCacheable=e.isCacheable===!0||n.isCacheable,e.type=o,"default"in e?i||Fc(o,r)||fn("Default value `"+r+"` does not match type `"+o+"` in component `"+t+"`"):e.default=n.default,e}var $e,dl=($e=[],function(e,t,i,n,r){var o,s,a,A;for(s in $e.length=0,i?e:t)i&&e[s]===void 0||$e.push(s);if(e===null||typeof e!="object")return e;for(s in e)e[s]===void 0||t[s]||r||fn("Unknown property `"+s+"` for component/system `"+n+"`.");for(o=0;o<$e.length;o++){if(a=t[s=$e[o]],A=e[s],!t[s])return;e[s]=xn(A,a)}return e});function xn(e,t,i){return e!=null&&e!==""||(e=t.default,Array.isArray(e)&&(e=e.slice())),t.parse(e,t.default,i)}function ul(e,t){var i,n,r,o,s={};for(i in e)n=t[i],typeof(o=r=e[i])=="object"&&(o=Uo(r,n),n||fn("Unknown component property: "+i)),o!==void 0&&(s[i]=o);return s}function Uo(e,t){return typeof e!="object"?e:t&&e!==null?t.stringify(e):JSON.stringify(e)}var gt={},Ai=xn,gl=Ei,Uc=In,_c=ul,Pc=Uo,Kn=We,hi=et("core:component:warn"),Nc=document.currentScript,Gc=new RegExp("[A-Z]+"),pl={},jc=Object.freeze({}),Fe=[],Hc={get:function(e,t){return e.getComputedPropertyValue(t)},set:function(e,t,i){return t in e.schema?e.recomputeProperty(t,i):i!==void 0&&e.handleUnknownProperty(t,i),!0}},fi=function(e,t,i){var n=this;if(this.sceneOnly&&!e.isScene)throw new Error("Component `"+this.name+"` can only be applied to <a-scene>");if(i&&!this.multiple)throw new Error("Trying to initialize multiple components of type `"+this.name+"`. There can only be one component of this type per entity.");this.el=e,this.id=i,this.attrName=this.name+(i?"__"+i:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=pl[this.name];var r=this.events;this.events={},(function(o,s){var a;for(a in s)o.events[a]=s[a].bind(o)})(this,r),this.attrValue=void 0,this.isObjectBased?(this.data=this.objectPool.use(),ui(this.data,this.schema),this.oldData=this.objectPool.use(),ui(this.oldData,this.schema),this.attrValueProxy=new Proxy(this,Hc)):(this.data=void 0,this.oldData=void 0,this.attrValueProxy=void 0),this.deferUnknownPropertyWarnings=!!this.updateSchema,this.throttledEmitComponentChanged=rl((function(){e.emit("componentchanged",n.evtDetail,!1)}),200),this.updateProperties(t,!0)};fi.prototype={schema:{},init:function(){},events:{},update:function(e){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},stringify:function(e){var t=this.schema;return typeof e=="string"?e:this.isSingleProperty?Pc(e,t):(e=_c(e,t),Kn.stringify(e))},flushToDOM:function(e){var t=e?this.data:this.attrValue;t!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(t))},updateProperties:function(e,t){var i=this.el;this.updateData(e,t),(i.hasLoaded||i.isLoading)&&(this.initialized?this.callUpdateHandler():this.initComponent())},initComponent:function(){var e,t=this.el;t.initializingComponents[this.name]||(t.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete t.initializingComponents[this.name],e=this.isObjectBased?jc:void 0,this.dataChanged=!1,this.storeOldData(),this.update(e),t.isPlaying&&this.play(),t.emit("componentinitialized",this.evtDetail,!1))},updateData:function(e,t){this.isSingleProperty?this.recomputeProperty(void 0,e):(t?(Qo(this.attrValue),this.recomputeData(e),this.schemaChangeRequired=!!this.updateSchema):typeof e=="string"?Kn.parse(e,this.attrValueProxy):Dt(this.attrValueProxy,e),this.updateSchemaIfNeeded(e))},updateSchemaIfNeeded:function(e){if(this.schemaChangeRequired&&this.updateSchema)for(var t in Fe.length=0,this.updateSchema(this.data),ui(this.data,this.schema),this.recomputeData(e),this.schemaChangeRequired=!1,this.attrValue)this.attrValue[t]!==void 0&&Fe.indexOf(t)===-1&&(t in this.schema||hi("Unknown property `"+t+"` for component `"+this.name+"`."));for(var i=0;i<Fe.length;i++)hi("Unknown property `"+Fe[i]+"` for component `"+this.name+"`.");Fe.length=0},callUpdateHandler:function(){if(this.isPositionRotationScale||this.dataChanged){this.dataChanged=!1;var e=this.oldData;this.oldDataInUse=!0,this.update(e),e!==this.oldData&&this.objectPool.recycle(e),this.oldDataInUse=!1,this.storeOldData(),this.throttledEmitComponentChanged()}},handleMixinUpdate:function(){this.recomputeData(),this.updateSchemaIfNeeded(),this.callUpdateHandler()},resetProperty:function(e){(this.isSingleProperty||e in this.schema)&&(e?this.attrValue[e]=void 0:(this.isObjectBased&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0),this.recomputeProperty(e,void 0),this.updateSchemaIfNeeded(),this.callUpdateHandler())},extendSchema:function(e){var t;t=Dt({},gt[this.name].schema),Dt(t,e),this.schema=gl(t),this.el.emit("schemachanged",this.evtDetail)},getComputedPropertyValue:function(e){var t=this.el.mixinEls,i=this.attrValue&&e?this.attrValue[e]:this.attrValue;if(i!==void 0)return i;for(var n=t.length-1;n>=0;n--){var r=t[n].getAttribute(this.attrName);if(r!==null&&(!e||e in r))return e?r[e]:r}return e?this.schema[e].default:this.schema.default},recomputeProperty:function(e,t){var i=e?this.schema[e]:this.schema;if(t!=null){this.attrValue===void 0&&this.isObjectBased&&(this.attrValue=this.objectPool.use());var n=e?this.attrValue[e]:this.attrValue;typeof(n=i.isCacheable?Ai(t,i,n):t)=="string"&&(n=t===""?void 0:t),e?this.attrValue[e]=n:this.attrValue=n}this.oldDataInUse&&(this.oldData=this.objectPool.use(),ui(this.oldData,this.schema),this.storeOldData(),this.oldDataInUse=!1);var r=e?this.oldData[e]:this.oldData,o=e?this.data[e]:this.data,s=Ai(this.getComputedPropertyValue(e),i,o);return i.type!=="array"||e||(s=Ro(s)),i.equals(s,r)||(this.dataChanged=!0,i.schemaChange&&(this.schemaChangeRequired=!0)),e?this.data[e]=s:this.data=s,s},handleUnknownProperty:function(e,t){this.attrValue===void 0&&(this.attrValue=this.objectPool.use()),this.attrValue[e]=t,this.deferUnknownPropertyWarnings?Fe.push(e):this.silenceUnknownPropertyWarnings||hi("Unknown property `"+e+"` for component `"+this.name+"`.")},storeOldData:function(){var e;if(this.isObjectBased)if(this.isSingleProperty)this.oldData=Ai(this.data,this.schema,this.oldData);else for(e in this.schema)this.data[e]!==void 0&&(this.data[e]&&typeof this.data[e]=="object"?this.oldData[e]=Ai(this.data[e],this.schema[e],this.oldData[e]):this.oldData[e]=this.data[e]);else this.oldData=this.data},recomputeData:function(e){var t;if(this.isSingleProperty)this.recomputeProperty(void 0,e);else{for(t in this.schema)this.attrValueProxy[t]=void 0;e&&typeof e=="object"?Dt(this.attrValueProxy,e):typeof e=="string"&&Kn.parse(e,this.attrValueProxy)}},eventsAttach:function(){var e;for(e in this.eventsDetach(),this.events)this.el.addEventListener(e,this.events[e])},eventsDetach:function(){var e;for(e in this.events)this.el.removeEventListener(e,this.events[e])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.data),this.objectPool.recycle(this.oldData),this.attrValue=this.data=this.oldData=this.attrValueProxy=void 0}};var fl={};function _(e,t){var i,n,r,o,s,a={};if(document.currentScript&&document.currentScript!==Nc&&ke.forEach((function(l){l.hasLoaded||document.currentScript.compareDocumentPosition(l)!==Node.DOCUMENT_POSITION_FOLLOWING&&(hi("The component `"+e+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(fl[e]=!0))})),Gc.test(e)===!0&&hi("The component name `"+e+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+e.toLowerCase()+"`"),e.indexOf("__")!==-1)throw new Error("The component name `"+e+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(t).forEach((function(l){a[l]={value:t[l],writable:!0}})),gt[e])throw new Error("The component `"+e+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");((i=function(l,h,c){fi.call(this,l,h,c)}).prototype=Object.create(fi.prototype,a)).name=e,i.prototype.isPositionRotationScale=e==="position"||e==="rotation"||e==="scale",i.prototype.constructor=i,i.prototype.system=jr&&oe[e],i.prototype.play=(o=i.prototype.play,function(){var l=this.el.sceneEl,h=this.el.isPlaying&&!this.isPlaying;this.initialized&&h&&(o.call(this),this.isPlaying=!0,this.eventsAttach(),ws(this)&&l.addBehavior(this))}),i.prototype.pause=(s=i.prototype.pause,function(){var l=this.el.sceneEl;this.isPlaying&&(s.call(this),this.isPlaying=!1,this.eventsDetach(),ws(this)&&l.removeBehavior(this))}),n=Dt(gl(i.prototype.schema,i.prototype.name)),i.prototype.isSingleProperty=r=Uc(i.prototype.schema),i.prototype.isObjectBased=!r||r&&(Is(n.default)||Is(Ai(void 0,n))),pl[e]=xo(),gt[e]={Component:i,dependencies:i.prototype.dependencies,before:i.prototype.before,after:i.prototype.after,isSingleProperty:i.prototype.isSingleProperty,isObjectBased:i.prototype.isObjectBased,multiple:i.prototype.multiple,sceneOnly:i.prototype.sceneOnly,name:e,schema:n,stringify:i.prototype.stringify};for(var A=0;A<ke.length;A++)ke[A].emit("componentregistered",{name:e},!1);return i}function ws(e){return e.tick||e.tock}function Is(e){return e&&e.constructor===Object&&!(e instanceof window.HTMLElement)}var mn=!1;function no(){mn||(mn=!0,setTimeout((function(){document.dispatchEvent(new CustomEvent("aframeready"))})))}var zc=We,oe={},En=function(e){var t=Gr&&gt[this.name];this.el=e,this.sceneEl=e,t&&(t.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};function Nt(e,t){var i,n,r={},o=Al(document);if(Object.keys(t).forEach((function(s){r[s]={value:t[s],writable:!0}})),oe[e])throw new Error("The system `"+e+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");if(n=function(s){En.call(this,s)},(n.prototype=Object.create(En.prototype,r)).name=e,n.prototype.constructor=n,n.prototype.schema=Dt(Ei(n.prototype.schema)),oe[e]=n,mn)for(i=0;i<o.length;i++)o[i].initSystem(e)}En.prototype={schema:{},init:function(){},update:function(e){},updateProperties:function(e){var t=this.data;Object.keys(this.schema).length!==0&&(this.buildData(e),this.update(t))},buildData:function(e){var t=this.schema;Object.keys(t).length!==0&&(e=e||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),In(t)?this.data=xn(e,t):this.data=dl(zc.parse(e)||{},t,!1,this.name))},tick:void 0,tock:void 0,play:function(){},pause:function(){}};var Jn=et("core:a-node:warn"),ro={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function qc(e){return e.tagName.toLowerCase()in ro||e.isANode}class wt extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isANode=!0,this.mixinEls=[]}connectedCallback(){mn?this.doConnectedCallback():document.addEventListener("aframeready",this.connectedCallback.bind(this))}doConnectedCallback(){var t;this.sceneEl=this.closestScene(),this.sceneEl||Jn("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(t=this.getAttribute("mixin"))&&this.updateMixins(t)}attributeChangedCallback(t,i,n){n!==this.computedMixinStr&&(t!=="mixin"||this.isMixin||this.updateMixins(n,i))}closestScene(){for(var t=this;t&&!t.isScene;)t=t.parentElement;return t}closest(t){for(var i=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,n=this;n&&!i.call(n,t);)n=n.parentElement;return n}disconnectedCallback(){this.hasLoaded=!1}load(t,i){var n,r=this;this.hasLoaded||(i=i||qc,n=this.getChildren().filter(i).map((function(o){return new Promise((function(s,a){if(o.hasLoaded)return s();o.addEventListener("loaded",s),o.addEventListener("error",a)}))})),Promise.allSettled(n).then((function(o){o.forEach((function(s){s.status==="rejected"&&Jn("Rendering scene with errors on node: ",s.reason.target)})),r.isLoading=!0,r.setupMutationObserver(),t&&t(),r.isLoading=!1,r.hasLoaded=!0,r.emit("loaded-private",void 0,!1),r.emit("loaded",void 0,!1)})))}setupMutationObserver(){var t=this;new MutationObserver((function(i){var n;for(n=0;n<i.length;n++)if(i[n].type==="attributes"){var r=i[n].attributeName,o=window.HTMLElement.prototype.getAttribute.call(t,r),s=i[n].oldValue;t.attributeChangedCallback(r,s,o)}})).observe(this,{attributes:!0,attributeOldValue:!0})}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(t,i){var n,r,o,s=wt.newMixinIdArray,a=wt.oldMixinIdArray,A=wt.mixinIds;for(s.length=0,a.length=0,r=t?Ae(t.trim(),/\s+/):s,o=i?Ae(i.trim(),/\s+/):a,A.newMixinIds=r,A.oldMixinIds=o,n=0;n<o.length;n++)r.indexOf(o[n])===-1&&this.unregisterMixin(o[n]);for(this.computedMixinStr="",this.mixinEls.length=0,n=0;n<r.length;n++)this.registerMixin(r[n]);return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),r.length===0&&window.HTMLElement.prototype.removeAttribute.call(this,"mixin"),A}registerMixin(t){var i,n,r,o=document.getElementById(t);if(o){if(r=o.getAttribute("mixin"))for(i=Ae(r.trim(),/\s+/),n=0;n<i.length;n++)this.registerMixin(i[n]);this.computedMixinStr=this.computedMixinStr+" "+o.id,this.mixinEls.push(o)}else Jn("No mixin was found with id `%s`",t)}setAttribute(t,i){t==="mixin"&&this.updateMixins(i),window.HTMLElement.prototype.setAttribute.call(this,t,i)}unregisterMixin(t){var i,n=this.mixinEls;for(i=0;i<n.length;++i)if(t===n[i].id){n.splice(i,1);break}}emit(t,i,n,r){var o=wt.evtData;n===void 0&&(n=!0),o.bubbles=!!n,o.detail=i,r&&(o=Dt({},r,o)),this.dispatchEvent(new CustomEvent(t,o))}}wt.evtData={},wt.newMixinIdArray=[],wt.oldMixinIdArray=[],wt.mixinIds={},customElements.define("a-node",wt);var Vc=et("core:a-entity:debug"),Xn=et("core:a-entity:warn"),Cn="__",Zn=["position","rotation","scale","visible"],Wc={once:!0};class yt extends wt{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new d.Group,this.object3D.rotation.order="YXZ",this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(t,i,n){var r=this.components[t];super.attributeChangedCallback(),r&&r.justInitialized&&n===""?delete r.justInitialized:(r||n!==null)&&this.setEntityAttribute(t,i,n)}doConnectedCallback(){var t,i,n=this;super.doConnectedCallback(),i=this.sceneEl,this.addToParent(),this.isScene||(i?!(t=i.querySelector("a-assets"))||t.hasLoaded?this.load():t.addEventListener("loaded",(function(){n.load()})):this.load())}disconnectedCallback(){var t;if(this.parentEl){for(t in this.components)this.removeComponent(t,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(t){return this.object3DMap[t]}setObject3D(t,i){var n,r=this;if(!(i instanceof d.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");(n=this.getObject3D(t))&&this.object3D.remove(n),i.el=this,i.children.length&&i.traverse((function(o){o.el=r})),this.object3D.add(i),this.object3DMap[t]=i,this.emit("object3dset",{object:i,type:t})}removeObject3D(t){var i=this.getObject3D(t);i?(this.object3D.remove(i),delete this.object3DMap[t],this.emit("object3dremove",{type:t})):Xn("Tried to remove `Object3D` of type:",t,"which was not defined.")}getOrCreateObject3D(t,i){var n=this.getObject3D(t);return!n&&i&&(n=new i,this.setObject3D(t,n)),Xn("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),n}add(t){if(!t.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(t.object3D),this.emit("child-attached",{el:t})}addToParent(){var t=this.parentEl=this.parentNode;t&&t.add&&!this.attachedToParent&&(t.add(this),this.attachedToParent=!0)}removeFromParent(){var t=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,t.emit("child-detached",{el:this})}load(){var t=this;!this.hasLoaded&&this.parentEl&&super.load.call(this,(function(){t.parentEl&&(t.updateComponents(),(t.isScene||t.parentEl.isPlaying)&&t.play())}))}remove(t){t?this.object3D.remove(t.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var t=this.children,i=[],n=0;n<t.length;n++){var r=t[n];r instanceof yt&&i.push(r)}return i}initComponent(t,i,n){var r,o,s,a;a=(s=Ae(t,Cn))[0],o=s.length>2?s.slice(1).join("__"):s[1],gt[a]&&(xs(this,t)||i!==void 0||n)&&(t in this.components||(this.initComponentDependencies(a),r=new gt[a].Component(this,i,o),this.isPlaying&&r.play(),this.hasAttribute(t)||(r.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,t,"")),Vc("Component initialized: %s",t)))}initComponentDependencies(t){var i,n;if(gt[t]&&(i=gt[t].dependencies))for(n=0;n<i.length;n++)this.initComponent(i[n],window.HTMLElement.prototype.getAttribute.call(this,i[n])||void 0,!0)}removeComponent(t,i){var n;(n=this.components[t])&&(n.initialized?(n.pause(),n.remove(),i&&(n.destroy(),delete this.components[t],this.hasAttribute(t)&&window.HTMLElement.prototype.removeAttribute.call(this,t)),this.emit("componentremoved",n.evtDetail,!1)):this.addEventListener("componentinitialized",(function r(o){o.detail.name===t&&(this.removeComponent(t,i),this.removeEventListener("componentinitialized",r))})))}updateComponents(){var t,i,n,r,o,s,a=this.componentsToUpdate;if(this.hasLoaded||this.isLoading){for(n=0;n<this.mixinEls.length;n++)for(r in this.mixinEls[n].componentCache)$n(r)&&(a[r]=!0);if(this.getExtraComponents)for(r in i=this.getExtraComponents())$n(r)&&(a[r]=!0);for(n=0;n<this.attributes.length;++n)r=this.attributes[n].name,Zn.indexOf(r)===-1&&$n(r)&&(a[r]=!0);for(n=0;n<Zn.length;n++)r=Zn[n],this.hasAttribute(r)&&this.updateComponent(r,this.getDOMAttribute(r));for(r in a)o=this.getDOMAttribute(r),t=(s=i&&i[r])?s.constructor===Object?Dt(s,gi(o||{})):o||s:o,this.updateComponent(r,t),delete a[r]}}updateComponent(t,i,n){var r=this.components[t];if(r)return i!==null||xs(this,t)?void r.updateProperties(i,n):void this.removeComponent(t,!0);this.initComponent(t,i,!1)}removeAttribute(t,i){var n=this.components[t];n&&i===void 0&&this.removeComponent(t,!0),n&&i!==void 0?n.resetProperty(i):(t==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,t))}play(){var t,i,n;if(!this.isPlaying&&(this.hasLoaded||this.isLoading)){for(n in this.isPlaying=!0,this.components)this.components[n].play();for(t=this.getChildEntities(),i=0;i<t.length;i++)t[i].play();this.emit("play")}}pause(){var t,i,n;if(this.isPlaying){for(n in this.isPlaying=!1,this.components)this.components[n].pause();for(t=this.getChildEntities(),i=0;i<t.length;i++)t[i].pause();this.emit("pause")}}setEntityAttribute(t,i,n){if(gt[t]||this.components[t])this.updateComponent(t,n);else if(t==="mixin"){if(n===this.computedMixinStr)return;this.mixinUpdate(n,i)}}mixinUpdate(t,i,n){var r,o,s,a,A=yt.componentsUpdated,l=this;if(n||(i=i||this.getAttribute("mixin")),this.hasLoaded){for(s=this.updateMixins(t,i),A.length=0,a=0;a<this.mixinEls.length;a++)for(r in this.mixinEls[a].componentCache)A.indexOf(r)===-1&&(this.components[r]?this.components[r].handleMixinUpdate():this.initComponent(r,null),A.push(r));for(a=0;a<s.oldMixinIds.length;a++)if(o=document.getElementById(s.oldMixinIds[a]))for(r in o.componentCache)A.indexOf(r)===-1&&this.components[r]&&(this.getDOMAttribute(r)?this.components[r].handleMixinUpdate():this.removeComponent(r,!0))}else this.addEventListener("loaded-private",(function(){l.mixinUpdate(t,i,!0)}),Wc)}setAttribute(t,i,n){var r,o,s,a,A,l=yt.singlePropUpdate;if(s=(a=t.indexOf(Cn))>0?t.substring(0,a):t,!gt[s])return t==="mixin"&&this.mixinUpdate(i),void super.setAttribute.call(this,t,i);if(!this.components[t]&&this.hasAttribute(t)&&this.updateComponent(t,window.HTMLElement.prototype.getAttribute.call(this,t)),n!==void 0&&typeof i=="string"&&i.length>0&&typeof gi(i)=="string"){for(A in l)delete l[A];(r=l)[i]=n,o=!1}else r=i,o=n===!0;this.updateComponent(t,r,o),this.sceneEl&&this.sceneEl.getAttribute("debug")&&this.components[t].flushToDOM()}flushToDOM(t){var i,n,r,o=this.components,s=this.children;for(r in o)o[r].flushToDOM();if(t)for(n=0;n<s.length;++n)(i=s[n]).flushToDOM&&i.flushToDOM(t)}getAttribute(t){var i,n,r,o;return t==="position"?this.object3D.position:t==="rotation"?(n=d.MathUtils.radToDeg,r=this.object3D.rotation,(o=this.rotationObj).x=n(r.x),o.y=n(r.y),o.z=n(r.z),o):t==="scale"?this.object3D.scale:t==="visible"?this.object3D.visible:(i=this.components[t])?i.data:window.HTMLElement.prototype.getAttribute.call(this,t)}getDOMAttribute(t){var i=this.components[t];return i?i.attrValue:window.HTMLElement.prototype.getAttribute.call(this,t)}addState(t){this.is(t)||(this.states.push(t),this.emit("stateadded",t))}removeState(t){var i=this.states.indexOf(t);i!==-1&&(this.states.splice(i,1),this.emit("stateremoved",t))}is(t){return this.states.indexOf(t)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var t;if(this.parentNode)Xn("Entity can only be destroyed if detached from scenegraph.");else for(t in this.components)this.components[t].destroy()}}function xs(e,t){return!(!e.components[t]||!e.components[t].attrValue)||(function(i,n){var r,o=!1;for(r=0;r<n.length&&!(o=n[r].hasAttribute(i));++r);return o})(t,e.mixinEls)}function $n(e){return e.indexOf(Cn)!==-1&&(e=Ae(e,Cn)[0]),!!gt[e]}function Yc(e){if(e.data&&e.data.type==="vr")switch(e.data.data){case"enter":this.enterVR();break;case"exit":this.exitVR()}}yt.componentsUpdated=[],yt.singlePropUpdate={},customElements.define("a-entity",yt),mi()&&window.addEventListener("orientationchange",(function(){document.documentElement.style.height="initial",setTimeout((function(){document.documentElement.style.height="100%",setTimeout((function(){window.scrollTo(0,1)}),500)}),500)}));var tr=et("core:a-scene:warn"),Kc=mi(),Qs=Ce(),Jc=bn;class ml extends yt{constructor(){var t;super(),(t=this).clock=new d.Clock,t.isIOS=Kc,t.isMobile=Qs,t.hasWebXR=Jc,t.isAR=!1,t.isScene=!0,t.object3D=new d.Scene,t.resize=t.resize.bind(t),t.render=t.render.bind(t),t.systems={},t.systemNames=[],t.time=t.delta=0,t.usedOfferSession=!1,t.componentOrder=[],t.behaviors={},t.hasLoaded=!1,t.isPlaying=!1,t.originalHTML=t.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}doConnectedCallback(){var t=this,i=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("xr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.doConnectedCallback(),(function(n){var r;function o(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||n.exitVR(),document.activeElement.blur(),document.body.focus()}(r=document.createElement("canvas")).classList.add("a-canvas"),r.dataset.aframeCanvas=!0,n.appendChild(r),document.addEventListener("fullscreenchange",o),document.addEventListener("mozfullscreenchange",o),document.addEventListener("webkitfullscreenchange",o),document.addEventListener("MSFullscreenChange",o),r.addEventListener("touchmove",(function(s){s.preventDefault()}),{passive:!1}),n.canvas=r,n.emit("render-target-loaded",{target:r}),setTimeout(n.resize.bind(n),0)})(this),this.setupRenderer(),(function(n,r){ll=r;var o,s,a,A,l,h,c,g,p,E,m=(Vt=n).hasAttribute(ys)?Dc.parse(Vt.getAttribute(ys)):void 0,C=m&&m.dotsColor||"white",y=m&&m.backgroundColor||"#24CAFF";(m===void 0||m.enabled==="true"||m.enabled===void 0)&&(o=new d.Scene,s=new d.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),a=new d.MeshBasicMaterial({color:C}),A=new d.Mesh(s,a),l=A.clone(),h=A.clone(),c=new d.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),g=new d.Clock,p=0,E=function(){Vt.renderer.render(o,c),p=g.getElapsedTime()%4,A.visible=p>=1,l.visible=p>=2,h.visible=p>=3},o.background=new d.Color(y),o.add(c),A.position.set(-1,0,-15),l.position.set(0,0,-15),h.position.set(1,0,-15),c.add(A),c.add(l),c.add(h),(de=document.createElement("div")).className="a-loader-title",de.innerHTML=document.title,de.style.display="none",de.setAttribute(Bt,""),Vt.appendChild(de),setTimeout((function(){Vt.hasLoaded||(Vn(c),de.style.display="block",window.addEventListener("resize",(function(){Vn(c)})),Vt.renderer.setAnimationLoop(E))}),200))})(this,Ss),this.resize(),i||this.addFullScreenStyles(),al()&&window.addEventListener("message",Yc.bind(this)),(function(n){var r,o=document.head,s=o.querySelector("script"),a=[];return Qc.forEach(A),n.isIOS&&Mc.forEach(A),a;function A(l){l&&!l.exists()&&(r=(function(h){if(h&&h.tagName){var c=document.createElement(h.tagName);return c.setAttribute(Bt,""),Dt(c,h.attributes)}})(l),r&&(s?s.parentNode.insertBefore(r,s):o.appendChild(r),a.push(r)))}})(this),(function(n){if(n.isMobile){var r=n.wakelock=new(Sc());n.addEventListener("enter-vr",(function(){r.request()})),n.addEventListener("exit-vr",(function(){r.release()}))}})(this),this.enterVRBound=function(){t.enterVR()},this.exitVRBound=function(){t.exitVR()},window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",(function(){t.attachedCallbackPostCamera()})),this.initSystems(),this.componentOrder=Ms(gt,this.componentOrder),this.addEventListener("componentregistered",(function(){t.componentOrder=Ms(gt,t.componentOrder)})),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",(function(){t.enterVR()}))}attachedCallbackPostCamera(){var t=this;window.addEventListener("load",void 0),window.addEventListener("resize",(function(){t.isIOS?setTimeout(t.resize,100):t.resize()})),this.play(),ke.push(this)}initSystems(){var t;for(t in this.initSystem("camera"),oe)t!=="camera"&&this.initSystem(t)}initSystem(t){this.systems[t]||(this.systems[t]=new oe[t](this),this.systemNames.push(t))}disconnectedCallback(){var t=ke.indexOf(this);super.disconnectedCallback(),ke.splice(t,1),window.removeEventListener("sessionend",this.resize),this.removeFullScreenStyles(),this.renderer.dispose()}addBehavior(t){var i,n,r=this.behaviors[t.name];for(n in r||(r=this.behaviors[t.name]={tick:{inUse:!1,array:[],markedForRemoval:[]},tock:{inUse:!1,array:[],markedForRemoval:[]}}),r)if(t[n]){if((i=r[n]).inUse){var o=i.markedForRemoval.indexOf(t);o!==-1&&i.markedForRemoval.splice(o,1)}i.array.indexOf(t)===-1&&i.array.push(t)}}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return Co()}enterAR(){var t;if(!this.hasWebXR)throw t="Failed to enter AR mode, WebXR not supported.",new Error(t);if(!vo())throw t="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(t);return this.enterVR(!0)}enterVR(t,i){var n,r=this,o=r.renderer.xr;if(i&&(!navigator.xr||!navigator.xr.offerSession))return Promise.resolve("OfferSession is not supported.");if(r.usedOfferSession&&i)return Promise.resolve("OfferSession was already called.");if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var s=r.getAttribute("renderer");if(o.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var a=this.sceneEl.systems.webxr.sessionReferenceSpaceType;o.setReferenceSpaceType(a);var A=t?"immersive-ar":"immersive-vr";return n=this.sceneEl.systems.webxr.sessionConfiguration,new Promise((function(h,c){var g=i?navigator.xr.offerSession.bind(navigator.xr):navigator.xr.requestSession.bind(navigator.xr);r.usedOfferSession|=i,g(A,n).then((function(p){i&&(r.usedOfferSession=!1),o.layersEnabled=n.requiredFeatures.indexOf("layers")!==-1,o.setSession(p).then((function(){o.setFoveation(s.foveationLevel),r.xrSession=p,r.systems.renderer.setWebXRFrameRate(p),p.addEventListener("end",r.exitVRBound),l(h)}))}),(function(p){c(new Error("Failed to enter "+(A==="immersive-ar"?"AR":"VR")+" mode (`requestSession`)",{cause:p}))}))}))}throw new Error("Failed to enter "+(t?"AR":"VR")+" no WebXR")}return l(),Promise.resolve();function l(h){var c;t?r.addState("ar-mode"):r.addState("vr-mode"),r.emit("enter-vr",{target:r}),!r.hasWebXR&&r.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),r.addFullScreenStyles(),r.isMobile||r.checkHeadsetConnected()||((c=r.canvas).requestFullscreen||c.webkitRequestFullscreen||c.mozRequestFullScreen||c.msRequestFullscreen).apply(c,[{navigationUI:"hide"}]),r.resize(),h&&h()}}exitVR(){var t=this,i=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(i.enabled=!1,!this.hasWebXR)throw Error("Failed to exit VR - no WebXR");this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then((function(){}),(function(){})),this.xrSession=void 0}else(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen());return t.removeState("vr-mode"),t.removeState("ar-mode"),t.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),t.hasAttribute("embedded")&&t.removeFullScreenStyles(),t.resize(),t.isIOS&&$A(t.canvas),t.renderer.setPixelRatio(window.devicePixelRatio),t.emit("exit-vr",{target:t}),Promise.resolve()}getAttribute(t){var i=this.systems[t];return i?i.data:yt.prototype.getAttribute.call(this,t)}getDOMAttribute(t){var i=this.systems[t];return i?i.data:yt.prototype.getDOMAttribute.call(this,t)}setAttribute(t,i,n){if(oe[t]){wt.prototype.setAttribute.call(this,t,i);var r=this.systems[t];r&&r.updateProperties(i)}else yt.prototype.setAttribute.call(this,t,i,n)}removeBehavior(t){var i,n,r,o=this.behaviors[t.name];for(n in o)t[n]&&(r=(i=o[n]).array.indexOf(t))!==-1&&(i.inUse?i.markedForRemoval.indexOf(t)===-1&&i.markedForRemoval.push(t):(i.array[r]=i.array[i.array.length-1],i.array.pop()))}resize(){var t,i,n=this.camera,r=this.canvas,o=this.renderer.xr.isPresenting;t=this.renderer.xr.enabled&&o,!n||!r||this.is("vr-mode")&&(this.isMobile||t)||(i=Ss(r,this.getAttribute("embedded")&&!this.is("vr-mode"),this.maxCanvasSize,this.is("vr-mode")),n.aspect=i.width/i.height,n.updateProjectionMatrix(),this.renderer.setSize(i.width,i.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var t,i,n,r=this;n={alpha:!0,antialias:!Qs,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:-1,width:-1},this.hasAttribute("renderer")&&((i=gi(this.getAttribute("renderer"))).precision&&(n.precision=i.precision+"p"),i.antialias&&i.antialias!=="auto"&&(n.antialias=i.antialias==="true"),i.logarithmicDepthBuffer&&i.logarithmicDepthBuffer!=="auto"&&(n.logarithmicDepthBuffer=i.logarithmicDepthBuffer==="true"),i.alpha&&(n.alpha=i.alpha==="true"),i.stencil&&(n.stencil=i.stencil==="true"),i.multiviewStereo&&(n.multiviewStereo=i.multiviewStereo==="true"),this.maxCanvasSize={width:i.maxCanvasWidth?parseInt(i.maxCanvasWidth):this.maxCanvasSize.width,height:i.maxCanvasHeight?parseInt(i.maxCanvasHeight):this.maxCanvasSize.height});var o=["WebGLRenderer","WebGPURenderer"].find((function(s){return d[s]}));(t=this.renderer=new d[o](n)).xr.setPoseTarget||(t.xr.setPoseTarget=function(){}),t.setPixelRatio(window.devicePixelRatio),this.camera&&t.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",(function(){t.xr.setPoseTarget(r.camera.el.object3D)}))}play(){var t=this,i=this;this.renderStarted?yt.prototype.play.call(this):(this.addEventListener("loaded",(function(){var n=this.renderer;yt.prototype.play.call(this),i.renderStarted||(i.resize(),i.renderer&&(window.performance&&window.performance.mark("render-started"),window.removeEventListener("resize",Vn),de&&(de.style.display="none"),n.setAnimationLoop(this.render),i.renderStarted=!0,i.emit("renderstart")))})),setTimeout((function(){yt.prototype.load.call(t)})))}updateComponent(t){t in oe||yt.prototype.updateComponent.apply(this,arguments)}tick(t,i){var n,r=this.systems;for(this.callComponentBehaviors("tick",t,i),n=0;n<this.systemNames.length;n++)r[this.systemNames[n]].tick&&r[this.systemNames[n]].tick(t,i)}tock(t,i,n){var r,o=this.systems;for(this.callComponentBehaviors("tock",t,i),r=0;r<this.systemNames.length;r++)o[this.systemNames[r]].tock&&o[this.systemNames[r]].tock(t,i,n)}render(t,i){var n=this.renderer;this.frame=i,this.delta=1e3*this.clock.getDelta(),this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta);var r=null;if(this.is("ar-mode")&&(r=this.object3D.background,this.object3D.background=null),n.render(this.object3D,this.camera),r&&(this.object3D.background=r),this.isPlaying){var o=n.xr.isPresenting?n.xr.getCamera():this.camera;this.tock(this.time,this.delta,o)}}callComponentBehaviors(t,i,n){for(var r,o=0;o<this.componentOrder.length;o++){var s=this.behaviors[this.componentOrder[o]];if(s){var a=s[t];for(a.inUse=!0,r=0;r<a.array.length;r++)a.array[r].isPlaying&&a.array[r][t](i,n);for(a.inUse=!1,r=0;r<a.markedForRemoval.length;r++)this.removeBehavior(a.markedForRemoval[r]);a.markedForRemoval.length=0}}}}function Ms(e,t){var i,n,r={},o=t||[];for(n in o.length=0,e){var s=e[n];if(s!==void 0){var a=s.before?s.before.slice(0):[],A=s.after?s.after.slice(0):[];r[n]={before:a,after:A,visited:!1,done:!1}}}for(n in r)for(i=0;i<r[n].before.length;i++){var l=r[n].before[i];l in r?r[l].after.push(n):tr("Invalid ordering constraint, no component named `"+l+"` referenced by `"+n+"`")}function h(c){if(c in r&&!r[c].done)if(r[c].visited)tr("Cycle detected, ignoring one or more before/after constraints. The resulting order might be incorrect");else{r[c].visited=!0;for(var g=0;g<r[c].after.length;g++){var p=r[c].after[g];p in r||tr("Invalid before/after constraint, no component named `"+p+"` referenced in `"+c+"`"),h(p)}r[c].done=!0,o.push(c)}}for(n in r)r[n].done||h(n);return o}function Ls(e,t){var i,n=window.devicePixelRatio;return!t||t.width===-1&&t.height===-1||e.width*n<t.width&&e.height*n<t.height||(i=e.width/e.height,e.width*n>t.width&&t.width!==-1&&(e.width=Math.round(t.width/n),e.height=Math.round(t.width/i/n)),e.height*n>t.height&&t.height!==-1&&(e.height=Math.round(t.height/n),e.width=Math.round(t.height*i/n))),e}function Ss(e,t,i,n){return e.parentElement?t?Ls({height:e.parentElement.offsetHeight,width:e.parentElement.offsetWidth},i):(function(r,o){var s;return s={height:document.body.offsetHeight,width:document.body.offsetWidth},o?s:Ls(s,r)})(i,n):{height:0,width:0}}customElements.define("a-scene",ml);var Xc=Ei,ve={},_o=[],oo=function(){};function Lt(e,t){var i,n={};if(Object.keys(t).forEach((function(r){n[r]={value:t[r],writable:!0}})),ve[e])throw new Error("The geometry `"+e+"` has been already registered");return((i=function(){oo.call(this)}).prototype=Object.create(oo.prototype,n)).name=e,i.prototype.constructor=i,ve[e]={Geometry:i,schema:Xc(i.prototype.schema)},_o.push(e),i}oo.prototype={schema:{},init:function(e){return this.geometry=new d.BufferGeometry,this.geometry},update:function(e){}};var Po=et,Zc=Mo,$c=Po("extras:primitives:debug"),Ds=Po("extras:primitives:warn"),td=Po("extras:primitives:error"),El={};function Mt(e,t){if(e=e.toLowerCase(),!ro[e]){ro[e]=!0,$c("Registering <%s>",e),t.defaultAttributes&&Ds("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var i=t.mappings||{},n=class extends yt{constructor(){super(),this.defaultComponentsFromPrimitive=t.defaultComponents||t.defaultAttributes||{},this.deprecated=t.deprecated||null,this.deprecatedMappings=t.deprecatedMappings||{},this.mappings=i,t.deprecated&&console.warn(t.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var r=this.mappings,o=this;Object.keys(r).forEach((function(s){var a;s!==s.toLowerCase()&&Ds("Mapping keys should be specified in lower case. The mapping key "+s+" may not be recognized"),gt[s]&&(a=r[s].replace(".","-"),r[a]=r[s],delete r[s],console.warn("The primitive "+o.tagName.toLowerCase()+" has a mapping collision. The attribute "+s+" has the same name as a registered component and has been renamed to "+a))}))}getExtraComponents(){var r,o,s,a,A,l=this;for(o=Ro(this.defaultComponentsFromPrimitive),(A=this.getAttribute("mixin"))&&(A=Ae(A.trim(),/\s+/)).forEach((function(p){var E,m,C=document.getElementById(p);if(C){var y=C.rawAttributeCache,b=C.componentCache;for(var B in y){if(a=l.mappings[B])return void ks(a,y[B],o);B in b&&(o[B]=(E=o[B],m=b[B],h(E)?c(m):h(m)?c(E):g(E)&&g(m)?Rt(E,m):c(m)))}}})),s=0;s<this.attributes.length;s++)r=this.attributes[s],(a=this.mappings[r.name])&&ks(a,r.value,o);return o;function h(p){return p===void 0}function c(p){return g(p)?Rt({},p):p}function g(p){return p!==null&&p.constructor===Object}}attributeChangedCallback(r,o,s){var a=this.mappings[r];r in this.deprecatedMappings&&console.warn(this.deprecatedMappings[r]),r&&a?Zc(this,a,s):super.attributeChangedCallback(r,o,s)}};return customElements.define(e,n),n.mappings=i,El[e]=n,n}td("Trying to register primitive "+e+" that has been already previously registered")}function ks(e,t,i){var n=Bn(e);n.constructor===Array?(i[n[0]]=i[n[0]]||{},i[n[0]][n[1]]=t.trim()):i[n]=t.trim()}var Xt={},Cl=[],ed={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},so=function(){};function fe(e,t){var i,n={};if(Object.keys(t).forEach((function(r){n[r]={value:t[r],writable:!0}})),Xt[e])throw new Error("The shader "+e+" has already been registered");return((i=function(){so.call(this)}).prototype=Object.create(so.prototype,n)).name=e,i.prototype.constructor=i,Xt[e]={Shader:i,schema:Ei(i.prototype.schema)},Cl.push(e),i}so.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(e){return this.uniforms=this.initUniforms(),this.material=new(this.raw?d.RawShaderMaterial:d.ShaderMaterial)({uniforms:this.uniforms,glslVersion:this.raw||this.glsl3?d.GLSL3:null,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initUniforms:function(){var e,t,i=this.schema,n={};for(e in i)i[e].is==="uniform"&&(t=ed[i[e].type],n[e]={type:t,value:void 0});return n},update:function(e){var t,i,n=this.schema,r=this.uniforms;for(t in e)if(n[t]&&n[t].is==="uniform")if(n[t].type!=="map")r[t].value=this.parseValue(n[t].type,e[t]),r[t].needsUpdate=!0;else{if(!r[t]||r[t].value===e[t])continue;i="_texture_"+t,this.setMapOnTextureLoad(r,t,i),wn(i,t,this,e)}},parseValue:function(e,t){var i;switch(e){case"vec2":return new d.Vector2(t.x,t.y);case"vec3":return new d.Vector3(t.x,t.y,t.z);case"vec4":return new d.Vector4(t.x,t.y,t.z,t.w);case"color":return i=new d.Color(t),new d.Vector3(i.r,i.g,i.b);default:return t}},setMapOnTextureLoad:function(e,t,i){var n=this;this.el.addEventListener("materialtextureloaded",(function(){e[t].value=n.material[i],e[t].needsUpdate=!0}))}};var er=new d.FileLoader,ao=et("core:a-assets:warn");function id(e){if(e.hasAttribute("autoplay")||e.getAttribute("preload")==="auto")return new Promise((function(t,i){if(e.readyState===4)return t();if(e.error)return i();function n(){for(var r=0,o=0;o<e.buffered.length;o++)r+=e.buffered.end(o)-e.buffered.start(o);r>=e.duration&&(e.tagName==="VIDEO"&&d.Cache.add(e.getAttribute("src"),e),t())}e.addEventListener("loadeddata",n,!1),e.addEventListener("progress",n,!1),e.addEventListener("error",i,!1)}))}function Ts(e){var t=(function(i){var n,r,o;return i.hasAttribute("crossorigin")||(n=i.getAttribute("src"))!==null&&(n.indexOf("://")===-1||(o=(r=n).indexOf("://")>-1?r.split("/")[2]:r.split("/")[0]).substring(0,o.indexOf(":"))===window.location.host)?i:(ao('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',n),i.crossOrigin="anonymous",i.cloneNode(!0))})(e);return t.tagName&&t.tagName.toLowerCase()==="video"&&(t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline","")),t!==e&&(e.parentNode.appendChild(t),e.parentNode.removeChild(e)),t}customElements.define("a-assets",class extends wt{constructor(){super(),this.isAssets=!0,this.fileLoader=er,this.timeout=null}doConnectedCallback(){var e,t,i,n,r,o,s=this,a=[];if(super.doConnectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(r=this.querySelectorAll("img"),e=0;e<r.length;e++)n=Ts(r[e]),a.push(new Promise((function(A,l){d.Cache.add(r[e].getAttribute("src"),n),n.complete?A():(n.onload=A,n.onerror=l)})));for(i=this.querySelectorAll("audio, video"),e=0;e<i.length;e++)(t=Ts(i[e])).src||t.srcObject||ao("Audio/video asset has neither `src` nor `srcObject` attributes."),a.push(id(t));this.getChildren().forEach((function(A){A.isAssetItem&&A.hasAttribute("src")&&a.push(new Promise((function(l,h){if(A.hasLoaded)return l();A.addEventListener("loaded",l),A.addEventListener("error",h)})))})),Promise.allSettled(a).then((function(){s.timeout!==null&&s.load()})),o=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout((function(){s.hasLoaded||(ao("Asset loading timed out in",o,"ms"),s.timeout=null,s.emit("timeout"),s.load())}),o)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,(function(){return!1}))}}),customElements.define("a-asset-item",class extends wt{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var e=this,t=this.getAttribute("src");er.setResponseType(this.getAttribute("response-type")||(function(i){var n=(function(o){var s=document.createElement("a");s.href=o;var a=s.search.replace(/^\?/,""),A=o.replace(a,"").replace("?","");return A.substring(A.lastIndexOf("/")+1)})(i),r=n.lastIndexOf(".");return r>=0&&n.slice(r,i.search(/\?|#|$/))===".glb"?"arraybuffer":"text"})(t)),er.load(t,(function(i){e.data=i,wt.prototype.load.call(e)}),(function(i){e.emit("progress",{loadedBytes:i.loaded,totalBytes:i.total,xhr:i})}),(function(i){e.emit("error",{xhr:i},!1)}))}});var nd=et("core:cubemap:warn");class No extends HTMLElement{constructor(t){return super(t)}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){document.readyState==="complete"?No.prototype.doConnectedCallback.call(this):document.addEventListener("readystatechange",this.onReadyStateChange.bind(this))}doConnectedCallback(){this.srcs=this.validate()}validate(){var t,i=this.querySelectorAll("[src]"),n=[];if(i.length===6){for(t=0;t<i.length;t++)i[t].tagName==="IMG"?n.push(i[t]):n.push(i[t].getAttribute("src"));return n}nd("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",No),customElements.define("a-mixin",class extends wt{constructor(){super(),this.componentCache={},this.rawAttributeCache={},this.isMixin=!0}doConnectedCallback(){super.doConnectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(),this.cacheAttribute(e,i),this.updateEntities()}setAttribute(e,t){window.HTMLElement.prototype.setAttribute.call(this,e,t),this.cacheAttribute(e,t)}cacheAttribute(e,t){var i,n;n=Ae(e,"__")[0],i=gt[n],t===void 0&&(t=window.HTMLElement.prototype.getAttribute.call(this,e)),this.rawAttributeCache[e]=t,i&&(this.componentCache[e]=this.parseComponentAttrValue(i,t))}parseComponentAttrValue(e,t){var i;return typeof t!="string"?t:(e.isSingleProperty?typeof(i=e.schema.parse(t))=="string"&&(i=t):i=gi(t),i)}getAttribute(e){return this.componentCache[e]||window.HTMLElement.prototype.getAttribute.call(this,e)}cacheAttributes(){var e,t,i=this.attributes;for(t=0;t<i.length;t++)e=i[t].name,this.cacheAttribute(e)}updateEntities(){var e,t,i;if(this.sceneEl)for(t=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),i=0;i<t.length;i++)(e=t[i]).hasLoaded&&!e.isMixin&&e.mixinUpdate(this.id)}});const vl="1.7.0";var Ii=new d.Color,xi=new d.Color,Rs=ZA,Fs=Mo,ir={},yl="color",Os="rotation",bl="components";function Us(e){e.x=d.MathUtils.degToRad(e.x),e.y=d.MathUtils.degToRad(e.y),e.z=d.MathUtils.degToRad(e.z)}function nr(e,t,i){var n;for(n=0;n<t.length;n++)e.addEventListener(t[n],i)}function rr(e,t,i){var n;for(n=0;n<t.length;n++)e.removeEventListener(t[n],i)}function _s(e,t){var i,n,r;for(n=vn(t),r=e,i=0;i<n.length;i++)r=r[n[i]];if(r===void 0)throw console.log(e),new Error("[animation] property ("+t+") could not be found");return r}function Ps(e,t,i,n){var r,o,s,a;for(t.startsWith("object3D.rotation")&&(i=d.MathUtils.degToRad(i)),o=vn(t),a=e,r=0;r<o.length-1;r++)a=a[o[r]];s=o[o.length-1],n!==yl?a[s]=i:"r"in a[s]?(a[s].r=i.r,a[s].g=i.g,a[s].b=i.b):(a[s].x=i.r,a[s].y=i.g,a[s].z=i.b)}function vn(e){return e in ir||(ir[e]=e.split(".")),ir[e]}function or(e){return e.isRawProperty||e.property.startsWith(bl)||e.property.startsWith("object3D")}_("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(e){return e===!0||e==="true"||e!==!1&&e!=="false"&&parseInt(e,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var e=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){e.animationIsPlaying=!1,e.el.emit("animationcomplete",e.eventDetail,!1),e.id&&e.el.emit("animationcomplete__"+e.id,e.eventDetail,!1)}}},update:function(e){var t=this.config,i=this.data;this.animationIsPlaying=!1,this.data.enabled&&i.property&&(t.autoplay=!1,t.direction=i.dir,t.duration=i.dur,t.easing=i.easing,t.elasticity=i.elasticity,t.loop=i.loop,t.round=i.round,this.createAndStartAnimation())},tick:function(e,t){this.animationIsPlaying&&(this.time+=t,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var e=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=Zi(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!e.autoplay||e.startEvents&&e.startEvents.length||(e.delay?setTimeout(this.beginAnimation,e.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=Zi(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var e,t,i,n=this.config,r=this.data,o=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(t in e=r.from===""?_s(o,r.property):r.from,i=r.to,this.setColorConfig(e,i),e=this.fromColor,i=this.toColor,this.targetsArray.length=0,this.targetsArray.push(e),n.targets=this.targetsArray,i)n[t]=i[t];var s;n.update=(s={},function(a){var A;(A=a.animatables[0].target).r===s.r&&A.g===s.g&&A.b===s.b||Ps(o,r.property,A,r.type)})}},updateConfigForDefault:function(){var e,t,i,n,r=this.config,o=this.data,s=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(e=o.from===""?or(o)?_s(s,o.property):Rs(s,o.property):o.from,i=o.to,isNaN(e||i)?(e=e&&e.toString(),i=i&&i.toString()):(e=parseFloat(e),i=parseFloat(i)),(t=o.to==="true"||o.to==="false"||o.to===!0||o.to===!1)&&(e=o.from==="true"||o.from===!0?1:0,i=o.to==="true"||o.to===!0?1:0),this.targets.aframeProperty=e,r.targets=this.targets,r.aframeProperty=i,r.update=function(a){var A;(A=a.animatables[0].target.aframeProperty)!==n&&(n=A,t&&(A=A>=1),or(o)?Ps(s,o.property,A,o.type):Fs(s,o.property,A))})},updateConfigForVector:function(){var e,t,i,n,r=this.config,o=this.data,s=this.el,a=vn(o.property),A=a[0]==="object3D"?a[1]:a[0];for(e in t=o.from!==""?dn(o.from):Rs(s,A),i=dn(o.to),A===Os&&(Us(t),Us(i)),this.targetsArray.length=0,this.targetsArray.push(t),r.targets=this.targetsArray,i)r[e]=i[e];r.update=A!=="position"&&A!==Os&&A!=="scale"?(function(){var l={};return function(h){var c=h.animatables[0].target;c.x===l.x&&c.y===l.y&&c.z===l.z||(l.x=c.x,l.y=c.y,l.z=c.z,Fs(s,o.property,c))}})():(n={},function(l){var h=l.animatables[0].target;h.x===n.x&&h.y===n.y&&h.z===n.z||(n.x=h.x,n.y=h.y,n.z=h.z,s.object3D[A].set(h.x,h.y,h.z))})},updateConfig:function(){var e;e=(function(t,i){var n,r,o,s;return(o=i.split("."))[0]!=="object3D"||o[2]||o[1]!=="position"&&o[1]!=="rotation"&&o[1]!=="scale"?(r=o[0],s=o[1],(n=t.components[r]||gt[r])?s&&!n.schema[s]?null:s?n.schema[s].type:n.schema.type:null):"vec3"})(this.el,this.data.property),or(this.data)&&this.data.type===yl?this.updateConfigForRawColor():e==="vec2"||e==="vec3"||e==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(e){var t,i=this.data,n=this.el,r=this;return i.from===""&&!!i.property.startsWith(bl)&&(t=vn(i.property)[1],!n.components[t]&&(n.addEventListener("componentinitialized",(function o(s){s.detail.name===t&&(e(),r.animation=Zi(r.config),n.removeEventListener("componentinitialized",o))})),!0))},stopRelatedAnimations:function(){var e,t;for(t in this.el.components)e=this.el.components[t],t!==this.attrName&&e.name==="animation"&&e.animationIsPlaying&&e.data.property===this.data.property&&(e.animationIsPlaying=!1)},addEventListeners:function(){var e=this.data,t=this.el;nr(t,e.startEvents,this.onStartEvent),nr(t,e.pauseEvents,this.pauseAnimation),nr(t,e.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var e=this.data,t=this.el;rr(t,e.startEvents,this.onStartEvent),rr(t,e.pauseEvents,this.pauseAnimation),rr(t,e.resumeEvents,this.resumeAnimation)},setColorConfig:function(e,t){Ii.set(e),xi.set(t),e=this.fromColor,t=this.toColor,e.r=Ii.r,e.g=Ii.g,e.b=Ii.b,t.r=xi.r,t.g=xi.g,t.b=xi.b}});var sr=et("components:anchored:warn");_("anchored",{schema:{persistent:{default:!1}},init:function(){var e=this.el.sceneEl.getAttribute("webxr"),t=e.optionalFeatures;t.indexOf("anchors")===-1&&(t.push("anchors"),this.el.sceneEl.setAttribute("webxr",e)),this.auxQuaternion=new d.Quaternion,this.onEnterVR=this.onEnterVR.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR)},onEnterVR:function(){this.anchor=void 0,this.requestPersistentAnchorPending=this.data.persistent,this.requestAnchorPending=!this.data.persistent},tick:function(){var e,t,i,n=this.el.sceneEl,r=n.renderer.xr,o=this.el.object3D;(n.is("ar-mode")||n.is("vr-mode"))&&(!this.anchor&&this.requestPersistentAnchorPending&&this.restorePersistentAnchor(),!this.anchor&&this.requestAnchorPending&&this.createAnchor(),this.anchor&&(e=n.frame,t=r.getReferenceSpace(),i=e.getPose(this.anchor.anchorSpace,t),o.position.copy(i.transform.position),o.quaternion.copy(i.transform.orientation)))},createAnchor:async function(e,t){var i,n,r,o,s=this.el.sceneEl,a=s.renderer.xr,A=this.el.object3D;e=e||A.position,t=t||this.auxQuaternion.setFromEuler(A.rotation),(function(l){var h=l.renderer.xr.getSession();return h&&h.restorePersistentAnchor})(s)?(this.anchor&&this.deleteAnchor(),i=s.frame,n=a.getReferenceSpace(),r=new XRRigidTransform({x:e.x,y:e.y,z:e.z},{x:t.x,y:t.y,z:t.z,w:t.w}),this.requestAnchorPending=!1,o=await i.createAnchor(r,n),this.data.persistent&&(this.el.id?(this.persistentHandle=await o.requestPersistentHandle(),localStorage.setItem(this.el.id,this.persistentHandle)):sr("The anchor won't be persisted because the entity has no assigned id.")),s.object3D.attach(this.el.object3D),this.anchor=o):sr("This browser doesn't support the WebXR anchors module")},restorePersistentAnchor:async function(){var e,t=this.el.sceneEl.renderer.xr.getSession(),i=t.persistentAnchors;if(this.requestPersistentAnchorPending=!1,!this.el.id)return sr("The entity associated to the persistent anchor cannot be retrieved because it doesn't have an assigned id."),void(this.requestAnchorPending=!0);if(i){e=localStorage.getItem(this.el.id);for(var n=0;n<i.length;++n)if(e===i[n]){this.anchor=await t.restorePersistentAnchor(i[n]),this.anchor&&(this.persistentHandle=i[n]);break}this.anchor||(this.requestAnchorPending=!0)}else this.requestPersistentAnchorPending=!0},deleteAnchor:function(){var e,t=this.anchor;t&&(e=this.el.sceneEl.renderer.xr.getSession(),t.delete(),this.el.sceneEl.object3D.add(this.el.object3D),this.persistentHandle&&e.deletePersistentAnchor(this.persistentHandle),this.anchor=void 0)}}),_("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var e,t=this.el;e=this.camera=new d.PerspectiveCamera,t.setObject3D("camera",e)},update:function(e){var t=this.data,i=this.camera;i.aspect=t.aspect||window.innerWidth/window.innerHeight,i.far=t.far,i.fov=t.fov,i.near=t.near,i.zoom=t.zoom,i.updateProjectionMatrix(),this.updateActiveCamera(e),this.updateSpectatorCamera(e)},updateActiveCamera:function(e){var t=this.data,i=this.el,n=this.system;e&&e.active===t.active||t.spectator||(t.active&&n.activeCameraEl!==i?n.setActiveCamera(i):t.active||n.activeCameraEl!==i||n.disableActiveCamera())},updateSpectatorCamera:function(e){var t=this.data,i=this.el,n=this.system;e&&e.spectator===t.spectator||(t.spectator&&n.spectatorCameraEl!==i?n.setSpectatorCamera(i):t.spectator||n.spectatorCameraEl!==i||n.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}});var ue,Me,ge,Ns,Gs="click",js="mouseup",Qi="cursor-fusing",ar="cursor-hovering",Ar="cursor-hovered",Mi={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},Li={DOWN:["selectstart"],UP:["selectend"]},Hs="a-mouse-cursor-hover",rd=(_("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:Ce()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},after:["tracked-controls"],multiple:!0,init:function(){var e=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=ol((function(){e.canvasBounds=e.el.sceneEl.canvas.getBoundingClientRect()}),500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=this.onCursorDown.bind(this),this.onCursorUp=this.onCursorUp.bind(this),this.onIntersection=this.onIntersection.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},update:function(e){var t=this.data.rayOrigin;t!==e.rayOrigin&&(t==="entity"&&this.resetRaycaster(),this.updateMouseEventListeners(),t!=="xrselect"&&t!=="entity"||this.addWebXREventListeners(),e.rayOrigin!=="xrselect"&&e.rayOrigin!=="entity"||this.removeWebXREventListeners())},tick:function(){var e=this.el.sceneEl.frame,t=this.activeXRInput;this.data.rayOrigin==="xrselect"&&e&&t&&this.onMouseMove({frame:e,inputSource:t,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var e=this.el;e.removeState(ar),e.removeState(Qi),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(Ar),this.removeEventListeners()},addEventListeners:function(){var e,t=this.data,i=this.el,n=this;function r(){e=i.sceneEl.canvas,t.downEvents.length||t.upEvents.length||(Mi.DOWN.forEach((function(o){e.addEventListener(o,n.onCursorDown,{passive:!1})})),Mi.UP.forEach((function(o){e.addEventListener(o,n.onCursorUp,{passive:!1})})))}(e=i.sceneEl.canvas)?r():i.sceneEl.addEventListener("render-target-loaded",r),t.downEvents.forEach((function(o){i.addEventListener(o,n.onCursorDown)})),t.upEvents.forEach((function(o){i.addEventListener(o,n.onCursorUp)})),i.addEventListener("raycaster-intersection",this.onIntersection),i.addEventListener("raycaster-closest-entity-changed",this.onIntersection),i.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),i.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),i.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var e,t=this.data,i=this.el,n=this;!(e=i.sceneEl.canvas)||t.downEvents.length||t.upEvents.length||(Mi.DOWN.forEach((function(r){e.removeEventListener(r,n.onCursorDown)})),Mi.UP.forEach((function(r){e.removeEventListener(r,n.onCursorUp)}))),t.downEvents.forEach((function(r){i.removeEventListener(r,n.onCursorDown)})),t.upEvents.forEach((function(r){i.removeEventListener(r,n.onCursorUp)})),i.removeEventListener("raycaster-intersection",this.onIntersection),i.removeEventListener("raycaster-closest-entity-changed",this.onIntersection),i.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchstart",this.onMouseMove),e.removeEventListener("touchmove",this.onMouseMove),i.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),i.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds),this.removeWebXREventListeners()},updateMouseEventListeners:function(){var e,t=this.el;(e=t.sceneEl.canvas).removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchmove",this.onMouseMove),t.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("touchmove",this.onMouseMove,{passive:!1}),t.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},resetRaycaster:function(){this.el.setAttribute("raycaster",{direction:new d.Vector3().set(0,0,-1),origin:new d.Vector3})},addWebXREventListeners:function(){var e=this,t=this.el.sceneEl.xrSession;t&&(Li.DOWN.forEach((function(i){t.addEventListener(i,e.onCursorDown)})),Li.UP.forEach((function(i){t.addEventListener(i,e.onCursorUp)})))},removeWebXREventListeners:function(){var e=this,t=this.el.sceneEl.xrSession;t&&(Li.DOWN.forEach((function(i){t.removeEventListener(i,e.onCursorDown)})),Li.UP.forEach((function(i){t.removeEventListener(i,e.onCursorUp)})))},onMouseMove:(ue=new d.Vector3,Me=new d.Vector2,ge=new d.Vector3,Ns={origin:ge,direction:ue},function(e){var t,i,n,r,o,s,a,A,l,h=this.canvasBounds,c=this.el.sceneEl.camera;c.parent.updateMatrixWorld(),i=(n=e.type==="touchmove"||e.type==="touchstart"?e.touches.item(0):e).clientX-h.left,r=n.clientY-h.top,Me.x=i/h.width*2-1,Me.y=-r/h.height*2+1,this.data.rayOrigin!=="xrselect"||e.type!=="selectstart"&&e.type!=="fakeselectevent"?e.type==="fakeselectout"?(ue.set(0,1,0),ge.set(0,9999,0)):c&&c.isPerspectiveCamera?(ge.setFromMatrixPosition(c.matrixWorld),ue.set(Me.x,Me.y,.5).unproject(c).sub(ge).normalize()):c&&c.isOrthographicCamera?(ge.set(Me.x,Me.y,(c.near+c.far)/(c.near-c.far)).unproject(c),ue.set(0,0,-1).transformDirection(c.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+c.type):(o=e.frame,s=e.inputSource,a=this.el.sceneEl.renderer.xr.getReferenceSpace(),(A=o.getPose(s.targetRaySpace,a))&&(l=A.transform,ue.set(0,0,-1),ue.applyQuaternion(l.orientation),ge.copy(l.position),(t=c.el.object3D.parent).localToWorld(ge),ue.transformDirection(t.matrixWorld))),this.el.setAttribute("raycaster",Ns),e.type==="touchmove"&&e.preventDefault()}),onCursorDown:function(e){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&e.type==="touchstart"&&(this.onMouseMove(e),this.el.components.raycaster.checkIntersections(),e.preventDefault()),this.data.rayOrigin==="xrselect"&&e.type==="selectstart"&&(this.activeXRInput=e.inputSource,this.onMouseMove(e),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit("mousedown",e),this.cursorDownEl=this.intersectedEl},onCursorUp:function(e){if(this.isCursorDown&&(this.data.rayOrigin!=="xrselect"||this.activeXRInput===e.inputSource)){this.isCursorDown=!1;var t=this.data;this.twoWayEmit(js,e),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(js,this.intersectedEventDetail)),t.fuse&&t.rayOrigin!=="mouse"&&t.rayOrigin!=="xrselect"||!this.intersectedEl||this.cursorDownEl!==this.intersectedEl||this.twoWayEmit(Gs,e),t.rayOrigin==="xrselect"&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,e.type==="touchend"&&e.preventDefault()}},onIntersection:function(e){var t,i,n,r,o=this.el;i=e.detail.els[0]===o?1:0,r=e.detail.intersections[i],(n=e.detail.els[i])&&this.intersectedEl!==n&&(this.intersectedEl&&(t=this.el.components.raycaster.getIntersection(this.intersectedEl))&&t.distance<=r.distance||(this.clearCurrentIntersection(!0),this.setIntersection(n,r)))},onIntersectionCleared:function(e){e.detail.clearedEls.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){var e=this.data.rayOrigin;this.clearCurrentIntersection(!0),e!=="xrselect"&&e!=="entity"||this.addWebXREventListeners()},setIntersection:function(e,t){var i=this.el,n=this.data,r=this;this.intersectedEl!==e&&(this.intersectedEl=e,i.addState(ar),e.addState(Ar),this.twoWayEmit("mouseenter"),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(Hs),n.fuseTimeout!==0&&n.fuse&&n.rayOrigin!=="xrselect"&&n.rayOrigin!=="mouse"&&(i.addState(Qi),this.twoWayEmit("fusing"),this.fuseTimeout=setTimeout((function(){i.removeState(Qi),r.twoWayEmit(Gs)}),n.fuseTimeout)))},clearCurrentIntersection:function(e){var t,i,n=this.el;this.intersectedEl&&(this.intersectedEl.removeState(Ar),n.removeState(ar),n.removeState(Qi),this.twoWayEmit("mouseleave"),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(Hs),this.intersectedEl=null,clearTimeout(this.fuseTimeout),e!==!0&&(i=this.el.components.raycaster.intersections).length!==0&&(t=i[i[0].object.el===n?1:0])&&this.setIntersection(t.object.el,t))},twoWayEmit:function(e,t){var i,n=this.el,r=this.intersectedEl;function o(s,a){t instanceof MouseEvent?s.mouseEvent=t:typeof TouchEvent<"u"&&t instanceof TouchEvent&&(s.touchEvent=t)}i=this.el.components.raycaster.getIntersection(r),this.eventDetail.intersectedEl=r,this.eventDetail.intersection=i,o(this.eventDetail),n.emit(e,this.eventDetail),r&&(this.intersectedEventDetail.intersection=i,o(this.intersectedEventDetail),r.emit(e,this.intersectedEventDetail))}}),new d.BufferGeometry),zs=(_("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:_o,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(e){var t,i=this.data,n=this.el,r=this.system;this.geometry&&(r.unuseGeometry(e),this.geometry=null),this.geometry=r.getOrCreateGeometry(i),(t=n.getObject3D("mesh"))?t.geometry=this.geometry:((t=new d.Mesh).geometry=this.geometry,this.el.getAttribute("material")||(t.material=new d.MeshStandardMaterial({color:16777215*Math.random(),metalness:0,roughness:.5})),n.setObject3D("mesh",t))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=rd,this.geometry=null},updateSchema:function(e){var t=this.oldData&&this.oldData.primitive,i=e.primitive,n=ve[i]&&ve[i].schema;if(!n)throw new Error("Unknown geometry schema `"+i+"`");t&&t===i||this.extendSchema(n)}}),"generic"),od=(_("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},disabled:{default:!1}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]},bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.bindMethods(),this.el.addEventListener("controllerconnected",(function(t){t.detail.name!==e.name&&(e.wasControllerConnected=!0,e.removeEventListeners(),e.removeControllersUpdateListener())}))},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data,t=e.hand?e.hand:void 0;Ot(this,zs,{hand:t,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;this.el.components["tracked-controls"]?this.removeEventListeners():(e.setAttribute("tracked-controls",{hand:t.hand,idPrefix:zs,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel())},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.wasControllerConnected&&this.checkIfControllerPresent()},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){Gt(this,this.mapping.axes,e)},initDefaultModel:function(){var e=this.modelEl=document.createElement("a-entity");e.setAttribute("geometry",{primitive:"sphere",radius:.03}),e.setAttribute("material",{color:this.data.color}),this.el.appendChild(e),this.el.emit("controllermodelready",{name:"generic-tracked-controller-controls",model:this.modelEl,rayOrigin:{origin:{x:0,y:0,z:-.01},direction:{x:0,y:0,z:-1}}})}}),et("components:gltf-model:warn"));_("gltf-model",{schema:{type:"model"},init:function(){var e=this,t=this.system.getDRACOLoader(),i=this.system.getMeshoptDecoder(),n=this.system.getKTX2Loader();this.model=null,this.loader=new mo,t&&this.loader.setDRACOLoader(t),this.ready=i?i.then((function(r){e.loader.setMeshoptDecoder(r)})):Promise.resolve(),n&&this.loader.setKTX2Loader(n)},update:function(){var e=this,t=this.el,i=this.data;i&&(this.remove(),this.ready.then((function(){e.loader.load(i,(function(n){e.model=n.scene||n.scenes[0],e.model.animations=n.animations,t.setObject3D("mesh",e.model),t.emit("model-loaded",{format:"gltf",model:e.model})}),void 0,(function(n){var r=n&&n.message?n.message:"Failed to load glTF model";od(r),t.emit("model-error",{format:"gltf",src:i})}))})))},remove:function(){this.model&&this.el.removeObject3D("mesh")}}),_("grabbable",{init:function(){this.el.setAttribute("obb-collider","centerModel: true")}});var Si,sd=ut+"controllers/oculus-hands/v4/left.glb",ad=ut+"controllers/oculus-hands/v4/right.glb",lr=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"];_("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"},modelOpacity:{default:1}},after:["tracked-controls"],bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var e=0;e<this.jointEls.length;++e)this.jointEls[e].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var e=0;e<this.jointEls.length;++e)this.jointEls[e].object3D.visible=!1},init:function(){var e=this.el.sceneEl,t=e.getAttribute("webxr"),i=t.optionalFeatures;i.indexOf("hand-tracking")===-1&&(i.push("hand-tracking"),e.setAttribute("webxr",t)),this.wristObject3D=new d.Object3D,this.el.sceneEl.object3D.add(this.wristObject3D),this.onModelLoaded=this.onModelLoaded.bind(this),this.onChildAttached=this.onChildAttached.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new d.Vector3,wristRotation:new d.Quaternion},this.indexTipPosition=new d.Vector3,this.hasPoses=!1,this.jointPoses=new Float32Array(16*lr.length),this.jointRadii=new Float32Array(lr.length),this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace),this.el.addEventListener("child-attached",this.onChildAttached),this.wristObject3D.visible=!1},onChildAttached:function(e){this.addChildEntity(e.detail.el)},update:function(){this.updateModelMaterial()},updateModelMaterial:function(){var e=this.jointEls,t=this.skinnedMesh,i=this.data.modelOpacity!==1;t&&(this.skinnedMesh.material.color.set(this.data.modelColor),this.skinnedMesh.material.transparent=i,this.skinnedMesh.material.opacity=this.data.modelOpacity);for(var n=0;n<e.length;n++)e[n].setAttribute("material",{color:this.data.modelColor,transparent:i,opacity:this.data.modelOpacity})},updateReferenceSpace:function(){var e=this,t=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,t){var i=e.el.sceneEl.systems.webxr.sessionReferenceSpaceType;t.requestReferenceSpace(i).then((function(n){e.referenceSpace=n})).catch((function(n){throw e.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(i,"tracked-controls-webxr uses reference space "+i),n}))}},checkIfControllerPresent:function(){var e=this.data;Ot(this,"",{hand:e.hand?e.hand:void 0,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var e=this.el.sceneEl,t=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,i=e.frame,n=this.el.components["tracked-controls"],r=this.referenceSpace;t&&i&&r&&n&&(this.hasPoses=!1,t.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),this.hasPoses=i.fillPoses(t.hand.values(),r,this.jointPoses)&&i.fillJointRadii(t.hand.values(),this.jointRadii),this.updateHandModel(),this.detectGesture(),this.updateWristObject()))},updateWristObject:(Si=new d.Matrix4,function(){var e=this.wristObject3D;e&&this.hasPoses&&(Si.fromArray(this.jointPoses,0),e.position.setFromMatrixPosition(Si),e.quaternion.setFromRotationMatrix(Si))}),updateHandModel:function(){this.wristObject3D.visible=!0,this.el.object3D.visible=!0,this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(e){for(var t=this.bones,i=0;i<t.length;i++)if(t[i].name===e)return t[i];return null},updateHandMeshModel:(function(){var e=new d.Matrix4;return function(){var t=0,i=this.jointPoses,n=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller;if(n&&this.mesh&&(this.mesh.visible=!1,this.hasPoses))for(var r of n.hand.values()){var o=this.getBone(r.jointName);o!=null&&(this.mesh.visible=!0,e.fromArray(i,16*t),o.position.setFromMatrixPosition(e),o.quaternion.setFromRotationMatrix(e)),t++}}})(),updateHandDotsModel:function(){for(var e,t,i=this.jointPoses,n=this.jointRadii,r=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,o=0;o<r.hand.size;o++)t=(e=this.jointEls[o]).object3D,e.object3D.visible=this.hasPoses,this.hasPoses&&(t.matrix.fromArray(i,16*o),t.matrix.decompose(t.position,t.rotation,t.scale),e.setAttribute("scale",{x:n[o],y:n[o],z:n[o]}))},detectGesture:function(){this.detectPinch()},detectPinch:(function(){var e=new d.Vector3,t=new d.Matrix4;return function(){var i=this.indexTipPosition,n=this.pinchEventDetail;if(this.hasPoses){e.setFromMatrixPosition(t.fromArray(this.jointPoses,64)),i.setFromMatrixPosition(t.fromArray(this.jointPoses,144)),n.wristRotation.setFromRotationMatrix(t.fromArray(this.jointPoses,0));var r=i.distanceTo(e);r<.015&&this.isPinched===!1&&(this.isPinched=!0,n.position.copy(i).add(e).multiplyScalar(.5),this.el.emit("pinchstarted",n)),r>.02&&this.isPinched===!0&&(this.isPinched=!1,n.position.copy(i).add(e).multiplyScalar(.5),this.el.emit("pinchended",n)),this.isPinched&&(n.position.copy(i).add(e).multiplyScalar(.5),this.el.emit("pinchmoved",n))}}})(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{id:"",hand:t.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.mesh?this.mesh!==e.getObject3D("mesh")&&e.setObject3D("mesh",this.mesh):this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var e,t=this.el;this.checkIfControllerPresent(),e=t.components["tracked-controls"]&&t.components["tracked-controls"].controller,this.mesh&&e&&e.hand&&e.hand instanceof XRHand&&t.setObject3D("mesh",this.mesh)},initDefaultModel:function(){var e=this.data;e.modelStyle==="dots"&&this.initDotsModel(),e.modelStyle==="mesh"&&this.initMeshHandModel(),this.el.object3D.visible=!0,this.wristObject3D.visible=!0},initDotsModel:function(){if(this.jointEls.length===0){for(var e=0;e<lr.length;++e){var t=this.jointEl=document.createElement("a-entity");t.setAttribute("geometry",{primitive:"sphere",radius:1}),t.object3D.visible=!1,this.el.appendChild(t),this.jointEls.push(t)}this.updateModelMaterial()}},initMeshHandModel:function(){var e=this.data.hand==="left"?sd:ad;this.el.setAttribute("gltf-model",e)},onModelLoaded:function(){var e=this.mesh=this.el.getObject3D("mesh").children[0],t=this.skinnedMesh=e.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=t.skeleton.bones,this.el.removeObject3D("mesh"),e.position.set(0,0,0),e.rotation.set(0,0,0),t.frustumCulled=!1,t.material=new d.MeshStandardMaterial,this.updateModelMaterial(),this.setupChildrenEntities(),this.el.setObject3D("mesh",e),this.el.emit("controllermodelready",{name:"hand-tracking-controls",model:this.data.model,rayOrigin:new d.Vector3(0,0,0)}))},setupChildrenEntities:function(){for(var e=this.el.children,t=0;t<e.length;++t)e[t]instanceof yt&&this.addChildEntity(e[t])},addChildEntity:function(e){e instanceof yt&&this.wristObject3D.add(e.object3D)}}),_("hand-tracking-grab-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},color:{type:"color",default:"white"},hoverColor:{type:"color",default:"#538df1"},hoverEnabled:{default:!1}},init:function(){var e,t=this.el,i=this.data;e=i.hand==="right"?"components.hand-tracking-controls.bones.3":"components.hand-tracking-controls.bones.21",t.setAttribute("hand-tracking-controls",{hand:i.hand}),t.setAttribute("obb-collider",{trackedObject3D:e,size:.04}),this.auxMatrix=new d.Matrix4,this.onCollisionStarted=this.onCollisionStarted.bind(this),this.el.addEventListener("obbcollisionstarted",this.onCollisionStarted),this.onCollisionEnded=this.onCollisionEnded.bind(this),this.el.addEventListener("obbcollisionended",this.onCollisionEnded),this.onPinchStarted=this.onPinchStarted.bind(this),this.el.addEventListener("pinchstarted",this.onPinchStarted),this.onPinchEnded=this.onPinchEnded.bind(this),this.el.addEventListener("pinchended",this.onPinchEnded)},transferEntityOwnership:function(){for(var e,t=this.el.sceneEl.querySelectorAll("[hand-tracking-grab-controls]"),i=0;i<t.length;++i)(e=t[i].components["hand-tracking-grab-controls"])!==this&&this.grabbedEl&&this.grabbedEl===e.grabbedEl&&e.releaseGrabbedEntity();return!1},onCollisionStarted:function(e){var t=e.detail.withEl;this.collidedEl||t.getAttribute("grabbable")&&(this.collidedEl=t,this.grabbingObject3D=e.detail.trackedObject3D,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.hoverColor))},onCollisionEnded:function(){this.collidedEl=void 0,this.grabbedEl||(this.grabbingObject3D=void 0,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.color))},onPinchStarted:function(e){this.collidedEl&&(this.grabbedEl=this.collidedEl,this.transferEntityOwnership(),this.grab())},onPinchEnded:function(){this.releaseGrabbedEntity()},releaseGrabbedEntity:function(){var e=this.grabbedEl;if(e){var t=e.object3D,i=t.parent,n=this.originalParent;t.applyMatrix4(i.matrixWorld),t.applyMatrix4(this.auxMatrix.copy(n.matrixWorld).invert()),i.remove(t),n.add(t),this.el.emit("grabended",{grabbedEl:e}),this.grabbedEl=void 0,this.originalParent=void 0}},grab:function(){var e=this.grabbedEl,t=e.object3D,i=t.parent;this.originalParent=i;var n=this.el.components["hand-tracking-controls"].wristObject3D;t.applyMatrix4(i.matrixWorld),t.applyMatrix4(this.auxMatrix.copy(n.matrixWorld).invert()),i.remove(t),n.add(t),this.el.emit("grabstarted",{grabbedEl:e})}});var Ad={toonLeft:ut+"controllers/hands/leftHand.glb",toonRight:ut+"controllers/hands/rightHand.glb",lowPolyLeft:ut+"controllers/hands/leftHandLow.glb",lowPolyRight:ut+"controllers/hands/rightHandLow.glb",highPolyLeft:ut+"controllers/hands/leftHandHigh.glb",highPolyRight:ut+"controllers/hands/rightHandHigh.glb"},hr="Point",cr="Fist",qs="Thumb Up",rn={};function Vs(e,t){var i;if(e)return(i=rn[e])==="grip"?i+(t?"close":"open"):i==="point"?i+(t?"up":"down"):i==="pointing"||i==="pistol"?i+(t?"start":"end"):void 0}rn[cr]="grip",rn[qs]="pistol",rn[hr]="pointing",_("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},after:["tracked-controls"],init:function(){var e=this,t=this.el;this.pressedButtons={},this.touchedButtons={},this.loader=new mo,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){e.handleButton("grip","down")},this.onGripUp=function(){e.handleButton("grip","up")},this.onTrackpadDown=function(){e.handleButton("trackpad","down")},this.onTrackpadUp=function(){e.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){e.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){e.handleButton("trackpad","touchend")},this.onTriggerDown=function(){e.handleButton("trigger","down")},this.onTriggerUp=function(){e.handleButton("trigger","up")},this.onTriggerTouchStart=function(){e.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){e.handleButton("trigger","touchend")},this.onGripTouchStart=function(){e.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){e.handleButton("grip","touchend")},this.onThumbstickDown=function(){e.handleButton("thumbstick","down")},this.onThumbstickUp=function(){e.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){e.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){e.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){e.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){e.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){e.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){e.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected),t.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(e,t){var i=this.el.getObject3D("mesh");i&&i.mixer&&i.mixer.update(t/1e3)},onControllerConnected:function(e){var t=this.el,i=this.data.hand,n=this.el.getObject3D("mesh");t.object3D.visible=!0;var r=i==="left"?Math.PI/2:-Math.PI/2,o=t.sceneEl.hasWebXR?-Math.PI/2:0;e.detail.name==="pico-controls"&&(o+=Math.PI/4),n.position.set(0,0,0),n.rotation.set(o,0,r)},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var e=this.el;e.addEventListener("gripdown",this.onGripDown),e.addEventListener("gripup",this.onGripUp),e.addEventListener("trackpaddown",this.onTrackpadDown),e.addEventListener("trackpadup",this.onTrackpadUp),e.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.addEventListener("triggerdown",this.onTriggerDown),e.addEventListener("triggerup",this.onTriggerUp),e.addEventListener("triggertouchstart",this.onTriggerTouchStart),e.addEventListener("triggertouchend",this.onTriggerTouchEnd),e.addEventListener("griptouchstart",this.onGripTouchStart),e.addEventListener("griptouchend",this.onGripTouchEnd),e.addEventListener("thumbstickdown",this.onThumbstickDown),e.addEventListener("thumbstickup",this.onThumbstickUp),e.addEventListener("abuttontouchstart",this.onAorXTouchStart),e.addEventListener("abuttontouchend",this.onAorXTouchEnd),e.addEventListener("bbuttontouchstart",this.onBorYTouchStart),e.addEventListener("bbuttontouchend",this.onBorYTouchEnd),e.addEventListener("xbuttontouchstart",this.onAorXTouchStart),e.addEventListener("xbuttontouchend",this.onAorXTouchEnd),e.addEventListener("ybuttontouchstart",this.onBorYTouchStart),e.addEventListener("ybuttontouchend",this.onBorYTouchEnd),e.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var e=this.el;e.removeEventListener("gripdown",this.onGripDown),e.removeEventListener("gripup",this.onGripUp),e.removeEventListener("trackpaddown",this.onTrackpadDown),e.removeEventListener("trackpadup",this.onTrackpadUp),e.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.removeEventListener("triggerdown",this.onTriggerDown),e.removeEventListener("triggerup",this.onTriggerUp),e.removeEventListener("triggertouchstart",this.onTriggerTouchStart),e.removeEventListener("triggertouchend",this.onTriggerTouchEnd),e.removeEventListener("griptouchstart",this.onGripTouchStart),e.removeEventListener("griptouchend",this.onGripTouchEnd),e.removeEventListener("thumbstickdown",this.onThumbstickDown),e.removeEventListener("thumbstickup",this.onThumbstickUp),e.removeEventListener("abuttontouchstart",this.onAorXTouchStart),e.removeEventListener("abuttontouchend",this.onAorXTouchEnd),e.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),e.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),e.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),e.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),e.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),e.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),e.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(e){var t,i=this.el,n=this.data.hand,r=this.data.handModelStyle,o=this.data.color,s=this;if(t={hand:n,model:!1},n!==e){var a=Ad[r+n.charAt(0).toUpperCase()+n.slice(1)];this.loader.load(a,(function(A){var l=A.scene.children[0];l.mixer=new d.AnimationMixer(l),s.clips=A.animations,i.setObject3D("mesh",l),l.traverse((function(h){h.isMesh&&(h.material.color=new d.Color(o))})),i.setAttribute("magicleap-controls",t),i.setAttribute("vive-controls",t),i.setAttribute("meta-touch-controls",t),i.setAttribute("pico-controls",t),i.setAttribute("windows-motion-controls",t),i.setAttribute("hp-mixed-reality-controls",t)}))}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(e,t){var i,n=t==="down",r=t==="touchstart";if(t.indexOf("touch")===0){if(r===this.touchedButtons[e])return;this.touchedButtons[e]=r}else{if(n===this.pressedButtons[e])return;this.pressedButtons[e]=n}i=this.gesture,this.gesture=this.determineGesture(),this.gesture!==i&&(this.animateGesture(this.gesture,i),this.emitGestureEvents(this.gesture,i))},determineGesture:function(){var e,t,i,n=this.pressedButtons.grip,r=this.pressedButtons.surface||this.touchedButtons.surface,o=this.pressedButtons.trackpad||this.touchedButtons.trackpad,s=this.pressedButtons.trigger||this.touchedButtons.trigger,a=this.touchedButtons.AorX||this.touchedButtons.BorY;return t=this.el.components["tracked-controls"],(i=t&&t.controller)&&(i.id&&i.id.indexOf("OpenVR ")===0||i.profiles&&i.profiles[0]&&i.profiles[0]==="htc-vive")?n||s?e=cr:o&&(e=hr):n?e=r||a||o?s?cr:hr:s?qs:"Point + Thumb":s&&(e="Hold"),e},getClip:function(e){var t,i;for(i=0;i<this.clips.length;i++)if((t=this.clips[i]).name===e)return t},animateGesture:function(e,t){e?this.playAnimation(e||"Open",t,!1):this.playAnimation(t,t,!0)},emitGestureEvents:function(e,t){var i,n=this.el;t!==e&&((i=Vs(t,!1))&&n.emit(i),(i=Vs(e,!0))&&n.emit(i))},playAnimation:function(e,t,i){var n,r,o=this.el.getObject3D("mesh");if(o){if(n=this.getClip(e),r=o.mixer.clipAction(n),i)return r.paused=!1,void(r.timeScale=-1);if(r.clampWhenFinished=!0,r.loop=d.LoopOnce,r.repetitions=0,r.timeScale=1,r.time=0,r.weight=1,!t)return o.mixer.stopAllAction(),void r.play();n=this.getClip(t),r.reset(),r.play(),o.mixer.clipAction(n).crossFadeTo(r,.15,!0)}}}),_("hide-on-enter-ar",{init:function(){var e=this;this.el.sceneEl.addEventListener("enter-vr",(function(){e.el.sceneEl.is("ar-mode")&&(e.el.object3D.visible=!1)})),this.el.sceneEl.addEventListener("exit-vr",(function(){e.el.object3D.visible=!0}))}}),_("hide-on-enter-vr",{init:function(){var e=this;this.el.sceneEl.addEventListener("enter-vr",(function(){e.el.sceneEl.is("vr-mode")&&(e.el.object3D.visible=!1)})),this.el.sceneEl.addEventListener("exit-vr",(function(){e.el.object3D.visible=!0}))}});var Ws="hp-mixed-reality",ld=ut+"controllers/hp/mixed-reality/",hd={x:0,y:0,z:.06},cd={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},dd=(_("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){q(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e,e.data.hand)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e,e.data.hand)},this.previousButtonValues={},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex=e.hand==="right"?0:e.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;Ot(this,Ws,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:Ws,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",ld+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,i=this.mapping[this.data.hand].buttons[e.detail.id];i&&(i==="trigger"&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(i+"changed",e.detail.state))},onModelLoaded:function(e){var t=e.detail.model;this.data.model&&(t.position.copy(hd),t.rotation.copy(cd),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new d.Vector3(0,0,0)}))},onAxisMoved:function(e){Gt(this,this.mapping.axes,e)}}),et("components:layer:warn"));function Ys(e,t,i){return(t.dot(e)-t.dot(i))/t.length()}_("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var e=this.el.sceneEl.renderer.getContext();this.quaternion=new d.Quaternion,this.position=new d.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=e.createFramebuffer();var t=this.el.sceneEl.getAttribute("webxr"),i=t.requiredFeatures;i.indexOf("layers")===-1&&(i.push("layers"),this.el.sceneEl.setAttribute("webxr",t)),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(e){this.data.src!==e.src&&this.updateSrc()},updateSrc:function(){var e=this.data.type;this.texture=void 0,e!=="quad"?e!=="monocubemap"&&e!=="stereocubemap"||this.loadCubeMapImages():this.loadQuadImage()},loadCubeMapImages:function(){var e,t=this.xrGLFactory,i=this.el.sceneEl.frame,n=this.data.src,r=this.data.type;this.visibilityChanged=!1,this.layer&&(r!=="monocubemap"&&r!=="stereocubemap"||(n.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,r==="monocubemap"?(e=t.getSubImage(this.layer,i),this.loadCubeMapImage(e.colorTexture,n,0)):(e=t.getSubImage(this.layer,i,"left"),this.loadCubeMapImage(e.colorTexture,n,0),e=t.getSubImage(this.layer,i,"right"),this.loadCubeMapImage(e.colorTexture,n,6))))},loadQuadImage:function(){var e=this.data.src,t=this;this.el.sceneEl.systems.material.loadTexture(e,{src:e},(function(i){t.el.sceneEl.renderer.initTexture(i),t.texture=i,e.tagName==="VIDEO"&&setTimeout((function(){t.textureIsVideo=!0}),1e3),t.layer&&(t.layer.height=t.data.height/2||t.texture.image.height/1e3,t.layer.width=t.data.width/2||t.texture.image.width/1e3,t.needsRedraw=!0),t.updateQuadPanel()}))},preGenerateCubeMapTextures:function(e,t){this.data.type==="monocubemap"?this.generateCubeMapTextures(e,0,t):(this.generateCubeMapTextures(e,0,t),this.generateCubeMapTextures(e,6,t))},generateCubeMapTextures:function(e,t,i){for(var n,r,o=this.data,s=this.cubeFaceSize,a=Math.min(e.width,e.height),A=[],l=0;l<6;l++){var h=document.createElement("CANVAS");h.width=h.height=s;var c=h.getContext("2d");o.rotateCubemap&&(l!==2&&l!==3||(c.save(),c.translate(s,s),c.rotate(Math.PI))),c.drawImage(e,(l+t)*a,0,a,a,0,0,s,s),c.restore(),i&&i(),A.push(h)}return o.rotateCubemap&&(n=A[0],r=A[1],A[0]=r,A[1]=n,n=A[4],r=A[5],A[4]=r,A[5]=n),i&&i(),A},loadCubeMapImage:function(e,t,i){var n,r=this.el.sceneEl.renderer.getContext();r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.bindTexture(r.TEXTURE_CUBE_MAP,e),n=!t.complete||this.loadingScreen?this.loadingScreenImages:this.generateCubeMapTextures(t,i);var o=0;n.forEach((function(s,a){r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,0,0,r.RGBA,r.UNSIGNED_BYTE,s),o=r.getError()})),o!==0&&console.log("renderingError, WebGL Error Code: "+o),r.bindTexture(r.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&this.referenceSpace&&(this.layer||!this.el.sceneEl.is("vr-mode")&&!this.el.sceneEl.is("ar-mode")||this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),(this.needsRedraw||this.layer.needsRedraw||this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var e=this,t=this.data.type;this.el.sceneEl.xrSession.onvisibilitychange=function(i){e.visibilityChanged=i.session.visibilityState!=="hidden"},t!=="quad"?t!=="monocubemap"&&t!=="stereocubemap"||this.initCubeMapLayer():this.initQuadLayer()},initQuadLayer:function(){var e=this.el.sceneEl,t=e.renderer.getContext(),i=this.xrGLFactory=new XRWebGLBinding(e.xrSession,t);this.texture&&(this.layer=i.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),e.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var e=this.data.src,t=this.el.sceneEl,i=t.renderer.getContext(),n=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),r=this.cubeFaceSize=Math.min(n,Math.min(e.width,e.height)),o=this.xrGLFactory=new XRWebGLBinding(t.xrSession,i);this.layer=o.createCubeLayer({space:this.referenceSpace,viewPixelWidth:r,viewPixelHeight:r,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),t.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var e=this.cubeFaceSize,t=this.loadingScreenImages=[],i=0;i<6;i++){var n=document.createElement("CANVAS");n.width=n.height=e;var r=n.getContext("2d");n.width=n.height=e,r.fillStyle="black",r.fillRect(0,0,e,e),i!==2&&i!==3&&(r.translate(e,0),r.scale(-1,1),r.fillStyle="white",r.font="30px Arial",r.fillText("Loading",e/2,e/2)),t.push(n)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(e){this.layerEnabled=e,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var e=this.quadPanelEl;this.quadPanelEl||(e=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(e)),e.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),e.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var e=this.el.sceneEl,t=this.el.sceneEl.renderer.getContext(),i=this.xrGLFactory.getSubImage(this.layer,e.frame),n=e.renderer.properties.get(this.texture).__webglTexture,r=t.getParameter(t.FRAMEBUFFER_BINDING);t.viewport(i.viewport.x,i.viewport.y,i.viewport.width,i.viewport.height),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.colorTexture,0),(function(o,s,a,A){var l=o.createFramebuffer(),h=a.viewport.x,c=a.viewport.y,g=a.viewport.x+a.viewport.width,p=a.viewport.y+a.viewport.height;A.tagName==="VIDEO"&&(o.bindTexture(o.TEXTURE_2D,s),o.texSubImage2D(o.TEXTURE_2D,0,0,0,A.width,A.height,o.RGB,o.UNSIGNED_BYTE,A)),o.bindFramebuffer(o.READ_FRAMEBUFFER,l),o.framebufferTexture2D(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,s,0),o.readBuffer(o.COLOR_ATTACHMENT0),o.blitFramebuffer(0,0,A.width,A.height,h,c,g,p,o.COLOR_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.deleteFramebuffer(l)})(t,n,i,this.data.src),t.bindFramebuffer(t.FRAMEBUFFER,r)},updateTransform:function(){var e=this.el,t=this.position,i=this.quaternion;e.object3D.updateMatrixWorld(),t.setFromMatrixPosition(e.object3D.matrixWorld),i.setFromRotationMatrix(e.object3D.matrixWorld),this.layerEnabled||t.set(0,0,1e8),this.layer.transform=new XRRigidTransform(t,i)},onEnterVR:function(){var e=this.el.sceneEl,t=e.xrSession;e.hasWebXR&&XRWebGLBinding&&t?(t.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()):dd("The layer component requires WebXR and the layers API enabled")},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(e){this.referenceSpace=e}}),_("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var e=this.config,t=this.data,i=this.el,n=this,r={hand:t.hand,model:t.model};function o(s){var a=e[s.detail.name];if(a){var A=Dt({showLine:!0},a.raycaster||{});s.detail.rayOrigin&&(A.origin=s.detail.rayOrigin.origin,A.direction=s.detail.rayOrigin.direction,A.showLine=!0),s.detail.rayOrigin||!n.modelReady?i.setAttribute("raycaster",A):i.setAttribute("raycaster","showLine",!0),i.setAttribute("cursor",Dt({fuse:!1},a.cursor))}}i.setAttribute("hp-mixed-reality-controls",r),i.setAttribute("magicleap-controls",r),i.setAttribute("oculus-go-controls",r),i.setAttribute("meta-touch-controls",r),i.setAttribute("pico-controls",r),i.setAttribute("valve-index-controls",r),i.setAttribute("vive-controls",r),i.setAttribute("vive-focus-controls",r),i.setAttribute("windows-motion-controls",r),i.setAttribute("generic-tracked-controller-controls",{hand:r.hand}),i.addEventListener("controllerconnected",o),i.addEventListener("controllerdisconnected",(function(s){e[s.detail.name]&&i.setAttribute("raycaster","showLine",!1)})),i.addEventListener("controllermodelready",(function(s){o(s),n.modelReady=!0}))},config:{"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"meta-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"pico-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}});var dr,Di,ki,Ti,$t,Ks,ur,ti,ei,Ri,Js=d.MathUtils.degToRad,ud=et("components:light:warn"),gd=new d.CubeTextureLoader,Le={};function Xs(e,t){return!(!e||!t)&&e.x===t.x&&e.y===t.y&&e.z===t.z}_("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:3.14,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var e=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(e)},update:function(e){var t=this.data,i=sl(t,e),n=this.light,r=this;if(!n||"type"in i)this.setLight(this.data),this.updateShadow();else{var o=!1;Object.keys(i).forEach((function(s){var a=t[s];switch(s){case"color":n.color.set(a);break;case"groundColor":n.groundColor.set(a);break;case"angle":n.angle=Js(a);break;case"target":a===null?t.type!=="spot"&&t.type!=="directional"||(n.target=r.defaultTarget):a.hasLoaded?r.onSetTarget(a,n):a.addEventListener("loaded",r.onSetTarget.bind(r,a,n));break;case"envMap":r.updateProbeMap(t,n);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":o||(r.updateShadow(),o=!0);break;case"shadowCameraAutomatic":t.shadowCameraAutomatic?r.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(t.shadowCameraAutomatic)):r.shadowCameraAutomaticEls=[];break;default:n[s]=a}}))}},tick:(dr=new d.Box3,Di=new d.Vector3,ki=new d.Vector3,Ti=new d.Matrix4,$t=new d.Sphere,Ks=new d.Vector3,function(){if(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof d.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var e=this.light.shadow.camera;e.getWorldDirection(Di),e.getWorldPosition(ki),Ti.copy(e.matrixWorld),Ti.invert(),e.near=1,e.left=1e5,e.right=-1e5,e.top=-1e5,e.bottom=1e5,this.shadowCameraAutomaticEls.forEach((function(t){dr.setFromObject(t.object3D),dr.getBoundingSphere($t);var i,n,r,o,s,a=Ys(ki,Di,$t.center),A=(i=ki,n=Di,r=$t.center,o=Ks,s=Ys(i,n,r),o.copy(n),o.multiplyScalar(s),o.add(r),o).applyMatrix4(Ti);e.near=Math.min(-a-$t.radius-1,e.near),e.left=Math.min(-$t.radius+A.x,e.left),e.right=Math.max($t.radius+A.x,e.right),e.top=Math.max($t.radius+A.y,e.top),e.bottom=Math.min(-$t.radius+A.y,e.bottom)})),e.updateProjectionMatrix()}}),setLight:function(e){var t=this.el,i=this.getLight(e);i&&(this.light&&t.removeObject3D("light"),this.light=i,this.light.el=t,t.setObject3D("light",this.light),e.type!=="spot"&&e.type!=="directional"&&e.type!=="hemisphere"||t.getObject3D("light").translateY(-1),e.type==="spot"&&(t.setObject3D("light-target",this.defaultTarget),t.getObject3D("light-target").position.set(0,0,-1)),e.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(e.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var e=this.el,t=this.data,i=this.light;i.castShadow=t.castShadow;var n=e.getObject3D("cameraHelper");if(t.shadowCameraVisible&&!n?(n=new d.CameraHelper(i.shadow.camera),e.setObject3D("cameraHelper",n)):!t.shadowCameraVisible&&n&&e.removeObject3D("cameraHelper"),!t.castShadow)return i;i.shadow.bias=t.shadowBias,i.shadow.radius=t.shadowRadius,i.shadow.mapSize.height=t.shadowMapHeight,i.shadow.mapSize.width=t.shadowMapWidth,i.shadow.camera.near=t.shadowCameraNear,i.shadow.camera.far=t.shadowCameraFar,i.shadow.camera instanceof d.OrthographicCamera?(i.shadow.camera.top=t.shadowCameraTop,i.shadow.camera.right=t.shadowCameraRight,i.shadow.camera.bottom=t.shadowCameraBottom,i.shadow.camera.left=t.shadowCameraLeft):i.shadow.camera.fov=t.shadowCameraFov,i.shadow.camera.updateProjectionMatrix(),n&&n.update()},getLight:function(e){var t=e.angle,i=new d.Color(e.color);i=i.getHex();var n=e.decay,r=e.distance,o=new d.Color(e.groundColor);o=o.getHex();var s=e.intensity,a=e.type,A=e.target,l=null;switch(a.toLowerCase()){case"ambient":return new d.AmbientLight(i,s);case"directional":return l=new d.DirectionalLight(i,s),this.defaultTarget=l.target,A&&(A.hasLoaded?this.onSetTarget(A,l):A.addEventListener("loaded",this.onSetTarget.bind(this,A,l))),l;case"hemisphere":return new d.HemisphereLight(i,o,s);case"point":return new d.PointLight(i,s,r,n);case"spot":return l=new d.SpotLight(i,s,r,Js(t),e.penumbra,n),this.defaultTarget=l.target,A&&(A.hasLoaded?this.onSetTarget(A,l):A.addEventListener("loaded",this.onSetTarget.bind(this,A,l))),l;case"probe":return l=new d.LightProbe,this.updateProbeMap(e,l),l;default:ud("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",a)}},updateProbeMap:function(e,t){e.envMap?(Le[e.envMap]===void 0&&(Le[e.envMap]=new window.Promise((function(i){tl(e.envMap,(function(n){gd.load(n,(function(r){var o=jA.fromCubeTexture(r);Le[e.envMap]=o,i(o)}))}))}))),Le[e.envMap]instanceof window.Promise?Le[e.envMap].then((function(i){t.copy(i)})):Le[e.envMap]instanceof d.LightProbe&&t.copy(Le[e.envMap])):t.copy(new d.LightProbe)},onSetTarget:function(e,t){t.target=e.object3D},remove:function(){var e=this.el;e.removeObject3D("light"),e.getObject3D("cameraHelper")&&e.removeObject3D("cameraHelper")}}),_("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var e,t,i=this.data;t=this.material=new d.LineBasicMaterial({color:i.color,opacity:i.opacity,transparent:i.opacity<1,visible:i.visible}),(e=this.geometry=new d.BufferGeometry).setAttribute("position",new d.BufferAttribute(new Float32Array(6),3)),this.line=new d.Line(e,t),this.el.setObject3D(this.attrName,this.line)},update:function(e){var t=this.data,i=this.geometry,n=!1,r=this.material,o=i.attributes.position.array;Xs(t.start,e.start)||(o[0]=t.start.x,o[1]=t.start.y,o[2]=t.start.z,n=!0),Xs(t.end,e.end)||(o[3]=t.end.x,o[4]=t.end.y,o[5]=t.end.z,n=!0),n&&(i.attributes.position.needsUpdate=!0,i.computeBoundingSphere()),r.color.setStyle(t.color),r.opacity=t.opacity,r.transparent=t.opacity<1,r.visible=t.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}}),_("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new d.Quaternion,this.hiddenEls=[]},update:function(e){var t,i,n=this.data,r=this.el;if(n.visualAspectEnabled){var o=this.el.getAttribute("scale");this.previewDistance=15*(o.x+o.y)/2,this.initVisualAspect(),t=n.highlighted?n.highlightedColor:n.backgroundColor,i=n.highlighted?n.highlightedColor:n.borderColor,r.setAttribute("material","backgroundColor",t),r.setAttribute("material","strokeColor",i),n.on!==e.on&&this.updateEventListener(),e.peekMode!==void 0&&n.peekMode!==e.peekMode&&this.updatePeekMode(),n.image&&e.image!==n.image&&r.setAttribute("material","pano",typeof n.image=="string"?n.image:n.image.src)}},updatePeekMode:function(){var e=this.el,t=this.sphereEl;this.data.peekMode?(this.hideAll(),e.getObject3D("mesh").visible=!1,t.setAttribute("visible",!0)):(this.showAll(),e.getObject3D("mesh").visible=!0,t.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var e=this.el;e.isPlaying&&(this.removeEventListener(),e.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var e=this.data.on;e&&this.el.removeEventListener(e,this.navigate)},initVisualAspect:function(){var e,t,i,n=this.el;this.data.visualAspectEnabled&&!this.visualAspectInitialized&&(i=this.textEl=this.textEl||document.createElement("a-entity"),t=this.sphereEl=this.sphereEl||document.createElement("a-entity"),e=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),n.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),n.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double",previewDistance:this.previewDistance}),i.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),i.setAttribute("position","0 1.5 0"),n.appendChild(i),e.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),e.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),e.setAttribute("rotation","0 180 0"),e.setAttribute("position","0 0 0"),e.setAttribute("visible",!1),n.appendChild(e),t.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),t.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),t.setAttribute("visible",!1),n.appendChild(t),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:(function(){var e=new d.Vector3,t=new d.Vector3,i=new d.Quaternion,n=new d.Vector3;return function(){var r,o,s=this.el,a=s.object3D,A=s.sceneEl.camera,l=this.textEl;if(this.data.visualAspectEnabled)if(a.updateMatrixWorld(),A.parent.updateMatrixWorld(),A.updateMatrixWorld(),a.matrix.decompose(t,i,n),t.setFromMatrixPosition(a.matrixWorld),e.setFromMatrixPosition(A.matrixWorld),(o=t.distanceTo(e))>1.33333*this.previewDistance)this.previousQuaternion||(this.quaternionClone.copy(i),this.previousQuaternion=this.quaternionClone),a.lookAt(e);else{if(r=this.calculateCameraPortalOrientation(),o<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;l.setAttribute("text","width",1.5),r<=0?(l.setAttribute("position","0 0 0.75"),l.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(l.setAttribute("position","0 0 -0.75"),l.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),s.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=r}else r<=0?l.setAttribute("rotation","0 180 0"):l.setAttribute("rotation","0 0 0"),l.setAttribute("text","width",5),l.setAttribute("position","0 1.5 0"),s.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(a.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}})(),hideAll:function(){var e=this.el,t=this.hiddenEls,i=this;t.length>0||e.sceneEl.object3D.traverse((function(n){n&&n.el&&n.el.hasAttribute("link-controls")||n.el&&n!==e.sceneEl.object3D&&n.el!==e&&n.el!==i.sphereEl&&n.el!==e.sceneEl.cameraEl&&n.el.getAttribute("visible")!==!1&&n.el!==i.textEl&&n.el!==i.semiSphereEl&&(n.el.setAttribute("visible",!1),t.push(n.el))}))},showAll:function(){this.hiddenEls.forEach((function(e){e.setAttribute("visible",!0)})),this.hiddenEls=[]},calculateCameraPortalOrientation:(ur=new d.Matrix4,ti=new d.Vector3,ei=new d.Vector3(0,0,1),Ri=new d.Vector3(0,0,0),function(){var e=this.el,t=e.sceneEl.camera;return ti.set(0,0,0),ei.set(0,0,1),Ri.set(0,0,0),e.object3D.matrixWorld.extractRotation(ur),ei.applyMatrix4(ur),e.object3D.updateMatrixWorld(),e.object3D.localToWorld(Ri),t.parent.parent.updateMatrixWorld(),t.parent.updateMatrixWorld(),t.updateMatrixWorld(),t.localToWorld(ti),ti.sub(Ri).normalize(),ei.normalize(),Math.sign(ei.dot(ti))}),remove:function(){this.removeEventListener()}}),fe("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"},previewDistance:{default:15,type:"float",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","uniform float previewDistance;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / previewDistance), 2.0), 0.0, 1.0));","}","}"].join(`
`)});var Zs="logitech-mx-ink",pd=ut+"controllers/logitech/",$s=(_("logitech-mx-ink-controls",{schema:{hand:{default:"left"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{left:{buttons:["front","back","none","none","none","tip"]},right:{buttons:["front","back","none","none","none","tip"]}},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){q(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e,e.data.hand)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e,e.data.hand)},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),e.sceneEl.removeEventListener("enter-vr",this.onEnterVR),e.sceneEl.removeEventListener("exit-vr",this.onExitVR),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.controllerObject3D;e&&(e.visible=!1),Ot(this,Zs,{hand:this.data.hand,iterateControllerProfiles:!0})},injectTrackedControls:function(){var e=this.el,t=this.data,i=Zs;e.setAttribute("tracked-controls",{id:i,hand:t.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0,orientationOffset:t.orientationOffset}),this.loadModel()},loadModel:function(){var e=this.controllerObject3D;if(this.data.model)return e?(e.visible=this.el.sceneEl.is("vr-mode"),void this.el.setObject3D("mesh",e)):void this.el.setAttribute("gltf-model",pd+"logitech-mx-ink.glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,i=this.mapping[this.data.hand].buttons[e.detail.id];i&&(i==="trigger"&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(i+"changed",e.detail.state))},onModelLoaded:function(e){e.target===this.el&&this.data.model&&(this.el.emit("controllermodelready",{name:"logitech-mx-ink-controls",model:this.data.model,rayOrigin:new d.Vector3(0,0,0)}),this.controllerObject3D=this.el.getObject3D("mesh"),this.controllerObject3D.visible=this.el.sceneEl.is("vr-mode"))},onAxisMoved:function(e){Gt(this,this.mapping.axes,e)}}),Math.PI/2),ta=(_("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new d.Vector3,this.hmdQuaternion=new d.Quaternion,this.magicWindowAbsoluteEuler=new d.Euler,this.magicWindowDeltaEuler=new d.Euler,this.position=new d.Vector3,this.magicWindowObject=new d.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new d.Vector3,rotation:new d.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var e,t=this.data;(Ce()||yo())&&(e=this.magicWindowControls=new HA(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(e.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?e.enabled=t.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",(function(){e.enabled=t.magicWindowTrackingEnabled}))))},update:function(e){var t=this.data;t.enabled!==e.enabled&&this.updateGrabCursor(t.enabled),e&&!t.magicWindowTrackingEnabled&&e.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=t.magicWindowTrackingEnabled),e&&!t.pointerLockEnabled!==e.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(e){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockError=this.onPointerLockError.bind(this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new d.Object3D,this.yawObject=new d.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var e=this.el.sceneEl,t=e.canvas;t?(t.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),t.addEventListener("touchstart",this.onTouchStart,{passive:!0}),window.addEventListener("touchmove",this.onTouchMove,{passive:!0}),window.addEventListener("touchend",this.onTouchEnd,{passive:!0}),e.addEventListener("enter-vr",this.onEnterVR),e.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):e.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var e=this.el.sceneEl,t=e&&e.canvas;t&&(t.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("enter-vr",this.onEnterVR),e.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var e=this.el.object3D,t=this.pitchObject,i=this.yawObject,n=this.el.sceneEl;(n.is("vr-mode")||n.is("ar-mode"))&&n.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),e.rotation.x=this.magicWindowDeltaEuler.x+t.rotation.x,e.rotation.y=this.magicWindowDeltaEuler.y+i.rotation.y,e.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var e=this.magicWindowAbsoluteEuler,t=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),e.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),this.previousMagicWindowYaw||e.y===0||(this.previousMagicWindowYaw=e.y),this.previousMagicWindowYaw&&(t.x=e.x,t.y+=e.y-this.previousMagicWindowYaw,t.z=e.z,this.previousMagicWindowYaw=e.y))},onMouseMove:function(e){var t,i,n,r=this.pitchObject,o=this.previousMouseEvent,s=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(i=e.movementX||e.mozMovementX||0,n=e.movementY||e.mozMovementY||0):(i=e.screenX-o.screenX,n=e.screenY-o.screenY),this.previousMouseEvent.screenX=e.screenX,this.previousMouseEvent.screenY=e.screenY,t=this.data.reverseMouseDrag?1:-1,s.rotation.y+=.002*i*t,r.rotation.x+=.002*n*t,r.rotation.x=Math.max(-$s,Math.min($s,r.rotation.x)))},onMouseDown:function(e){var t=this.el.sceneEl;if(this.data.enabled&&this.data.mouseEnabled&&(!t.is("vr-mode")&&!t.is("ar-mode")||!t.checkHeadsetConnected())&&e.button===0){var i=t&&t.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=e.screenX,this.previousMouseEvent.screenY=e.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(i.requestPointerLock?i.requestPointerLock():i.mozRequestPointerLock&&i.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(e){e.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(e){var t,i,n=this.el.sceneEl.canvas,r=this.yawObject;this.touchStarted&&this.data.touchEnabled&&(i=2*Math.PI*(e.touches[0].pageX-this.touchStart.x)/n.clientWidth,t=this.data.reverseTouchDrag?1:-1,r.rotation.y-=.5*i*t,this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var e=this.el.sceneEl;e.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),e.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(e){var t=this.el.sceneEl;function i(){t.canvas.classList.add("a-grab-cursor")}function n(){t.canvas.classList.remove("a-grab-cursor")}t.canvas?e?i():n():e?t.addEventListener("render-target-loaded",i):t.addEventListener("render-target-loaded",n)},saveCameraPose:function(){var e=this.el;this.savedPose.position.copy(e.object3D.position),this.savedPose.rotation.copy(e.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var e=this.el,t=this.savedPose;this.hasSavedPose&&(e.object3D.position.copy(t.position),e.object3D.rotation.copy(t.rotation),this.hasSavedPose=!1)}}),"magicleap-one"),fd=ut+"controllers/magicleap/magicleap-one-controller.glb",md=(_("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.previousButtonValues={},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex=e.hand==="right"?0:e.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;Ot(this,ta,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:ta,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",fd)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,i=this.mapping.buttons[e.detail.id];i&&(i==="trigger"&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(i+"changed",e.detail.state))},onModelLoaded:function(e){e.detail.model.scale.set(.01,.01,.01)},onAxisMoved:function(e){Gt(this,this.mapping.axes,e)},updateModel:function(e,t){},setButtonColor:function(e,t){}}),et("components:material:error"));function ea(e,t){e.dispose(),t.unregisterMaterial(e),Object.keys(e).filter((function(i){return e[i]&&e[i].isTexture})).forEach((function(i){e[i].dispose()}))}_("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:Cl,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0},anisotropy:{default:0,min:0}},init:function(){this.material=null},update:function(e){var t=this.data;this.shader&&t.shader===e.shader||this.updateShader(t.shader),this.shader.update(this.data),this.updateMaterial(e)},updateSchema:function(e){var t,i,n,r;i=e&&e.shader,t=this.oldData&&this.oldData.shader,(n=Xt[r=i||t]&&Xt[r].schema)||md("Unknown shader schema "+r),t&&i===t||(this.extendSchema(n),this.updateBehavior())},updateBehavior:function(){var e,t,i=this.el.sceneEl,n=this.schema,r=this;function o(s,a){var A;for(A in t)t[A]=s;r.shader.update(t)}for(e in this.tick=void 0,t={},n)n[e].type==="time"&&(this.tick=o,t[e]=!0);i&&(this.tick?i.addBehavior(this):i.removeBehavior(this))},updateShader:function(e){var t,i=this.data,n=Xt[e]&&Xt[e].Shader;if(!n)throw new Error("Unknown shader "+e);(t=this.shader=new n).el=this.el,t.init(i),this.setMaterial(t.material),this.updateSchema(i)},updateMaterial:function(e){var t,i=this.data,n=this.material;for(t in n.alphaTest=i.alphaTest,n.depthTest=i.depthTest!==!1,n.depthWrite=i.depthWrite!==!1,n.opacity=i.opacity,n.flatShading=i.flatShading,n.side=(function(r){switch(r){case"back":return d.BackSide;case"double":return d.DoubleSide;default:return d.FrontSide}})(i.side),n.transparent=i.transparent!==!1||i.opacity<1,n.vertexColors=i.vertexColorsEnabled,n.visible=i.visible,n.blending=(function(r){switch(r){case"none":return d.NoBlending;case"additive":return d.AdditiveBlending;case"subtractive":return d.SubtractiveBlending;case"multiply":return d.MultiplyBlending;default:return d.NormalBlending}})(i.blending),n.dithering=i.dithering,e)break;!t||e.alphaTest===i.alphaTest&&e.side===i.side&&e.vertexColorsEnabled===i.vertexColorsEnabled||(n.needsUpdate=!0)},remove:function(){var e=new d.MeshBasicMaterial,t=this.material,i=this.el.getObject3D("mesh");i&&(i.material=e),ea(t,this.system)},setMaterial:function(e){var t,i=this.el,n=this.system;this.material&&ea(this.material,n),this.material=e,n.registerMaterial(e),(t=i.getObject3D("mesh"))?t.material=e:i.addEventListener("object3dset",(function r(o){o.detail.type==="mesh"&&o.target===i&&(i.getObject3D("mesh").material=e,i.removeEventListener("object3dset",r))}))}});var Fi,Oi,gr,ia,pr,na="oculus-touch",qe=ut+"controllers/oculus/oculus-touch-controller-",Ui=ut+"controllers/meta/",Ed={left:{modelUrl:qe+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new d.Vector3(-.005,.036,-.037),modelPivotRotation:new d.Euler(Math.PI/4.5,0,0)},right:{modelUrl:qe+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new d.Vector3(.005,.036,-.037),modelPivotRotation:new d.Euler(Math.PI/4.5,0,0)}},ra="oculus-touch",Se={"oculus-touch":Ed,"oculus-touch-v2":{left:{modelUrl:qe+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new d.Vector3(0,-.007,-.021),modelPivotRotation:new d.Euler(-Math.PI/4,0,0)},right:{modelUrl:qe+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new d.Vector3(0,-.007,-.021),modelPivotRotation:new d.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:qe+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new d.Vector3(0,0,0),modelPivotRotation:new d.Euler(0,0,0)},right:{modelUrl:qe+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new d.Vector3(0,0,0),modelPivotRotation:new d.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:Ui+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new d.Vector3(0,0,0),modelPivotRotation:new d.Euler(0,0,0)},right:{modelUrl:Ui+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new d.Vector3(0,0,0),modelPivotRotation:new d.Euler(0,0,0)}},"meta-quest-touch-plus":{left:{modelUrl:Ui+"quest-touch-plus-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new d.Vector3(0,0,0),modelPivotRotation:new d.Euler(0,0,0)},right:{modelUrl:Ui+"quest-touch-plus-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new d.Vector3(0,0,0),modelPivotRotation:new d.Euler(0,0,0)}}},oa={schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]}},after:["tracked-controls"],mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},bindMethods:function(){this.onButtonChanged=this.onButtonChanged.bind(this),this.onThumbstickMoved=this.onThumbstickMoved.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonDown=function(t){q(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){q(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e,e.data.hand)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e,e.data.hand)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.triggerEuler=new d.Euler},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.controllerObject3D;e&&(e.visible=!1),Ot(this,na,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(e){var t,i=this.data;if(i.model){if(this.controllerObject3D)return this.controllerObject3D.visible=!0,void this.el.setObject3D("mesh",this.controllerObject3D);if(this.displayModel=Se[i.controllerType]||Se[ra],i.controllerType==="auto"){t=ra;for(var n=Object.keys(Se),r=0;r<e.profiles.length;r++)if(n.indexOf(e.profiles[r])!==-1){t=e.profiles[r];break}this.displayModel=Se[t]}var o=this.displayModel[i.hand].modelUrl;this.isTouchV3orPROorPlus=this.displayModel===Se["oculus-touch-v3"]||this.displayModel===Se["meta-quest-touch-pro"]||this.displayModel===Se["meta-quest-touch-plus"],this.el.setAttribute("gltf-model",o)}},injectTrackedControls:function(e){var t=this.data,i=na;this.el.setAttribute("tracked-controls",{id:i,hand:t.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0}),this.loadModel(e)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t=this.mapping[this.data.hand].buttons[e.detail.id];if(t){if(this.isTouchV3orPROorPlus)this.onButtonChangedV3orPROorPlus(e);else{var i,n=this.buttonMeshes;t!=="trigger"&&t!=="grip"||(i=e.detail.state.value),n&&(t==="trigger"&&n.trigger&&(n.trigger.rotation.x=this.originalXRotationTrigger-i*(Math.PI/26)),t==="grip"&&n.grip&&(i*=this.data.hand==="left"?-1:1,n.grip.position.x=this.originalXPositionGrip+.004*i))}this.el.emit(t+"changed",e.detail.state)}},onButtonChangedV3orPROorPlus:function(e){var t,i=this.mapping[this.data.hand].buttons[e.detail.id],n=this.buttonObjects;n&&n[i]&&(t=e.detail.state.value,n[i].quaternion.slerpQuaternions(this.buttonRanges[i].min.quaternion,this.buttonRanges[i].max.quaternion,t),n[i].position.lerpVectors(this.buttonRanges[i].min.position,this.buttonRanges[i].max.position,t))},onModelLoaded:function(e){if(e.target===this.el&&this.data.model){if(this.isTouchV3orPROorPlus)this.onTouchV3orPROorPlusModelLoaded(e);else{var t,i=this.controllerObject3D=e.detail.model;(t=this.buttonMeshes={}).grip=i.getObjectByName("buttonHand"),this.originalXPositionGrip=t.grip&&t.grip.position.x,t.trigger=i.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=t.trigger&&t.trigger.rotation.x,t.thumbstick=i.getObjectByName("stick"),t.xbutton=i.getObjectByName("buttonX"),t.abutton=i.getObjectByName("buttonA"),t.ybutton=i.getObjectByName("buttonY"),t.bbutton=i.getObjectByName("buttonB")}for(var n in this.buttonMeshes)this.buttonMeshes[n]&&Cd(this.buttonMeshes[n]);this.applyOffset(e.detail.model),this.el.emit("controllermodelready",{name:"meta-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(e){e.position.copy(this.displayModel[this.data.hand].modelPivotOffset),e.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onTouchV3orPROorPlusModelLoaded:function(e){var t=this.controllerObject3D=e.detail.model,i=this.buttonObjects={},n=this.buttonMeshes={},r=this.buttonRanges={};n.grip=t.getObjectByName("squeeze"),i.grip=t.getObjectByName("xr_standard_squeeze_pressed_value"),r.grip={min:t.getObjectByName("xr_standard_squeeze_pressed_min"),max:t.getObjectByName("xr_standard_squeeze_pressed_max")},i.grip.minX=i.grip.position.x,n.thumbstick=t.getObjectByName("thumbstick"),i.thumbstick=t.getObjectByName("xr_standard_thumbstick_pressed_value"),r.thumbstick={min:t.getObjectByName("xr_standard_thumbstick_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_pressed_max")},i.thumbstickXAxis=t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_value"),r.thumbstickXAxis={min:t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_xaxis_pressed_max")},i.thumbstickYAxis=t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_value"),r.thumbstickYAxis={min:t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_min"),max:t.getObjectByName("xr_standard_thumbstick_yaxis_pressed_max")},n.trigger=t.getObjectByName("trigger"),i.trigger=t.getObjectByName("xr_standard_trigger_pressed_value"),r.trigger={min:t.getObjectByName("xr_standard_trigger_pressed_min"),max:t.getObjectByName("xr_standard_trigger_pressed_max")},r.trigger.diff={x:Math.abs(r.trigger.max.rotation.x)-Math.abs(r.trigger.min.rotation.x),y:Math.abs(r.trigger.max.rotation.y)-Math.abs(r.trigger.min.rotation.y),z:Math.abs(r.trigger.max.rotation.z)-Math.abs(r.trigger.min.rotation.z)};var o=this.data.hand==="left"?"x":"a",s=this.data.hand==="left"?"y":"b",a=o+"button",A=s+"button";n[a]=t.getObjectByName(o+"_button"),i[a]=t.getObjectByName(o+"_button_pressed_value"),r[a]={min:t.getObjectByName(o+"_button_pressed_min"),max:t.getObjectByName(o+"_button_pressed_max")},n[A]=t.getObjectByName(s+"_button"),i[A]=t.getObjectByName(s+"_button_pressed_value"),r[A]={min:t.getObjectByName(s+"_button_pressed_min"),max:t.getObjectByName(s+"_button_pressed_max")}},onAxisMoved:function(e){Gt(this,this.mapping[this.data.hand].axes,e)},onThumbstickMoved:function(e){if(this.buttonMeshes&&this.buttonMeshes.thumbstick)if(this.isTouchV3orPROorPlus)this.updateThumbstickTouchV3orPROorPlus(e);else for(var t in e.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[t]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[t]]-Math.PI/8*e.detail[t]*(t==="y"||this.data.hand==="right"?-1:1)},axisMap:{y:"x",x:"z"},updateThumbstickTouchV3orPROorPlus:function(e){var t=(e.detail.x+1)/2;this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickXAxis.min.quaternion,this.buttonRanges.thumbstickXAxis.max.quaternion,t);var i=(e.detail.y+1)/2;this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickYAxis.min.quaternion,this.buttonRanges.thumbstickYAxis.max.quaternion,i)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var i,n=this.buttonMeshes;n&&n[e]&&(i=t==="up"||t==="touchend"?n[e].originalColor||this.data.buttonColor:t==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,n[e].material.color.set(i))}};function Cd(e){e.traverse((function(t){var i;t.type==="Mesh"&&(i=t.material.clone(),e.originalColor=t.material.color,t.material.dispose(),t.material=i)}))}_("oculus-touch-controls",oa),_("meta-touch-controls",oa),_("obb-collider",{schema:{size:{default:0},trackedObject3D:{default:""},minimumColliderDimension:{default:.02},centerModel:{default:!1}},init:function(){this.previousScale=new d.Vector3().copy(this.el.object3D.scale),this.auxEuler=new d.Euler,this.boundingBox=new d.Box3,this.boundingBoxSize=new d.Vector3,this.updateCollider=this.updateCollider.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.updateBoundingBox=this.updateBoundingBox.bind(this),this.el.addEventListener("model-loaded",this.onModelLoaded),this.updateCollider(),this.system.addCollider(this.el)},remove:function(){this.system.removeCollider(this.el)},update:function(){this.data.trackedObject3D&&(this.trackedObject3DPath=this.data.trackedObject3D.split("."))},onModelLoaded:function(){this.data.centerModel&&this.centerModel(),this.updateCollider()},centerModel:function(){var e,t=this.el,i=t.components["gltf-model"]&&t.components["gltf-model"].model;i&&(this.el.removeObject3D("mesh"),e=new d.Box3().setFromObject(i).getCenter(new d.Vector3),i.position.x+=i.position.x-e.x,i.position.y+=i.position.y-e.y,i.position.z+=i.position.z-e.z,this.el.setObject3D("mesh",i))},updateCollider:function(){var e=this.el,t=this.boundingBoxSize,i=this.aabb=this.aabb||new ln;this.obb=this.obb||new ln,e.hasLoaded?(this.updateBoundingBox(),i.halfSize.copy(t).multiplyScalar(.5),this.el.sceneEl.systems["obb-collider"].data.showColliders&&this.showCollider()):e.addEventListener("loaded",this.updateCollider)},showCollider:function(){this.updateColliderMesh(),this.renderColliderMesh.visible=!0},updateColliderMesh:function(){var e=this.renderColliderMesh,t=this.boundingBoxSize;e?(e.geometry.dispose(),e.geometry=new d.BoxGeometry(t.x,t.y,t.z)):this.initColliderMesh()},hideCollider:function(){this.renderColliderMesh&&(this.renderColliderMesh.visible=!1)},initColliderMesh:function(){var e,t,i;e=this.boundingBoxSize,t=this.renderColliderGeometry=new d.BoxGeometry(e.x,e.y,e.z),(i=this.renderColliderMesh=new d.Mesh(t,new d.MeshLambertMaterial({color:65280,side:d.DoubleSide}))).matrixAutoUpdate=!1,i.matrixWorldAutoUpdate=!1,i.updateMatrixWorld=function(){},this.el.sceneEl.object3D.add(i)},updateBoundingBox:(Fi=new d.Vector3,Oi=new d.Vector3,gr=new d.Quaternion,ia=new d.Quaternion,pr=new d.Matrix4,function(){var e=this.auxEuler,t=this.boundingBox,i=this.data.size,n=this.trackedObject3D||this.el.object3D,r=this.boundingBoxSize,o=this.data.minimumColliderDimension;if(i)return this.boundingBoxSize.x=i,this.boundingBoxSize.y=i,void(this.boundingBoxSize.z=i);e.copy(n.rotation),n.rotation.set(0,0,0),n.parent.matrixWorld.decompose(Fi,gr,Oi),pr.compose(Fi,ia,Oi),n.parent.matrixWorld.copy(pr),t.setFromObject(n,!0),t.getSize(r),r.x=r.x<o?o:r.x,r.y=r.y<o?o:r.y,r.z=r.z<o?o:r.z,n.parent.matrixWorld.compose(Fi,gr,Oi),this.el.object3D.rotation.copy(e)}),checkTrackedObject:function(){var e,t=this.trackedObject3DPath;if(t&&t.length&&!this.trackedObject3D){e=this.el;for(var i=0;i<t.length&&(e=e[t[i]]);i++);e&&(this.trackedObject3D=e,this.updateCollider())}return this.trackedObject3D},tick:(function(){var e=new d.Vector3,t=new d.Vector3,i=new d.Quaternion,n=new d.Matrix4;return function(){var r=this.obb,o=this.renderColliderMesh,s=this.checkTrackedObject()||this.el.object3D;s&&(s.updateMatrix(),s.updateMatrixWorld(!0),s.matrixWorld.decompose(e,i,t),(Math.abs(t.x-this.previousScale.x)>1e-4||Math.abs(t.y-this.previousScale.y)>1e-4||Math.abs(t.z-this.previousScale.z)>1e-4)&&this.updateCollider(),this.previousScale.copy(t),t.set(1,1,1),n.compose(e,i,t),o&&o.matrixWorld.copy(n),r.copy(this.aabb),r.applyMatrix4(n))}})()});var vd=et("components:obj-model:warn"),yd=(_("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var e=this;this.model=null,this.objLoader=new NA,this.mtlLoader=new GA(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",(function(t){e.model&&t.detail.name==="material"&&e.applyMaterial()}))},update:function(){var e=this.data;e.obj&&(this.resetMesh(),this.loadObj(e.obj,e.mtl))},remove:function(){this.resetMesh()},resetMesh:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(e,t){var i=this,n=this.el,r=this.mtlLoader,o=this.objLoader,s=this.el.sceneEl.systems.renderer,a=t.substr(0,t.lastIndexOf("/")+1);if(t)return n.hasAttribute("material")&&vd("Material component properties are ignored when a .MTL is provided"),r.setResourcePath(a),void r.load(t,(function(A){A.preload(),o.setMaterials(A),o.load(e,(function(l){i.model=l,i.model.traverse((function(h){if(h.isMesh){var c=h.material;c.map&&s.applyColorCorrection(c.map),c.emissiveMap&&s.applyColorCorrection(c.emissiveMap)}})),n.setObject3D("mesh",l),n.emit("model-loaded",{format:"obj",model:l})}))}));o.load(e,(function(A){i.model=A,i.applyMaterial(),n.setObject3D("mesh",A),n.emit("model-loaded",{format:"obj",model:A})}))},applyMaterial:function(){var e=this.el.components.material;e&&this.model.traverse((function(t){t instanceof d.Mesh&&(t.material=e.material)}))}}),ut+"controllers/oculus/go/oculus-go-controller.gltf"),sa="oculus-go",aa=(_("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){Ot(this,sa,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{hand:t.hand,idPrefix:sa}),this.data.model&&this.el.setAttribute("gltf-model",yd)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,i=e.detail.model;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).trigger=i.getObjectByName("oculus_go_button_trigger"),t.trackpad=i.getObjectByName("oculus_go_touchpad"),t.touchpad=i.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){Gt(this,this.mapping.axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var i=this.buttonMeshes;if(i&&i[e]){var n;switch(t){case"down":n=this.data.buttonHighlightColor;break;case"touchstart":n=this.data.buttonTouchedColor;break;default:n=this.data.buttonColor}i[e].material.color.set(n)}}}),"pico-4"),bd=ut+"controllers/pico/pico4/",Aa=(_("pico-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){q(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e,e.data.hand)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e,e.data.hand)},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex=e.hand==="right"?0:e.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;Ot(this,aa,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:aa,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",bd+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,i=this.mapping[this.data.hand].buttons[e.detail.id];i&&(i==="trigger"&&(t=e.detail.state.value,console.log("analog value of trigger press: "+t)),this.el.emit(i+"changed",e.detail.state))},onModelLoaded:function(e){e.target===this.el&&this.data.model&&this.el.emit("controllermodelready",{name:"pico-controls",model:this.data.model,rayOrigin:new d.Vector3(0,0,0)})},onAxisMoved:function(e){Gt(this,this.mapping[this.data.hand].axes,e)}}),_("position",{schema:{type:"vec3"},update:function(){var e=this.el.object3D,t=this.data;e.position.set(t.x,t.y,t.z)},remove:function(){this.el.object3D.position.set(0,0,0)}}),et("components:raycaster:warn")),Bd=/^[\w\s-.,[\]#]*$/,wd={childList:!0,attributes:!0,subtree:!0},la="raycaster-intersected-cleared",ha="raycaster-intersection-cleared";function ca(e,t){var i;for(e.length=t.length,i=0;i<t.length;i++)e[i]=t[i]}_("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new d.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new d.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new d.Vector3,this.otherLineEndVec3=new d.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(e){var t=this.data,i=this.el,n=this.raycaster;n.far=t.far,n.near=t.near,!t.showLine||t.far===e.far&&t.origin===e.origin&&t.direction===e.direction&&e.showLine||(this.unitLineEndVec3.copy(t.direction).normalize(),this.drawLine()),!t.showLine&&e.showLine&&i.removeAttribute("line"),t.objects===e.objects||Bd.test(t.objects)||Aa('[raycaster] Selector "'+t.objects+'" may not update automatically with DOM changes.'),t.objects||Aa('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),t.autoRefresh!==e.autoRefresh&&i.isPlaying&&(t.autoRefresh?this.addEventListeners():this.removeEventListeners()),e.enabled&&!t.enabled&&this.clearAllIntersections(),t.objects!==e.objects&&this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,wd),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var e,t=this.data;e=t.objects?this.el.sceneEl.querySelectorAll(t.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(e),this.dirty=!1},tock:function(e){var t=this.data,i=this.prevCheckTime;t.enabled&&(i&&e-i<t.interval||(this.prevCheckTime=e,this.checkIntersections()))},checkIntersections:function(){var e,t,i=this.clearedIntersectedEls,n=this.el,r=this.data,o=this.intersectedEls,s=this.intersections,a=this.newIntersectedEls,A=this.newIntersections,l=this.prevIntersectedEls,h=this.rawIntersections;for(this.dirty&&this.refreshObjects(),ca(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),h.length=0,this.raycaster.intersectObjects(this.objects,!0,h),s.length=0,o.length=0,e=0;e<h.length;e++)t=h[e],r.showLine&&t.object===n.getObject3D("line")||t.object.el&&(s.push(t),o.push(t.object.el));for(A.length=0,a.length=0,e=0;e<s.length;e++)l.indexOf(s[e].object.el)===-1&&(A.push(s[e]),a.push(s[e].object.el));for(i.length=0,e=0;e<l.length;e++)o.indexOf(l[e])===-1&&(l[e].emit(la,this.intersectedClearedDetail),i.push(l[e]));for(i.length&&n.emit(ha,this.intersectionClearedDetail),e=0;e<a.length;e++)a[e].emit("raycaster-intersected",this.intersectedDetail);A.length&&(this.intersectionDetail.els=a,this.intersectionDetail.intersections=A,n.emit("raycaster-intersection",this.intersectionDetail)),(l.length===0&&s.length>0||l.length>0&&s.length===0||l.length&&s.length&&l[0]!==s[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=s,n.emit("raycaster-closest-entity-changed",this.intersectionDetail)),r.showLine&&setTimeout(this.updateLine)},updateLine:function(){var e,t=this.el,i=this.intersections;i.length&&(e=i[0].object.el===t&&i[1]?i[1].distance:i[0].distance),this.drawLine(e)},getIntersection:function(e){var t,i;for(t=0;t<this.intersections.length;t++)if((i=this.intersections[t]).object.el===e)return i;return null},updateOriginDirection:(function(){var e=new d.Vector3,t=new d.Vector3;return function(){var i=this.el,n=this.data;n.useWorldCoordinates?this.raycaster.set(n.origin,n.direction):(i.object3D.updateMatrixWorld(),t.setFromMatrixPosition(i.object3D.matrixWorld),n.origin.x===0&&n.origin.y===0&&n.origin.z===0||(t=i.object3D.localToWorld(t.copy(n.origin))),e.copy(n.direction).transformDirection(i.object3D.matrixWorld).normalize(),this.raycaster.set(t,e))}})(),drawLine:function(e){var t,i=this.data,n=this.el;t=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,e===void 0&&(e=i.far===1/0?1e3:i.far),this.lineData.start=i.origin,this.lineData.end=t.copy(this.unitLineEndVec3).multiplyScalar(e).add(i.origin),this.lineData.color=i.lineColor,this.lineData.opacity=i.lineOpacity,n.setAttribute("line",this.lineData)},flattenObject3DMaps:function(e){var t,i,n=this.objects,r=this.el.sceneEl.object3D;function o(a){return a.parent?o(a.parent):a===r}for(n.length=0,i=0;i<e.length;i++){var s=e[i];if(s.isEntity&&s.object3D&&o(s.object3D))for(t in s.object3DMap)n.push(s.getObject3D(t))}return n},clearAllIntersections:function(){var e;for(e=0;e<this.intersectedEls.length;e++)this.intersectedEls[e].emit(la,this.intersectedClearedDetail);ca(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(ha,this.intersectionClearedDetail)}});var da,Oe,ua,ga,fr=d.MathUtils.degToRad,mr=(_("rotation",{schema:{type:"vec3"},update:function(){var e=this.data;this.el.object3D.rotation.set(fr(e.x),fr(e.y),fr(e.z),"YXZ")},remove:function(){this.el.object3D.rotation.set(0,0,0)}}),_("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var e=this.data;this.el.object3D.scale.set(e.x,e.y,e.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}}),_("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=this.update.bind(this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var e=this.data;this.updateDescendants(e.cast,e.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(e,t){var i=this.el.sceneEl;this.el.object3D.traverse((function(n){if(n instanceof d.Mesh&&(n.castShadow=e,n.receiveShadow=t,i.hasLoaded&&n.material))for(var r=Array.isArray(n.material)?n.material:[n.material],o=0;o<r.length;o++)r[o].needsUpdate=!0}))}}),et("components:sound:warn")),Id=(_("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},loopStart:{default:0},loopEnd:{default:0},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var e=this;this.listener=null,this.audioLoader=new d.AudioLoader,this.pool=new d.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){e.playSound()}},update:function(e){var t,i,n=this.data,r=n.src!==e.src;if(r){if(!n.src)return;this.setupSound()}for(t=0;t<this.pool.children.length;t++)i=this.pool.children[t],n.positional&&(i.setDistanceModel(n.distanceModel),i.setMaxDistance(n.maxDistance),i.setRefDistance(n.refDistance),i.setRolloffFactor(n.rolloffFactor)),i.setLoop(n.loop),i.setLoopStart(n.loopStart),n.loopStart!==0&&n.loopEnd===0?i.setLoopEnd(i.buffer.duration):i.setLoopEnd(n.loopEnd),i.setVolume(n.volume),i.isPaused=!1;if(n.on!==e.on&&this.updateEventListener(e.on),r){var o=this;this.loaded=!1,this.audioLoader.load(n.src,(function(s){for(t=0;t<o.pool.children.length;t++)(i=o.pool.children[t]).setBuffer(s);o.loaded=!0,d.Cache.remove(n.src),(o.data.autoplay||o.mustPlay)&&o.playSound(o.processSound),o.el.emit("sound-loaded",o.evtDetail,!1)}))}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var e;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(e=0;e<this.pool.children.length;e++)this.pool.children[e].disconnect()}catch{mr("Audio source not properly disconnected")}},updateEventListener:function(e){var t=this.el;e&&t.removeEventListener(e,this.playSoundBound),t.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var e,t,i=this.el,n=i.sceneEl,r=this;this.pool.children.length>0&&(this.stopSound(),i.removeObject3D("sound"));var o=this.listener=n.audioListener||new d.AudioListener;for(n.audioListener=o,n.camera&&n.camera.add(o),n.addEventListener("camera-set-active",(function(s){s.detail.cameraEl.getObject3D("camera").add(o)})),this.pool=new d.Group,e=0;e<this.data.poolSize;e++)t=this.data.positional?new d.PositionalAudio(o):new d.Audio(o),this.pool.add(t);for(i.setObject3D(this.attrName,this.pool),e=0;e<this.pool.children.length;e++)(t=this.pool.children[e]).onEnded=function(){this.isPlaying=!1,r.el.emit("sound-ended",r.evtDetail,!1)}},pauseSound:function(){var e,t;for(this.isPlaying=!1,e=0;e<this.pool.children.length;e++)(t=this.pool.children[e]).source&&t.source.buffer&&t.isPlaying&&!t.isPaused&&(t.isPaused=!0,t.pause())},playSound:function(e){var t,i,n;if(!this.loaded)return mr("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0,void(this.processSound=e);for(t=!1,this.isPlaying=!0,i=0;i<this.pool.children.length;i++)(n=this.pool.children[i]).isPlaying||!n.buffer||t||(e&&e(n),n.play(),n.isPaused=!1,t=!0);t?(this.mustPlay=!1,this.processSound=void 0):mr("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){var e,t;for(this.isPlaying=!1,e=0;e<this.pool.children.length;e++){if(!(t=this.pool.children[e]).source||!t.source.buffer)return;t.stop()}}}),G(4433)),xd=G.n(Id),Qd=G(5751),Md=G.n(Qd),Ue=et("components:text:error"),Ld=et("components:text:warn"),te=ut+"fonts/",pa={aileronsemibold:te+"Aileron-Semibold.fnt",dejavu:te+"DejaVu-sdf.fnt",exo2bold:te+"Exo2Bold.fnt",exo2semibold:te+"Exo2SemiBold.fnt",kelsonsans:te+"KelsonSans.fnt",monoid:te+"Monoid.fnt",mozillavr:te+"mozillavr.fnt",roboto:te+"Roboto-msdf.json",sourcecodepro:te+"SourceCodePro.fnt"},fa=["roboto"],Er="roboto",ma=new function(){var e=this.cache={};this.get=function(t,i){return t in e||(e[t]=i()),e[t]}},Ea={},_i={},Sd=/^\w+:/;function Ca(e,t,i){return e||(.5+t)*i}_("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:Er},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:Xt},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=xd()(),this.createOrUpdateMaterial(),this.explicitGeoDimensionsChecked=!1},update:function(e){var t=this.data,i=this.currentFont;_i[t.font]?this.texture=_i[t.font]:(this.texture=_i[t.font]=new d.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),e.font===t.font?i&&(this.updateGeometry(this.geometry,i),this.updateLayout()):this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var e,t,i,n=this.data,r=this.material,o=this.shaderData;if(i=n.shader,fa.indexOf(n.font)!==-1||n.font.indexOf("-msdf.")>=0?i="msdf":n.font in pa&&fa.indexOf(n.font)===-1&&(i="sdf"),e=(this.shaderObject&&this.shaderObject.name)!==i,o.alphaTest=n.alphaTest,o.color=n.color,o.map=this.texture,o.opacity=n.opacity,o.side=(function(s){switch(s){case"back":return d.FrontSide;case"double":return d.DoubleSide;default:return d.BackSide}})(n.side),o.transparent=n.transparent,o.negate=n.negate,!e)return this.shaderObject.update(o),r.transparent=o.transparent,void(r.side=o.side);t=(function(s,a,A){var l,h;return(h=new Xt[a].Shader).el=s,h.init(A),h.update(A),(l=h.material).transparent=A.transparent,{material:l,shader:h}})(this.el,i,o),this.material=t.material,this.shaderObject=t.shader,this.material.side=o.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var e,t=this.data,i=this.el,n=this.geometry,r=this;t.font||Ld("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),e=this.lookupFont(t.font||Er)||t.font,ma.get(e,(function(){return(function(o,s){return new Promise((function(a,A){Md()(o,(function(l,h){if(l)return Ue("Error loading font",o),void A(l);o.indexOf("/Roboto-msdf.json")>=0&&(s=30),s&&h.chars.forEach((function(c){c.yoffset+=s})),a(h)}))}))})(e,t.yOffset)})).then((function(o){var s;if(o.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");Ea[e]||(o.widthFactor=Ea[o]=(function(a){var A=0,l=0,h=0;return a.chars.forEach((function(c){A+=c.xadvance,c.id>=48&&c.id<=57&&(h++,l+=c.xadvance)})),h?l/h:A/a.chars.length})(o)),r.currentFont=o,s=r.getFontImageSrc(),ma.get(s,(function(){return(function(a){return new Promise((function(A,l){new d.ImageLoader().load(a,(function(h){A(h)}),void 0,(function(){Ue("Error loading font image",a),l(null)}))}))})(s)})).then((function(a){var A=r.texture;A&&(A.image=a,A.needsUpdate=!0,_i[t.font]=A,r.texture=A,r.initMesh(),r.currentFont=o,r.updateGeometry(n,o),r.updateLayout(),r.mesh.visible=!0,i.emit("textfontset",{font:t.font,fontObj:o}))})).catch((function(a){Ue(a.message),Ue(a.stack)}))})).catch((function(o){Ue(o.message),Ue(o.stack)}))},initMesh:function(){this.mesh||(this.mesh=new d.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var e=this.lookupFont(this.data.font||Er)||this.data.font,t=this.currentFont.pages[0];return t.match(Sd)&&t.indexOf("http")!==0?e.replace(/(\.fnt)|(\.json)/,".png"):d.LoaderUtils.extractUrlBase(e)+t},updateLayout:function(){var e,t,i,n,r,o,s,a,A,l=this.el,h=this.data,c=this.geometry,g=this.mesh;if(g&&c.layout){if(i=l.getAttribute("geometry"),n=(o=(s=h.width||i&&i.width||1)/Ca(h.wrapPixels,h.wrapCount,this.currentFont.widthFactor))*((r=c.layout).height+r.descender),i&&i.primitive==="plane"&&(this.explicitGeoDimensionsChecked||(this.explicitGeoDimensionsChecked=!0,this.hasExplicitGeoWidth=!!i.width,this.hasExplicitGeoHeight=!!i.height),this.hasExplicitGeoWidth||l.setAttribute("geometry","width",s),this.hasExplicitGeoHeight||l.setAttribute("geometry","height",n)),(e=h.anchor==="align"?h.align:h.anchor)==="left")a=0;else if(e==="right")a=-1*r.width;else{if(e!=="center")throw new TypeError("Invalid text.anchor property value",e);a=-1*r.width/2}if((t=h.baseline)==="bottom")A=0;else if(t==="top")A=-1*r.height+r.ascender;else{if(t!=="center")throw new TypeError("Invalid text.baseline property value",t);A=-1*r.height/2}g.position.x=a*o+h.xOffset,g.position.y=A*o,g.position.z=h.zOffset,g.scale.set(o,-1*o,o)}},lookupFont:function(e){return pa[e]},updateGeometry:(da={},Oe={},ua=/\\n/g,ga=/\\t/g,function(e,t){var i=this.data;Oe.font=t,Oe.lineHeight=i.lineHeight&&isFinite(i.lineHeight)?i.lineHeight:t.common.lineHeight,Oe.text=i.value.toString().replace(ua,`
`).replace(ga,"	"),Oe.width=Ca(i.wrapPixels,i.wrapCount,t.widthFactor),e.update(Dt(da,i,Oe))})});var _e,Cr,va=(_("tracked-controls",{schema:{id:{type:"string",default:""},controller:{default:-1},autoHide:{default:!0},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},iterateControllerProfiles:{default:!1}},init:function(){this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.updateController=this.updateController.bind(this)},update:function(){this.updateController()},play:function(){var e=this.el.sceneEl;this.updateController(),e.addEventListener("controllersupdated",this.updateController)},pause:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(e){return!(!this.controller||this.controller.gamepad||e.inputSource.handedness!=="none"&&e.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=ko(this.system.controllers,this.data.id,this.data.hand,this.data.controller,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller},tick:function(){var e=this.el.sceneEl,t=this.controller,i=e.frame;this.data.autoHide&&(this.el.object3D.visible=!!t),t&&e.frame&&this.system.referenceSpace&&(t.hand||(this.pose=i.getPose(t.gripSpace,this.system.referenceSpace),this.updatePose(),this.updateButtons()))},updatePose:function(){var e=this.el.object3D,t=this.pose;t&&(e.matrix.elements=t.transform.matrix,e.matrix.decompose(e.position,e.rotation,e.scale))},updateButtons:function(){var e,t,i,n=this.controller;if(n&&n.gamepad){for(i=n.gamepad,t=0;t<i.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[t]||(this.buttonEventDetails[t]={id:t,state:this.buttonStates[t]}),e=i.buttons[t],this.handleButton(t,e);this.handleAxes()}},handleButton:function(e,t){return!!(this.handlePress(e,t)|this.handleTouch(e,t)|this.handleValue(e,t))&&(this.el.emit("buttonchanged",this.buttonEventDetails[e],!1),!0)},handleAxes:function(){var e,t=!1,i=this.controller.gamepad.axes,n=this.axis,r=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),e=0;e<i.length;++e)r.push(n[e]!==i[e]),r[e]&&(t=!0);if(!t)return!1;for(this.axis.splice(0,this.axis.length),e=0;e<i.length;e++)this.axis.push(i[e]);return this.el.emit("axismove",this.axisMoveEventDetail,!1),!0},handlePress:function(e,t){var i,n=this.buttonStates[e];return t.pressed!==n.pressed&&(i=t.pressed?"buttondown":"buttonup",this.el.emit(i,this.buttonEventDetails[e],!1),n.pressed=t.pressed,!0)},handleTouch:function(e,t){var i,n=this.buttonStates[e];return t.touched!==n.touched&&(i=t.touched?"touchstart":"touchend",this.el.emit(i,this.buttonEventDetails[e],!1),n.touched=t.touched,!0)},handleValue:function(e,t){var i=this.buttonStates[e];return t.value!==i.value&&(i.value=t.value,!0)}}),_("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}}),ut+"controllers/valve/index/valve-index-"),Dd={left:va+"left.glb",right:va+"right.glb"},ya="valve",kd={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},Td={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},Rd=(_("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data,t=e.hand==="right"?0:e.hand==="left"?1:2;Ot(this,ya,{index:t,iterateControllerProfiles:!0,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:ya,controller:t.hand==="right"?1:t.hand==="left"?0:2,hand:t.hand}),this.loadModel()},loadModel:function(){var e=this.data;e.model&&this.el.setAttribute("gltf-model",""+Dd[e.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,i=this.mapping.buttons[e.detail.id],n=this.buttonMeshes;i&&(i==="trigger"&&(t=e.detail.state.value,n&&n.trigger&&(n.trigger.rotation.x=this.triggerOriginalRotationX-t*(Math.PI/40))),this.el.emit(i+"changed",e.detail.state))},onModelLoaded:function(e){var t,i=e.detail.model,n=this;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).grip={left:i.getObjectByName("leftgrip"),right:i.getObjectByName("rightgrip")},t.menu=i.getObjectByName("menubutton"),t.system=i.getObjectByName("systembutton"),t.trackpad=i.getObjectByName("touchpad"),t.trigger=i.getObjectByName("trigger"),this.triggerOriginalRotationX=t.trigger.rotation.x,Object.keys(t).forEach((function(r){n.setButtonColor(r,n.data.buttonColor)})),i.position.copy(Td[this.data.hand]),i.rotation.copy(kd[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controls",model:this.data.model,rayOrigin:new d.Vector3(0,0,0)}))},onAxisMoved:function(e){Gt(this,this.mapping.axes,e)},updateModel:function(e,t){var i;this.data.model&&(t.indexOf("touch")!==-1||(i=t==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(e,i)))},setButtonColor:function(e,t){}}),ut+"controllers/vive/vr_controller_vive.obj"),Fd=ut+"controllers/vive/vr_controller_vive.mtl",ba="htc-vive",Od=(_("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","none"]},init:function(){var e=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.previousButtonValues={},this.bindMethods()},update:function(){var e=this.data;this.controllerIndex=e.hand==="right"?0:e.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data;Ot(this,ba,{index:this.controllerIndex,hand:e.hand})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:ba,hand:t.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("obj-model",{obj:Rd,mtl:Fd})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,i=this.mapping.buttons[e.detail.id],n=this.buttonMeshes;i&&(i==="trigger"&&(t=e.detail.state.value,n&&n.trigger&&(n.trigger.rotation.x=-t*(Math.PI/12))),this.el.emit(i+"changed",e.detail.state))},onModelLoaded:function(e){var t,i=e.detail.model,n=this;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).grip={left:i.getObjectByName("leftgrip"),right:i.getObjectByName("rightgrip")},t.menu=i.getObjectByName("menubutton"),t.system=i.getObjectByName("systembutton"),t.trackpad=i.getObjectByName("touchpad"),t.touchpad=i.getObjectByName("touchpad"),t.trigger=i.getObjectByName("trigger"),Object.keys(t).forEach((function(r){n.setButtonColor(r,n.data.buttonColor)})),i.position.set(0,-.015,.04))},onAxisMoved:function(e){Gt(this,this.mapping.axes,e)},updateModel:function(e,t){var i;this.data.model&&(t.indexOf("touch")!==-1||(i=t==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(e,i)))},setButtonColor:function(e,t){var i=this.buttonMeshes;if(i)return e==="grip"?(i.grip.left.material.color.set(t),void i.grip.right.material.color.set(t)):void i[e].material.color.set(t)}}),ut+"controllers/vive/focus-controller/focus-controller.gltf"),Ba="htc-vive-focus",wa=(_("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){q(t.detail.id,"down",e)},this.onButtonUp=function(t){q(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){q(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){q(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){Ot(this,Ba,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){this.el.setAttribute("tracked-controls",{idPrefix:Ba}),this.data.model&&this.el.setAttribute("gltf-model",Od)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,i=e.detail.model;e.target===this.el&&this.data.model&&((t=this.buttonMeshes={}).trigger=i.getObjectByName("BumperKey"),t.triggerPressed=i.getObjectByName("BumperKey_Press"),t.triggerPressed&&(t.triggerPressed.visible=!1),t.touchpad=i.getObjectByName("TouchPad"),t.touchpadPressed=i.getObjectByName("TouchPad_Press"),t.trackpad=i.getObjectByName("TouchPad"),t.trackpadPressed=i.getObjectByName("TouchPad_Press"),t.trackpadPressed&&(t.trackpadPressed.visible=!1))},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){Gt(this,this.mapping.axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var i=this.buttonMeshes,n=e+"Pressed";if(i&&i[e]&&i[n]){var r;switch(t){case"down":r=this.data.buttonHighlightColor;break;case"touchstart":r=this.data.buttonTouchedColor}r&&i[n].material.color.set(r),i[n].visible=!!r,i[e].visible=!r}}}),{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}),Ud=Oo,Ia=1e-5,_d=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];_("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},after:["look-controls"],init:function(){this.keys={},this.easing=1.1,this.velocity=new d.Vector3,this.onBlur=this.onBlur.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.attachVisibilityEventListeners()},tick:function(e,t){var i=this.data,n=this.el,r=this.velocity;(r[i.adAxis]||r[i.wsAxis]||!(function(o){var s;for(s in o)return!1;return!0})(this.keys))&&(t/=1e3,this.updateVelocity(t),(r[i.adAxis]||r[i.wsAxis])&&n.object3D.position.add(this.getMovementVector(t)))},update:function(e){e.adAxis!==this.data.adAxis&&(this.velocity[e.adAxis]=0),e.wsAxis!==this.data.wsAxis&&(this.velocity[e.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(e){var t,i,n,r,o,s=this.data,a=this.keys,A=this.velocity;if(i=s.adAxis,r=s.wsAxis,e>.2)return A[i]=0,void(A[r]=0);var l=Math.pow(1/this.easing,60*e);A[i]!==0&&(A[i]=A[i]*l),A[r]!==0&&(A[r]=A[r]*l),Math.abs(A[i])<Ia&&(A[i]=0),Math.abs(A[r])<Ia&&(A[r]=0),s.enabled&&(t=s.acceleration,s.adEnabled&&(n=s.adInverted?-1:1,(a.KeyA||a.ArrowLeft)&&(A[i]-=n*t*e),(a.KeyD||a.ArrowRight)&&(A[i]+=n*t*e)),s.wsEnabled&&(o=s.wsInverted?-1:1,(a.KeyW||a.ArrowUp)&&(A[r]-=o*t*e),(a.KeyS||a.ArrowDown)&&(A[r]+=o*t*e)))},getMovementVector:(_e=new d.Vector3(0,0,0),Cr=new d.Euler(0,0,0,"YXZ"),function(e){var t,i=this.el.getAttribute("rotation"),n=this.velocity;return _e.copy(n),_e.multiplyScalar(e),i&&(t=this.data.fly?i.x:0,Cr.set(d.MathUtils.degToRad(t),d.MathUtils.degToRad(i.y),0),_e.applyEuler(Cr)),_e}),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var e=Object.keys(this.keys),t=0;t<e.length;t++)delete this.keys[e[t]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(e){var t;Ud(e)&&(t=e.code||wa[e.keyCode],_d.indexOf(t)!==-1&&(this.keys[t]=!0))},onKeyUp:function(e){var t;t=e.code||wa[e.keyCode],delete this.keys[t]}});var vr,Pi,ii,ni=et("components:windows-motion-controls:debug"),Pe=et("components:windows-motion-controls:warn"),Pd=ut+"controllers/microsoft/",xa={left:"left.glb",right:"right.glb",default:"universal.glb"},Qa="windows-mixed-reality",Ne=(_("windows-motion-controls",{schema:{hand:{default:"right"},pair:{default:0},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=this.onModelError.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var e=this,t=this.el;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(i){q(i.detail.id,"down",e)},this.onButtonUp=function(i){q(i.detail.id,"up",e)},this.onButtonTouchStart=function(i){q(i.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(i){q(i.detail.id,"touchend",e)},this.onControllerConnected=function(){e.setModelVisibility(!0)},this.onControllerDisconnected=function(){e.setModelVisibility(!1)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new d.Vector3,direction:new d.Vector3(0,0,-1),createdFromMesh:!1},t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-error",this.onModelError),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-error",this.onModelError),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){Ot(this,Qa,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(this.data.model&&!this.rayOrigin.createdFromMesh){var e=this.createControllerModelUrl();this.loadModel(e)}else this.modelReady()},createControllerModelUrl:function(e){var t=this.data.hand;return Pd+"default/"+(xa[t]||xa.default)},injectTrackedControls:function(){var e=this.data;this.el.setAttribute("tracked-controls",{idPrefix:Qa,controller:e.pair,hand:e.hand}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(e){var t=this.createControllerModelUrl(!0);e.detail.src!==t?(Pe("Failed to load controller model for device, attempting to load default."),this.loadModel(t)):Pe("Failed to load default controller model.")},loadModel:function(e){this.el.setAttribute("gltf-model","url("+e+")")},onModelLoaded:function(e){var t,i,n,r,o=this.controllerModel=e.detail.model,s=this.loadedMeshInfo;if(e.target===this.el){if(ni("Processing model"),s.buttonMeshes={},s.axisMeshes={},o){for(t=0;t<this.mapping.buttons.length;t++)(i=this.mapping.buttonMeshNames[this.mapping.buttons[t]])?(n=o.getObjectByName(i))?(r={index:t,value:a(n,"VALUE"),pressed:a(n,"PRESSED"),unpressed:a(n,"UNPRESSED")}).value&&r.pressed&&r.unpressed?s.buttonMeshes[this.mapping.buttons[t]]=r:Pe("Missing button submesh under mesh with name: "+i+"(VALUE: "+!!r.value+", PRESSED: "+!!r.pressed+", UNPRESSED:"+!!r.unpressed+")"):Pe("Missing button mesh with name: "+i):ni("Skipping unknown button at index: "+t+" with mapped name: "+this.mapping.buttons[t]);for(t=0;t<this.mapping.axisMeshNames.length;t++)(i=this.mapping.axisMeshNames[t])?(n=o.getObjectByName(i))?(r={index:t,value:a(n,"VALUE"),min:a(n,"MIN"),max:a(n,"MAX")}).value&&r.min&&r.max?s.axisMeshes[t]=r:Pe("Missing axis submesh under mesh with name: "+i+"(VALUE: "+!!r.value+", MIN: "+!!r.min+", MAX:"+!!r.max+")"):Pe("Missing axis mesh with name: "+i):ni("Skipping unknown axis at index: "+t);this.calculateRayOriginFromMesh(o),this.setModelVisibility()}ni("Model load complete.")}function a(A,l){for(var h=0,c=A.children.length;h<c;h++){var g=A.children[h];if(g&&g.name===l)return g}}},calculateRayOriginFromMesh:(function(){var e=new d.Quaternion;return function(t){var i;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,i=t.getObjectByName(this.mapping.pointingPoseMeshName)){var n=t.parent;n&&(t.parent=null,t.updateMatrixWorld(!0),t.parent=n),i.getWorldPosition(this.rayOrigin.origin),i.getWorldQuaternion(e),this.rayOrigin.direction.applyQuaternion(e),n&&t.updateMatrixWorld(!0)}else ni("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}})(),lerpAxisTransform:(function(){var e=new d.Quaternion;return function(t,i){var n=this.loadedMeshInfo.axisMeshes[t];if(n){var r=n.min,o=n.max,s=n.value,a=.5*i+.5;s.setRotationFromQuaternion(e.copy(r.quaternion).slerp(o.quaternion,a)),s.position.lerpVectors(r.position,o.position,a)}}})(),lerpButtonTransform:(function(){var e=new d.Quaternion;return function(t,i){var n=this.loadedMeshInfo.buttonMeshes[t];if(n){var r=n.unpressed,o=n.pressed,s=n.value;s.setRotationFromQuaternion(e.copy(r.quaternion).slerp(o.quaternion,i)),s.position.lerpVectors(r.position,o.position,i)}}})(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(t,e.detail.state.value),this.el.emit(t+"changed",e.detail.state))},onAxisMoved:function(e){var t=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var i=0;i<t;i++)this.lerpAxisTransform(i,e.detail.axis[i]||0);Gt(this,this.mapping.axes,e)},setModelVisibility:function(e){var t=this.el.getObject3D("mesh");this.controllerPresent&&(e=e!==void 0?e:this.modelVisible,this.modelVisible=e,t&&(t.visible=e))}}),vr=new d.Quaternion,Pi=new d.Vector3,function(e,t,i){t.position.copy(e.transform.position),t.quaternion.copy(e.transform.orientation),Pi.copy(i),vr.copy(e.transform.orientation),Pi.applyQuaternion(vr),t.position.sub(Pi)});function It(e,t){this.renderer=e,this.xrHitTestSource=null,e.xr.addEventListener("sessionend",(function(){this.xrHitTestSource=null}).bind(this)),e.xr.addEventListener("sessionstart",(function(){this.sessionStart(t)}).bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(t)}function yr(e){console.warn(e.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}Ne.tempFakePose={transform:{orientation:new d.Quaternion,position:new d.Vector3}},It.prototype.previousFrameAnchors=new Set,It.prototype.anchorToObject3D=new Map,It.prototype.sessionStart=function(e){this.session=this.renderer.xr.getSession(),"requestHitTestSource"in this.session?e.space?this.session.requestHitTestSource(e).then((function(t){this.xrHitTestSource=t}).bind(this)).catch(yr):e.profile&&this.session.requestHitTestSourceForTransientInput(e).then((function(t){this.xrHitTestSource=t,this.transient=!0}).bind(this)).catch(yr):yr({message:"No requestHitTestSource on the session."})},It.prototype.anchorFromLastHitTestResult=function(e,t){var i=this.lastHitTest;if(i){var n={object3D:e,offset:t};Array.from(this.anchorToObject3D.entries()).forEach((function(r){var o=r[1].object3D,s=r[0];o===e&&(this.anchorToObject3D.delete(s),s.delete())}).bind(this)),i.createAnchor&&i.createAnchor().then((function(r){this.anchorToObject3D.set(r,n)}).bind(this)).catch((function(r){console.warn(r.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')}))}},It.prototype.doHit=function(e){if(this.renderer.xr.isPresenting){var t,i,n=this.renderer.xr.getReferenceSpace(),r=e.getViewerPose(n);return this.xrHitTestSource&&r?this.transient?(t=e.getHitTestResultsForTransientInput(this.xrHitTestSource)).length>0&&(i=t[0].results).length>0&&(this.lastHitTest=i[0],i[0].getPose(n)):(t=e.getHitTestResults(this.xrHitTestSource)).length>0&&(this.lastHitTest=t[0],t[0].getPose(n)):void 0}},It.updateAnchorPoses=function(e,t){var i=e.trackedAnchors||It.prototype.previousFrameAnchors;It.prototype.previousFrameAnchors.forEach((function(n){i.has(n)||It.prototype.anchorToObject3D.delete(n)})),i.forEach((function(n){var r,o,s,a;try{if(r=e.getPose(n.anchorSpace,t)){if(!(o=It.prototype.anchorToObject3D.get(n)))return;s=o.offset,a=o.object3D,Ne(r,a,s)}}catch(A){console.error("while updating anchor poses:",A)}})),It.prototype.previousFrameAnchors=i},_("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:"data:image/webp;base64,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",type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},sceneOnly:!0,init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new d.OrthographicCamera,this.orthoCam.layers.set(21),this.textureTarget=new d.WebGLRenderTarget(512,512,{}),this.basicMaterial=new d.MeshBasicMaterial({color:0,side:d.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new d.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var e=this.el.getAttribute("webxr"),t=e.optionalFeatures;t.includes("hit-test")&&t.includes("anchors")||(t.push("hit-test"),t.push("anchors"),this.el.setAttribute("webxr",e)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",(function(){this.hitTest=null}).bind(this)),this.el.sceneEl.addEventListener("enter-vr",(function(){if(this.el.is("ar-mode")){var i=this.el.sceneEl.renderer,n=this.session=i.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,ii||(ii=new Map),n.requestReferenceSpace("viewer").then((function(a){this.viewerHitTest=this.hitTest=new It(i,{space:a}),this.el.emit("ar-hit-test-start")}).bind(this));var r=this;this.el.sceneEl.addEventListener("controllersupdated",(function(){var a=this.xrSession&&this.xrSession.inputSources;if(a){for(var A=0;A<a.length;++A)if(a[A].targetRayMode==="tracked-pointer"){r.hitTest=new It(i,{space:a[A].targetRaySpace}),ii.set(a[A],r.hitTest),r.viewerHitTest&&typeof r.viewerHitTest.cancel=="function"&&(r.viewerHitTest.cancel(),r.viewerHitTest=null);break}}}));var o="generic-touchscreen",s=new It(i,{profile:o});n.addEventListener("selectstart",(function(a){if(this.data.enabled===!0){var A=a.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:A,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),A.profiles[0]===o?this.hitTest=s:(this.hitTest=ii.get(A)||new It(i,{space:A.targetRaySpace}),ii.set(A,this.hitTest)))}}).bind(this)),n.addEventListener("selectend",(function(a){if(this.hitTest&&this.data.enabled===!0){var A,l=a.inputSource;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(A=this.data.target.object3D)&&(Ne.tempFakePose.transform.position.copy(this.bboxMesh.position),Ne.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),Ne(Ne.tempFakePose,A,this.bboxOffset),A.visible=!0,this.hitTest.anchorFromLastHitTestResult(A,this.bboxOffset)),this.el.emit("ar-hit-test-select",{inputSource:l,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),this.hitTest=null)}else this.hitTest=null}).bind(this))}}).bind(this)),this.bboxOffset=new d.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(21),this.data.target.object3D.traverse((function(e){e.layers.enable(21)}))):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var e=new d.PlaneGeometry(1,1),t=new d.MeshBasicMaterial({transparent:!0,color:16777215});e.rotateX(-Math.PI/2),e.rotateY(-Math.PI/2),this.bbox=new d.Box3,this.bboxMesh=new d.Mesh(e,t),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var e,t,i,n=this.el.sceneEl.renderer,r=n.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),t=n.getRenderTarget(),n.setRenderTarget(this.textureTarget),n.xr.enabled=!1,i=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,n.render(this.el.object3D,this.orthoCam),this.el.object3D.background=i,this.el.object3D.overrideMaterial=null,n.xr.enabled=r,n.setRenderTarget(t),n.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),e=this.context.getImageData(0,0,512,512);for(var o=0;o<262144;o++)e.data[4*o+3]!==0&&e.data[4*o+3]!==255&&(e.data[4*o+3]=128);this.context.putImageData(e,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var e,t,i=this.el.sceneEl.frame,n=this.el.sceneEl.renderer;i&&It.updateAnchorPoses(i,n.xr.getReferenceSpace()),this.bboxNeedsUpdate&&(this.bboxNeedsUpdate=!1,this.data.target&&this.data.type!=="map"||(this.textureCache.has(this.data.src)?t=this.textureCache.get(this.data.src):(t=new d.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,t)),this.bboxMesh.material.map=t,this.bboxMesh.material.needsUpdate=!0),this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)),this.hitTest&&(e=this.hitTest.doHit(i))&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(e.transform.position),this.bboxMesh.quaternion.copy(e.transform.orientation))}}),_("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},sceneOnly:!0,update:function(){var e=this.data,t=this.el.object3D;e.transparent?t.background=null:t.background=new d.Color(e.color)},remove:function(){this.el.object3D.background=null}}),_("debug",{schema:{default:!0},sceneOnly:!0});var Ma="a-dialog-buttons-container",br="a-dialog-button";function La(e,t){var i,n,r,o;return(i=document.createElement("div")).classList.add("a-modal"),i.setAttribute(Bt,""),(n=document.createElement("div")).className="a-dialog",n.setAttribute(Bt,""),i.appendChild(n),(r=document.createElement("div")).classList.add("a-dialog-text-container"),n.appendChild(r),(o=document.createElement("div")).classList.add("a-dialog-text"),o.innerHTML=e,r.appendChild(o),n.appendChild(t),i}_("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},sceneOnly:!0,init:function(){var e=this;this.data.enabled&&(window.isSecureContext||this.showHTTPAlert(),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission?(this.onDeviceMotionDialogAllowClicked=this.onDeviceMotionDialogAllowClicked.bind(this),this.onDeviceMotionDialogDenyClicked=this.onDeviceMotionDialogDenyClicked.bind(this),DeviceOrientationEvent.requestPermission().then((function(){e.el.emit("deviceorientationpermissiongranted"),e.permissionGranted=!0})).catch((function(){var t,i,n,r,o,s,a,A;e.devicePermissionDialogEl=(t=e.data.denyButtonText,i=e.data.allowButtonText,n=e.data.deviceMotionMessage,r=e.onDeviceMotionDialogAllowClicked,o=e.onDeviceMotionDialogDenyClicked,(s=document.createElement("div")).classList.add(Ma),(a=document.createElement("button")).classList.add(br,"a-dialog-deny-button"),a.setAttribute(Bt,""),a.innerHTML=t,s.appendChild(a),(A=document.createElement("button")).classList.add(br,"a-dialog-allow-button"),A.setAttribute(Bt,""),A.innerHTML=i,s.appendChild(A),A.addEventListener("click",(function(l){l.stopPropagation(),r()})),a.addEventListener("click",(function(l){l.stopPropagation(),o()})),La(n,s)),e.el.appendChild(e.devicePermissionDialogEl)}))):this.permissionGranted=!0)},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var e,t,i,n,r,o=this,s=(e=o.data.cancelButtonText,t=o.data.httpsMessage,i=function(){o.el.removeChild(s)},(n=document.createElement("div")).classList.add(Ma),(r=document.createElement("button")).classList.add(br,"a-dialog-ok-button"),r.setAttribute(Bt,""),r.innerHTML=e,n.appendChild(r),r.addEventListener("click",(function(a){a.stopPropagation(),i()})),La(t,n));this.el.appendChild(s)},onDeviceMotionDialogAllowClicked:function(){var e=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then((function(t){t==="granted"?(e.el.emit("deviceorientationpermissiongranted"),e.permissionGranted=!0):e.el.emit("deviceorientationpermissionrejected"),e.remove()})).catch(console.error)}}),_("embedded",{dependencies:["xr-mode-ui"],schema:{default:!0},sceneOnly:!0,update:function(){var e=this.el,t=e.querySelector(".a-enter-vr");this.data===!0?(t&&t.classList.add("embedded"),e.removeFullScreenStyles()):(t&&t.classList.remove("embedded"),e.addFullScreenStyles())}});var Nd="https://unpkg.com/aframe-inspector@"+(function(){var e=vl.split(".");return e[2]="x",e.join(".")})()+"/dist/aframe-inspector.min.js";_("inspector",{schema:{url:{default:Nd}},sceneOnly:!0,init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var e;this.firstPlay&&(e=pi("inspector"))!=="false"&&e&&(this.openInspector(),this.firstPlay=!1)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(e){e.keyCode===73&&(e.ctrlKey&&e.altKey||e.getModifierState("AltGraph"))&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(e){e.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(e){var t,i=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected?AFRAME.INSPECTOR.open(e):(this.showLoader(),(t=document.createElement("script")).src=this.data.url,t.setAttribute("data-name","aframe-inspector"),t.setAttribute(Bt,""),t.onload=function(){AFRAME.INSPECTOR.open(e),i.hideLoader(),i.removeEventListeners()},t.onerror=function(){i.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(t),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}}),_("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},sceneOnly:!0,update:function(){var e=this.data,t=this.el,i=this.el.object3D.fog;i&&e.type===i.name?Object.keys(this.schema).forEach((function(n){var r=e[n];n==="color"&&(r=new d.Color(r)),i[n]=r})):t.object3D.fog=(function(n){var r;return(r=n.type==="exponential"?new d.FogExp2(n.color,n.density):new d.Fog(n.color,n.near,n.far)).name=n.type,r})(e)},remove:function(){var e=this.el;this.el.object3D.fog&&(e.object3D.fog=null)}}),_("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},sceneOnly:!0,init:function(){this.onKeyup=this.onKeyup.bind(this)},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(e){var t=this.el;Oo(e)&&(this.data.enterVR&&e.keyCode===70&&t.enterVR(),this.data.exitVR&&e.keyCode===27&&t.exitVR())}});var ri=et("components:pool:warn");_("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},sceneOnly:!0,multiple:!0,initPool:function(){var e;for(this.availableEls=[],this.usedEls=[],this.data.mixin||ri("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||ri("Container "+this.data.container+" not found.")),this.container=this.container||this.el,e=0;e<this.data.size;++e)this.createEntity()},update:function(e){var t=this.data;e.mixin===t.mixin&&e.size===t.size||this.initPool()},createEntity:function(){var e;(e=document.createElement("a-entity")).play=this.wrapPlay(e.play),e.setAttribute("mixin",this.data.mixin),e.object3D.visible=!1,e.pause(),this.container.appendChild(e),this.availableEls.push(e);var t=this.usedEls;e.addEventListener("loaded",(function(){t.indexOf(e)===-1&&(e.object3DParent=e.object3D.parent,e.object3D.parent.remove(e.object3D))}))},wrapPlay:function(e){var t=this.usedEls;return function(){t.indexOf(this)!==-1&&e.call(this)}},requestEntity:function(){var e;if(this.availableEls.length===0){if(this.data.dynamic===!1)return void ri("Requested entity from empty pool: "+this.attrName);ri("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName),this.createEntity()}return e=this.availableEls.shift(),this.usedEls.push(e),e.object3DParent&&(e.object3DParent.add(e.object3D),this.updateRaycasters()),e.object3D.visible=!0,e},returnEntity:function(e){var t=this.usedEls.indexOf(e);if(t!==-1)return this.usedEls.splice(t,1),this.availableEls.push(e),e.object3DParent=e.object3D.parent,e.object3D.parent.remove(e.object3D),this.updateRaycasters(),e.object3D.visible=!1,e.pause(),e;ri("The returned entity was not previously pooled from "+this.attrName)},updateRaycasters:function(){document.querySelectorAll("[raycaster]").forEach((function(e){e.components.raycaster.setDirty()}))}}),_("real-world-meshing",{schema:{filterLabels:{type:"array"},meshesEnabled:{default:!0},meshMixin:{default:!0},planesEnabled:{default:!0},planeMixin:{default:""}},sceneOnly:!0,init:function(){var e=this.el.getAttribute("webxr"),t=e.requiredFeatures;t.indexOf("mesh-detection")===-1&&(t.push("mesh-detection"),this.el.setAttribute("webxr",e)),t.indexOf("plane-detection")===-1&&(t.push("plane-detection"),this.el.setAttribute("webxr",e)),this.meshEntities=[],this.initWorldMeshEntity=this.initWorldMeshEntity.bind(this)},tick:function(){this.el.is("ar-mode")&&(this.detectMeshes(),this.updateMeshes())},detectMeshes:function(){var e,t,i,n=this.data,r=this.el,o=this.meshEntities,s=!1,a=[],A=this.data.filterLabels;e=(i=r.frame).detectedMeshes,t=i.detectedPlanes;for(var l=0;l<o.length;l++)o[l].present=!1;if(n.meshesEnabled){for(var h of e.values())if(!A.length||A.indexOf(h.semanticLabel)!==-1){for(l=0;l<o.length;l++)if(h===o[l].mesh){s=!0,o[l].present=!0,o[l].lastChangedTime<h.lastChangedTime&&this.updateMeshGeometry(o[l].el,h),o[l].lastChangedTime=h.lastChangedTime;break}s||a.push(h),s=!1}}if(n.planesEnabled){for(h of t.values())if(!A.length||A.indexOf(h.semanticLabel)!==-1){for(l=0;l<o.length;l++)if(h===o[l].mesh){s=!0,o[l].present=!0,o[l].lastChangedTime<h.lastChangedTime&&this.updateMeshGeometry(o[l].el,h),o[l].lastChangedTime=h.lastChangedTime;break}s||a.push(h),s=!1}}this.deleteMeshes(),this.createNewMeshes(a)},updateMeshes:(function(){var e=new d.Matrix4;return function(){for(var t,i,n,r=this.el,o=r.frame,s=this.meshEntities,a=r.renderer.xr.getReferenceSpace(),A=0;A<s.length;A++)n=s[A].mesh.meshSpace||s[A].mesh.planeSpace,t=o.getPose(n,a),(i=s[A].el).hasLoaded&&(e.fromArray(t.transform.matrix),e.decompose(i.object3D.position,i.object3D.quaternion,i.object3D.scale))}})(),deleteMeshes:function(){for(var e=this.meshEntities,t=[],i=0;i<e.length;i++)e[i].present?t.push(e[i]):this.el.removeChild(e[i]);this.meshEntities=t},createNewMeshes:function(e){for(var t,i=0;i<e.length;i++)t=document.createElement("a-entity"),this.meshEntities.push({mesh:e[i],el:t}),t.addEventListener("loaded",this.initWorldMeshEntity),this.el.appendChild(t)},initMeshGeometry:function(e){var t,i,n;if(e instanceof XRPlane){i=new d.Shape,n=e.polygon;for(var r=0;r<n.length;++r)r===0?i.moveTo(n[r].x,n[r].z):i.lineTo(n[r].x,n[r].z);return(t=new d.ShapeGeometry(i)).rotateX(Math.PI/2),t}return(t=new d.BufferGeometry).setAttribute("position",new d.BufferAttribute(e.vertices,3)),t.setIndex(new d.BufferAttribute(e.indices,1)),t},initWorldMeshEntity:function(e){for(var t,i,n,r=e.target,o=this.meshEntities,s=0;s<o.length;s++)if(o[s].el===r){n=o[s];break}t=this.initMeshGeometry(n.mesh),i=new d.Mesh(t,new d.MeshBasicMaterial({color:16777215*Math.random(),side:d.DoubleSide})),r.setObject3D("mesh",i),n.mesh instanceof XRPlane&&this.data.planeMixin?r.setAttribute("mixin",this.data.planeMixin):this.data.meshMixin&&r.setAttribute("mixin",this.data.meshMixin),r.setAttribute("data-world-mesh",n.mesh.semanticLabel)},updateMeshGeometry:function(e,t){var i=e.getObject3D("mesh");i.geometry.dispose(),i.geometry=this.initMeshGeometry(t)}}),_("reflection",{schema:{directionalLight:{type:"selector"}},sceneOnly:!0,init:function(){var e=this;this.cubeRenderTarget=new d.WebGLCubeRenderTarget(16),this.cubeCamera=new d.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new d.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var t=this.el.getAttribute("webxr"),i=t.optionalFeatures;i.includes("light-estimation")||(i.push("light-estimation"),this.el.setAttribute("webxr",t)),this.el.addEventListener("enter-vr",(function(){e.el.is("ar-mode")&&e.el.renderer.xr.getSession().requestLightProbe&&e.startLightProbe()})),this.el.addEventListener("exit-vr",(function(){e.xrLightProbe&&e.stopLightProbe()})),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var e=this.el.renderer,t=e.xr.getSession(),i=this,n=e.getContext();if(!this.probeLight){var r=document.createElement("a-light");r.setAttribute("type","probe"),r.setAttribute("intensity",0),this.el.appendChild(r),this.probeLight=r}switch(t.preferredReflectionFormat){case"srgba8":n.getExtension("EXT_sRGB");break;case"rgba16f":n.getExtension("OES_texture_half_float")}this.glBinding=new XRWebGLBinding(t,n),n.getExtension("EXT_sRGB"),n.getExtension("OES_texture_half_float"),t.requestLightProbe().then((function(o){i.xrLightProbe=o,o.addEventListener("reflectionchange",i.updateXRCubeMap.bind(i))})).catch((function(o){console.warn("Lighting estimation not supported: "+o.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')}))},updateXRCubeMap:function(){var e=this.el.renderer,t=this.glBinding.getReflectionCubeMap(this.xrLightProbe);t&&(e.properties.get(this.lightingEstimationTexture).__webglTexture=t,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture)},tick:function(){var e=this.el.object3D,t=this.el.renderer,i=this.el.frame;if(i&&this.xrLightProbe){var n=i.getLightEstimate(this.xrLightProbe);n&&(function(r,o,s,a){var A=Math.max(r.primaryLightIntensity.x,Math.max(r.primaryLightIntensity.y,r.primaryLightIntensity.z));o.sh.fromArray(r.sphericalHarmonicsCoefficients),o.intensity=3.14,s&&(s.color.setRGB(r.primaryLightIntensity.x/A,r.primaryLightIntensity.y/A,r.primaryLightIntensity.z/A),s.intensity=A,a.copy(r.primaryLightDirection))})(n,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(e.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(t,e),e.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&i&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}});var Gd=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),jd=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`),Hd=(_("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},sceneOnly:!0,setup:function(){var e=this.el;if(!this.canvas){var t=e.renderer.getContext();t&&(this.cubeMapSize=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.material=new d.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:Gd,fragmentShader:jd,side:d.DoubleSide}),this.quad=new d.Mesh(new d.PlaneGeometry(1,1),this.material),this.quad.visible=!1,this.camera=new d.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),e.object3D.add(this.quad),this.onKeyDown=this.onKeyDown.bind(this))}},getRenderTarget:function(e,t){return new d.WebGLRenderTarget(e,t,{colorSpace:this.el.sceneEl.renderer.outputColorSpace,minFilter:d.LinearFilter,magFilter:d.LinearFilter,wrapS:d.ClampToEdgeWrapping,wrapT:d.ClampToEdgeWrapping,format:d.RGBAFormat,type:d.UnsignedByteType})},resize:function(e,t){this.quad.scale.set(e,t,1),this.camera.left=-1*e/2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=-1*t/2,this.camera.updateProjectionMatrix(),this.canvas.width=e,this.canvas.height=t},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(e){var t=e.keyCode===83&&e.ctrlKey&&e.altKey;if(this.data&&t){var i=e.shiftKey?"equirectangular":"perspective";this.capture(i)}},setCapture:function(e){var t,i,n,r,o=this.el;return e==="perspective"?(this.quad.visible=!1,i=this.data.camera&&this.data.camera.components.camera.camera||o.camera,t={width:this.data.width,height:this.data.height}):(i=this.camera,r=new d.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:d.RGBFormat,generateMipmaps:!0,minFilter:d.LinearMipmapLinearFilter,colorSpace:d.SRGBColorSpace}),n=new d.CubeCamera(o.camera.near,o.camera.far,r),o.camera.getWorldPosition(n.position),o.camera.getWorldQuaternion(n.quaternion),n.update(o.renderer,o.object3D),this.quad.material.uniforms.map.value=n.renderTarget.texture,t={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:i,size:t,projection:e}},capture:function(e){var t,i=this.el.renderer.xr.enabled,n=this.el.renderer;this.setup(),n.xr.enabled=!1,t=this.setCapture(e),this.renderCapture(t.camera,t.size,t.projection),this.saveCapture(),n.xr.enabled=i},getCanvas:function(e){var t=this.el.renderer.xr.enabled,i=this.el.renderer;this.setup();var n=this.setCapture(e);return i.xr.enabled=!1,this.renderCapture(n.camera,n.size,n.projection),i.xr.enabled=t,this.canvas},renderCapture:function(e,t,i){var n,r,o,s=this.el.renderer.autoClear,a=this.el,A=a.renderer;r=this.getRenderTarget(t.width,t.height),o=new Uint8Array(4*t.width*t.height),this.resize(t.width,t.height),A.autoClear=!0,A.clear(),A.setRenderTarget(r),A.render(a.object3D,e),A.autoClear=s,A.readRenderTargetPixels(r,0,0,t.width,t.height,o),A.setRenderTarget(null),i==="perspective"&&(o=this.flipPixelsVertically(o,t.width,t.height)),n=new ImageData(new Uint8ClampedArray(o),t.width,t.height),this.quad.visible=!1,this.ctx.putImageData(n,0,0)},flipPixelsVertically:function(e,t,i){for(var n=e.slice(0),r=0;r<t;++r)for(var o=0;o<i;++o)n[4*r+o*t*4]=e[4*r+(i-o)*t*4],n[4*r+1+o*t*4]=e[4*r+1+(i-o)*t*4],n[4*r+2+o*t*4]=e[4*r+2+(i-o)*t*4],n[4*r+3+o*t*4]=e[4*r+3+(i-o)*t*4];return n},saveCapture:function(){this.canvas.toBlob((function(e){var t="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",i=document.createElement("a"),n=URL.createObjectURL(e);i.href=n,i.setAttribute("download",t),i.innerHTML="downloading...",i.style.display="none",document.body.appendChild(i),setTimeout((function(){i.click(),document.body.removeChild(i)}),1)}),"image/png")}}),G(282)),zd=G.n(Hd),qd=(G(3729),G(8132),window.aframeStats),Sa="a-hidden",Vd=window.threeStats;_("stats",{schema:{default:!0},sceneOnly:!0,init:function(){var e=this.el;pi("stats")!=="false"&&(this.stats=(function(t){var i=new Vd(t.renderer),n=new qd(t),r=t.isMobile?[]:[i,n];return new(zd())({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:r})})(e),this.statsEl=document.querySelector(".rs-base"),this.hideBound=this.hide.bind(this),this.showBound=this.show.bind(this),e.addEventListener("enter-vr",this.hideBound),e.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var e=this.stats;e&&(e("rAF").tick(),e("FPS").frame(),e().update())},hide:function(){this.statsEl.classList.add(Sa)},show:function(){this.statsEl.classList.remove(Sa)}});var De="a-hidden";function Da(e){e.addEventListener("touchstart",(function(){e.classList.remove("resethover")}),{passive:!0}),e.addEventListener("touchend",(function(){e.classList.add("resethover")}),{passive:!0})}_("xr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},enterVRButton:{default:""},enterVREnabled:{default:!0},enterARButton:{default:""},enterAREnabled:{default:!0},XRMode:{default:"vr",oneOf:["vr","ar","xr"]}},sceneOnly:!0,init:function(){var e=this,t=this.el;pi("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),t.addEventListener("enter-vr",this.updateEnterInterfaces),t.addEventListener("exit-vr",this.updateEnterInterfaces),t.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",(function(i){i.data.type==="loaderReady"&&(e.insideLoader=!0,e.remove())})),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=this.onEnterVRButtonClick.bind(this),this.onEnterARButtonClick=this.onEnterARButtonClick.bind(this),this.onModalClick=this.onModalClick.bind(this),this.toggleOrientationModalIfNeeded=this.toggleOrientationModalIfNeeded.bind(this),this.updateEnterInterfaces=this.updateEnterInterfaces.bind(this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var e,t,i,n=this.data,r=this.el;if(!n.enabled||this.insideLoader||pi("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(this.enterVREl||!n.enterVREnabled||n.XRMode!=="xr"&&n.XRMode!=="vr"||(n.enterVRButton?(this.enterVREl=document.querySelector(n.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=(e=this.onEnterVRButtonClick,(i=document.createElement("div")).classList.add("a-enter-vr"),i.setAttribute(Bt,""),(t=document.createElement("button")).className="a-enter-vr-button",t.setAttribute("title","Enter VR mode with a headset or fullscreen without"),t.setAttribute(Bt,""),Ce()&&Da(t),i.appendChild(t),t.addEventListener("click",(function(o){e(),o.stopPropagation()})),i),r.appendChild(this.enterVREl))),this.enterAREl||!n.enterAREnabled||n.XRMode!=="xr"&&n.XRMode!=="ar"||(n.enterARButton?(this.enterAREl=document.querySelector(n.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=(function(o,s){var a,A;return(A=document.createElement("div")).classList.add("a-enter-ar"),s&&A.classList.add("xr"),A.setAttribute(Bt,""),(a=document.createElement("button")).className="a-enter-ar-button",a.setAttribute("title","Enter AR mode with a headset or handheld device."),a.setAttribute(Bt,""),Ce()&&Da(a),A.appendChild(a),a.addEventListener("click",(function(l){o(),l.stopPropagation()})),A})(this.onEnterARButtonClick,n.XRMode==="xr"),r.appendChild(this.enterAREl))),this.orientationModalEl=(function(o){var s=document.createElement("div");s.className="a-orientation-modal",s.classList.add(De),s.setAttribute(Bt,"");var a=document.createElement("button");return a.setAttribute(Bt,""),a.innerHTML="Exit VR",a.addEventListener("click",o),s.appendChild(a),s})(this.onModalClick),r.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach((function(e){e&&e.parentNode&&e.parentNode.removeChild(e)})),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var e=this.el;this.enterVREl&&(e.is("vr-mode")||(e.isMobile||yo())&&!Zr()?this.enterVREl.classList.add(De):(Zr()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(De),e.enterVR(!1,!0)))},toggleEnterARButtonIfNeeded:function(){var e=this.el;this.enterAREl&&(e.is("vr-mode")||!vo()?this.enterAREl.classList.add(De):(this.enterAREl.classList.remove(De),e.enterVR(!0,!0)))},toggleOrientationModalIfNeeded:function(){var e=this.el,t=this.orientationModalEl;t&&e.isMobile&&(!KA()&&e.is("vr-mode")?t.classList.remove(De):t.classList.add(De))}}),Lt("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new d.BoxGeometry(e.width,e.height,e.depth,e.segmentsWidth,e.segmentsHeight,e.segmentsDepth)}});var ka=d.MathUtils.degToRad;Lt("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new d.CircleGeometry(e.radius,e.segments,ka(e.thetaStart),ka(e.thetaLength))}});var Ta=d.MathUtils.degToRad;Lt("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new d.CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,Ta(e.thetaStart),Ta(e.thetaLength))}});var Ra=d.MathUtils.degToRad;Lt("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new d.CylinderGeometry(e.radius,e.radius,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,Ra(e.thetaStart),Ra(e.thetaLength))}}),Lt("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new d.DodecahedronGeometry(e.radius,e.detail)}}),Lt("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new d.IcosahedronGeometry(e.radius,e.detail)}}),Lt("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new d.OctahedronGeometry(e.radius,e.detail)}}),Lt("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new d.PlaneGeometry(e.width,e.height,e.segmentsWidth,e.segmentsHeight)}});var Fa=d.MathUtils.degToRad;Lt("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new d.RingGeometry(e.radiusInner,e.radiusOuter,e.segmentsTheta,e.segmentsPhi,Fa(e.thetaStart),Fa(e.thetaLength))}});var Ni=d.MathUtils.degToRad;Lt("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(e){this.geometry=new d.SphereGeometry(e.radius,e.segmentsWidth,e.segmentsHeight,Ni(e.phiStart),Ni(e.phiLength),Ni(e.thetaStart),Ni(e.thetaLength))}}),Lt("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new d.TetrahedronGeometry(e.radius,e.detail)}});var Wd=d.MathUtils.degToRad;Lt("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(e){this.geometry=new d.TorusGeometry(e.radius,2*e.radiusTubular,e.segmentsRadial,e.segmentsTubular,Wd(e.arc))}}),Lt("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(e){this.geometry=new d.TorusKnotGeometry(e.radius,2*e.radiusTubular,e.segmentsTubular,e.segmentsRadial,e.p,e.q)}});var Gi=new d.Quaternion,Yd=new d.Vector3(0,0,1),oi=new d.Vector2,Oa=new d.Vector2,ji=new d.Vector2;function Ua(e,t){return t.color.set(e.color),t.fog=e.fog,t.wireframe=e.wireframe,t.toneMapped=e.toneMapped,t.wireframeLinewidth=e.wireframeLinewidth,t}function _a(e,t){return t.color.set(e.color),t.emissive.set(e.emissive),t.emissiveIntensity=e.emissiveIntensity,t.fog=e.fog,t.metalness=e.metalness,t.roughness=e.roughness,t.wireframe=e.wireframe,t.wireframeLinewidth=e.wireframeLinewidth,e.normalMap&&(t.normalScale=e.normalScale),e.ambientOcclusionMap&&(t.aoMapIntensity=e.ambientOcclusionMapIntensity),e.displacementMap&&(t.displacementScale=e.displacementScale,t.displacementBias=e.displacementBias),t}function Pa(e,t){switch(t.color.set(e.color),t.specular.set(e.specular),t.emissive.set(e.emissive),t.emissiveIntensity=e.emissiveIntensity,t.fog=e.fog,t.transparent=e.transparent,t.wireframe=e.wireframe,t.wireframeLinewidth=e.wireframeLinewidth,t.shininess=e.shininess,t.flatShading=e.flatShading,t.wireframe=e.wireframe,t.wireframeLinewidth=e.wireframeLinewidth,t.reflectivity=e.reflectivity,t.refractionRatio=e.refractionRatio,e.combine){case"mix":t.combine=d.MixOperation;break;case"multiply":t.combine=d.MultiplyOperation;break;case"add":t.combine=d.AddOperation}return e.normalMap&&(t.normalScale=e.normalScale),e.ambientOcclusionMap&&(t.aoMapIntensity=e.ambientOcclusionMapIntensity),e.bumpMap&&(t.bumpScale=e.bumpMapScale),e.displacementMap&&(t.displacementScale=e.displacementScale,t.displacementBias=e.displacementBias),t}Lt("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(e){var t,i,n,r,o,s,a,A,l;(n=new d.Triangle).a.set(e.vertexA.x,e.vertexA.y,e.vertexA.z),n.b.set(e.vertexB.x,e.vertexB.y,e.vertexB.z),n.c.set(e.vertexC.x,e.vertexC.y,e.vertexC.z),i=n.getNormal(new d.Vector3),Gi.setFromUnitVectors(i,Yd),r=n.a.clone().applyQuaternion(Gi),o=n.b.clone().applyQuaternion(Gi),s=n.c.clone().applyQuaternion(Gi),oi.set(Math.min(r.x,o.x,s.x),Math.min(r.y,o.y,s.y)),Oa.set(Math.max(r.x,o.x,s.x),Math.max(r.y,o.y,s.y)),ji.set(0,0).subVectors(Oa,oi),r=new d.Vector2().subVectors(r,oi).divide(ji),o=new d.Vector2().subVectors(o,oi).divide(ji),s=new d.Vector2().subVectors(s,oi).divide(ji),t=this.geometry=new d.BufferGeometry,a=[n.a.x,n.a.y,n.a.z,n.b.x,n.b.y,n.b.z,n.c.x,n.c.y,n.c.z],A=[i.x,i.y,i.z,i.x,i.y,i.z,i.x,i.y,i.z],l=[r.x,r.y,o.x,o.y,s.x,s.y],t.setAttribute("position",new d.Float32BufferAttribute(a,3)),t.setAttribute("normal",new d.Float32BufferAttribute(A,3)),t.setAttribute("uv",new d.Float32BufferAttribute(l,2))}}),fe("flat",{schema:{color:{type:"color"},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(e){this.materialData={color:new d.Color},Ua(e,this.materialData),this.material=new d.MeshBasicMaterial(this.materialData)},update:function(e){this.updateMaterial(e),nn(this,e)},updateMaterial:function(e){var t;for(t in Ua(e,this.materialData),this.materialData)this.material[t]=this.materialData[t]}}),fe("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(e){this.materialData={color:new d.Color,emissive:new d.Color},_a(e,this.materialData),this.material=new d.MeshStandardMaterial(this.materialData)},update:function(e){this.updateMaterial(e),nn(this,e),Kt("normal",this,e),Kt("displacement",this,e),Kt("ambientOcclusion",this,e),Kt("metalness",this,e),Kt("roughness",this,e),to(this,e)},updateMaterial:function(e){var t,i=this.material;for(t in _a(e,this.materialData),this.materialData)i[t]=this.materialData[t]}}),fe("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(e){this.materialData={color:new d.Color,specular:new d.Color,emissive:new d.Color},Pa(e,this.materialData),this.material=new d.MeshPhongMaterial(this.materialData);var t=this.el.sceneEl;Object.defineProperty(this.material,"envMap",{get:function(){return this._envMap||t.object3D.environment},set:function(i){this._envMap=i}})},update:function(e){this.updateMaterial(e),nn(this,e),Kt("normal",this,e),Kt("displacement",this,e),Kt("ambientOcclusion",this,e),Kt("bump",this,e),to(this,e)},updateMaterial:function(e){var t;for(t in Pa(e,this.materialData),this.materialData)this.material[t]=this.materialData[t]}}),fe("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec2 uv = vUV;","  vec4 texColor = texture(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture(map, box.xy).a, width)","      + contour(texture(map, box.zw).a, width)","      + contour(texture(map, box.xw).a, width)","      + contour(texture(map, box.zy).a, width)","    )) / 3.0;","  }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color, opacity * alpha);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`),init:function(){return this.uniforms=this.initUniforms(),d.UniformsUtils&&(this.uniforms=d.UniformsUtils.merge([d.UniformsLib.fog,this.uniforms])),this.material=new d.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),fe("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`),init:function(){return this.uniforms=this.initUniforms(),d.UniformsUtils&&(this.uniforms=d.UniformsUtils.merge([d.UniformsLib.fog,this.uniforms])),this.material=new d.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),fe("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(e){this.material=new d.ShadowMaterial},update:function(e){this.material.opacity=e.opacity,this.material.alphaToCoverage=e.alphaToCoverage,this.material.transparent=e.transparent}});var Na="data-aframe-default-camera";function Ga(e){var t=e.primitive,i=ve[t]&&ve[t].Geometry,n=new i;if(!i)throw new Error("Unknown geometry `"+t+"`");return n.init(e),n.geometry}Nt("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var e,t,i=this.sceneEl,n=this;if(!i.camera||i.camera.el.getAttribute("camera").spectator)if((e=i.querySelectorAll("a-camera, :not(a-mixin)[camera]")).length)for(this.numUserCameras=e.length,t=0;t<e.length;t++)e[t].addEventListener("object3dset",(function(r){r.detail.type==="camera"&&n.checkUserCamera(this)})),e[t].isANode?e[t].load():e[t].addEventListener("nodeready",(function(){this.load()}));else this.createDefaultCamera();else i.emit("cameraready",{cameraEl:i.camera.el})},checkUserCamera:function(e){var t,i=this.el.sceneEl;this.numUserCamerasChecked++,this.initialCameraFound||((t=e.getAttribute("camera")).active&&!t.spectator?(this.initialCameraFound=!0,i.camera=e.getObject3D("camera"),i.emit("cameraready",{cameraEl:e})):this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera())},createDefaultCamera:function(){var e,t=this.sceneEl;(e=document.createElement("a-entity")).setAttribute("camera",{active:!0}),e.setAttribute("position",{x:0,y:1.6,z:0}),e.setAttribute("wasd-controls",""),e.setAttribute("look-controls",""),e.setAttribute(Bt,""),e.addEventListener("object3dset",(function(i){i.detail.type==="camera"&&(t.camera=i.detail.object,t.emit("cameraready",{cameraEl:e}))})),t.appendChild(e)},disableActiveCamera:function(){var e;(e=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"))[e.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(e){var t,i,n,r,o=this.activeCameraEl,s=this.sceneEl;if((r=e.getObject3D("camera"))&&e!==this.activeCameraEl){var a=s.querySelector("["+Na+"]");for(e!==(a&&a.querySelector(":not(a-mixin)[camera]"))&&(function(A){var l;A.camera&&(l=A.querySelector("["+Na+"]"))&&A.removeChild(l)})(s),this.activeCameraEl=e,this.activeCameraEl.play(),s.camera=r,o&&o.setAttribute("camera","active",!1),i=s.querySelectorAll(":not(a-mixin)[camera]"),n=0;n<i.length;n++)(t=i[n]).isEntity&&e!==t&&(t.setAttribute("camera","active",!1),t.pause());s.emit("camera-set-active",{cameraEl:e})}},setSpectatorCamera:function(e){var t,i=this.spectatorCameraEl,n=this.sceneEl;e.getObject3D("camera")&&e!==this.spectatorCameraEl&&(i&&i.setAttribute("camera","spectator",!1),t=this.spectatorCameraEl=e,n.addEventListener("enter-vr",this.wrapRender),n.addEventListener("exit-vr",this.unwrapRender),t.setAttribute("camera","active",!1),t.play(),n.emit("camera-set-spectator",{cameraEl:e}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){this.spectatorCameraEl&&!this.originalRender&&(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(e,t){var i,n,r=this.sceneEl;i=r.renderer.xr.enabled,this.originalRender.call(r.renderer,e,t),this.spectatorCameraEl&&!r.isMobile&&i&&(n=this.spectatorCameraEl.components.camera.camera,r.renderer.xr.enabled=!1,this.originalRender.call(r.renderer,e,n),r.renderer.xr.enabled=i)}}),Nt("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(e){var t,i,n=this.cache;return e.skipCache?Ga(e):(t=n[i=this.hash(e)],(function(r,o){r[o]=r[o]===void 0?1:r[o]+1})(this.cacheCount,i),t||(t=Ga(e),n[i]=t,t))},unuseGeometry:function(e){var t,i=this.cache,n=this.cacheCount;e.skipCache||i[t=this.hash(e)]&&((function(r,o){r[o]--})(n,t),n[t]>0||(i[t].dispose(),delete i[t],delete n[t]))},hash:function(e){return JSON.stringify(e)}}),Nt("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.7/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var e=this.data.dracoDecoderPath,t=this.data.basisTranscoderPath,i=this.data.meshoptDecoderPath;!this.dracoLoader&&e&&(this.dracoLoader=new BA,this.dracoLoader.setDecoderPath(e)),!this.ktx2Loader&&t&&(this.ktx2Loader=new Ft,this.ktx2Loader.setTranscoderPath(t).detectSupport(this.el.renderer)),!this.meshoptDecoder&&i&&(this.meshoptDecoder=(function(n){return new Promise((function(r,o){var s=document.createElement("script");document.body.appendChild(s),s.onload=r,s.onerror=o,s.async=!0,s.src=n}))})(i).then((function(){return window.MeshoptDecoder.ready})).then((function(){return window.MeshoptDecoder})))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}});var Hi="data-aframe-default-light",Bl=(Nt("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",this.setupDefaultLights.bind(this))},registerLight:function(e){e.hasAttribute(Hi)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var e,t=this.sceneEl;if(this.defaultLights){e=document.querySelectorAll("["+Hi+"]");for(var i=0;i<e.length;i++)t.removeChild(e[i]);this.defaultLights=!1}},setupDefaultLights:function(){var e,t,i=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||((e=document.createElement("a-entity")).setAttribute("light",{color:"#BBB",type:"ambient"}),e.setAttribute(Hi,""),e.setAttribute(Bt,""),i.appendChild(e),(t=document.createElement("a-entity")).setAttribute("light",{color:"#FFF",intensity:1.884,castShadow:!0}),t.setAttribute("position",{x:-.5,y:1,z:1}),t.setAttribute(Hi,""),t.setAttribute(Bt,""),i.appendChild(t),this.defaultLights=!0)}}),et),Kd=Bl("components:texture:error"),ja=Bl("components:texture:warn"),Jd=new d.ImageLoader;Nt("material",{init:function(){this.materials={},this.sourceCache={}},clearTextureSourceCache:function(){this.sourceCache={}},loadTexture:function(e,t,i){this.loadTextureSource(e,(function(n){var r=Do(n);gn(r,t),i(r)}))},loadTextureSource:function(e,t){var i=this,n=this.sourceCache,r=this.hash(e);function o(s){n[r]=Promise.resolve(s),n[r].then(t)}n[r]?n[r].then(t):e.tagName!=="CANVAS"?o(new Promise((function(s,a){un(e,(function(A){i.loadImage(A,s)}),(function(A){i.loadVideo(A,s)}))}))):o(new d.Source(e))},loadCubeMapTexture:function(e,t){var i=this,n=0,r=new d.CubeTexture;function o(a){i.loadTextureSource(e[a],(function(A){r.images[a]=A.data,++n==6&&(r.needsUpdate=!0,t(r))}))}if(r.colorSpace=d.SRGBColorSpace,e.length===6)for(var s=0;s<e.length;s++)o(s);else ja("Cube map texture requires exactly 6 sources, got only %s sources",e.length)},loadImage:function(e,t){t(typeof e=="string"?(function(i){return new Promise((function(n,r){Jd.load(i,(function(o){n(new d.Source(o))}),(function(){}),(function(o){Kd("`$s` could not be fetched (Error code: %s; Response: %s)",o.status,o.statusText)}))}))})(e):new d.Source(e))},loadVideo:function(e,t){var i;typeof e!="string"&&(function(n){n.autoplay=n.hasAttribute("autoplay")&&n.getAttribute("autoplay")!=="false",n.controls=n.hasAttribute("controls")&&n.getAttribute("controls")!=="false",n.getAttribute("loop")==="false"&&n.removeAttribute("loop"),n.getAttribute("preload")==="false"&&(n.preload="none"),n.crossOrigin=n.crossOrigin||"anonymous",n.setAttribute("playsinline",""),n.setAttribute("webkit-playsinline","")})(i=e),i=i||(function(n){var r=document.createElement("video");return r.setAttribute("playsinline",""),r.setAttribute("webkit-playsinline",""),r.autoplay=!0,r.loop=!0,r.crossOrigin="anonymous",r.addEventListener("error",(function(){ja("`%s` is not a valid video",n)}),!0),r.src=n,r})(e),t(new d.Source(i))},hash:function(e){return e.tagName&&(e.id||e.src)||e},registerMaterial:function(e){this.materials[e.uuid]=e},unregisterMaterial:function(e){delete this.materials[e.uuid]}}),Nt("obb-collider",{schema:{showColliders:{default:!1}},init:function(){this.collisions=[],this.colliderEls=[]},addCollider:function(e){this.colliderEls.push(e),this.data.showColliders?e.components["obb-collider"].showCollider():e.components["obb-collider"].hideCollider(),this.tick=this.detectCollisions},removeCollider:function(e){var t=this.colliderEls,i=t.indexOf(e);e.components["obb-collider"].hideCollider(),i>-1&&t.splice(i,1),t.length===0&&(this.tick=void 0)},registerCollision:function(e,t){var i=this.collisions,n=!1,r=e.obb,o=t.obb,s=e.renderColliderMesh,a=t.renderColliderMesh;s&&s.material.color.set(16711680),a&&a.material.color.set(16711680);for(var A=0;A<i.length;A++)if(i[A].componentA.obb===r&&i[A].componentB.obb===o||i[A].componentA.obb===o&&i[A].componentB.obb===r){n=!0,i[A].detected=!0;break}n||(i.push({componentA:e,componentB:t,detected:!0}),e.el.emit("obbcollisionstarted",{trackedObject3D:e.trackedObject3D,withEl:t.el}),t.el.emit("obbcollisionstarted",{trackedObject3D:t.trackedObject3D,withEl:e.el}))},resetCollisions:function(){for(var e=this.collisions,t=0;t<e.length;t++)e[t].detected=!1},clearCollisions:function(){for(var e,t,i,n,r=this.collisions,o=[],s=0;s<r.length;s++)r[s].detected?o.push(r[s]):(e=r[s].componentA,t=r[s].componentB,i=e.renderColliderMesh,n=t.renderColliderMesh,i&&i.material.color.set(65280),e.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:t.el}),n&&n.material.color.set(65280),t.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:e.el}));this.collisions=o},detectCollisions:function(){var e,t,i,n,r=this.colliderEls;if(!(r.length<2)){this.resetCollisions();for(var o=0;o<r.length;o++)if(i=r[o].components["obb-collider"],(e=r[o].components["obb-collider"].obb).halfSize.x!==0&&e.halfSize.y!==0&&e.halfSize.z!==0)for(var s=o+1;s<r.length;s++)(t=(n=r[s].components["obb-collider"]).obb).halfSize.x!==0&&t.halfSize.y!==0&&t.halfSize.z!==0&&e.intersectsOBB(t)&&this.registerCollision(i,n);this.clearCollisions()}}});var Br=et("components:renderer:warn");function Xd(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z-t.z}function Zd(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder-t.renderOrder}function $d(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:t.z-e.z}Nt("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:bo()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:-1},maxCanvasHeight:{default:-1},multiviewStereo:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon","AgX","neutral"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon","AgX","neutral"]},precision:{default:"high",oneOf:["high","medium","low"]},anisotropy:{default:1},sortTransparentObjects:{default:!1},colorManagement:{default:!0},alpha:{default:!0},stencil:{default:!1},foveationLevel:{default:1}},init:function(){var e=this.data,t=this.el,i=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),n=t.renderer;n.toneMapping=d[i+"ToneMapping"],d.Texture.DEFAULT_ANISOTROPY=e.anisotropy,d.ColorManagement.enabled=e.colorManagement,n.outputColorSpace=e.colorManagement?d.SRGBColorSpace:d.LinearSRGBColorSpace,t.hasAttribute("antialias")&&Br('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),t.hasAttribute("logarithmicDepthBuffer")&&Br('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.'),n.sortObjects=!0,n.setOpaqueSort(Xd)},update:function(){var e=this.data,t=this.el.renderer,i=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);t.toneMapping=d[i+"ToneMapping"],t.toneMappingExposure=e.exposure,t.xr.setFoveation(e.foveationLevel),e.sortObjects&&Br('`sortObjects` property is deprecated. Use `renderer="sortTransparentObjects: true"` instead.'),e.sortTransparentObjects?t.setTransparentSort($d):t.setTransparentSort(Zd)},applyColorCorrection:function(e){this.data.colorManagement&&e&&e.isTexture&&e.colorSpace!==d.SRGBColorSpace&&(e.colorSpace=d.SRGBColorSpace,e.needsUpdate=!0)},setWebXRFrameRate:function(e){var t,i=this.data,n=e.supportedFrameRates;n&&e.updateTargetFrameRate&&(t=n.includes(90)?i.highRefreshRate?90:72:i.highRefreshRate?72:60,e.updateTargetFrameRate(t).catch((function(r){console.warn("failed to set target frame rate of "+t+". Error info: "+r)})))}});var tu={basic:d.BasicShadowMap,pcf:d.PCFShadowMap,pcfsoft:d.PCFSoftShadowMap};Nt("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var e=this.sceneEl,t=this.data;this.shadowMapEnabled=!1,e.renderer.shadowMap.type=tu[t.type],e.renderer.shadowMap.autoUpdate=t.autoUpdate},update:function(e){e.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.shadowMapEnabled)},setShadowMapEnabled:function(e){var t=this.sceneEl,i=this.sceneEl.renderer;this.shadowMapEnabled=e;var n=this.data.enabled&&this.shadowMapEnabled;i&&n!==i.shadowMap.enabled&&(i.shadowMap.enabled=n,(function(r){r.hasLoaded&&r.object3D.traverse((function(o){if(o.material)for(var s=Array.isArray(o.material)?o.material:[o.material],a=0;a<s.length;a++)s[a].needsUpdate=!0}))})(t))}}),Nt("tracked-controls",{init:function(){this.controllers=[],this.onInputSourcesChange=this.onInputSourcesChange.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.el.addEventListener("enter-vr",this.onEnterVR),this.onExitVR=this.onExitVR.bind(this),this.el.addEventListener("exit-vr",this.onExitVR)},onEnterVR:function(){this.el.xrSession&&this.el.xrSession.addEventListener("inputsourceschange",this.onInputSourcesChange)},onExitVR:function(){this.referenceSpace=void 0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1)},onInputSourcesChange:function(){var e=this,t=this.el.xrSession,i=this.el.sceneEl.systems.webxr.sessionReferenceSpaceType;t.requestReferenceSpace(i).then((function(n){e.referenceSpace=n})).catch((function(n){throw e.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(i,'tracked-controls uses reference space "'+i+'".'),n})),this.controllers=t.inputSources,this.el.emit("controllersupdated",void 0,!1)}});var eu=et("systems:webxr:warn"),wl=(Nt("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var e=this.data;this.sessionConfiguration={requiredFeatures:e.requiredFeatures,optionalFeatures:e.optionalFeatures},this.sessionReferenceSpaceType=e.referenceSpaceType,e.overlayElement&&(e.overlayElement.classList.remove("a-dom-overlay"),e.optionalFeatures.includes("dom-overlay")||(e.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",e)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:e.overlayElement},e.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(e){return e==="viewer"||e==="local"||!(!this.sessionConfiguration.requiredFeatures.includes(e)&&!this.sessionConfiguration.optionalFeatures.includes(e))},warnIfFeatureNotRequested:function(e,t){this.wasFeatureRequested(e)||eu((t?t+" ":"")+'Please add the feature "'+e+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`)}}),{});function Ha(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();e==="fog"&&(t="material-fog"),e==="visible"&&(t="material-visible"),wl[t]="material."+e}function se(){return{defaultComponents:{material:{}},mappings:Dt({},wl)}}Object.keys(gt.material.schema).forEach(Ha),Object.keys(Xt.standard.schema).forEach(Ha);var zi=new d.Vector3,iu=new d.Vector3;_("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var e=this.data,t=this.el,i=t.object3D.parent,n=t.object3D,r=new d.Group;zi.copy(n.position),iu.copy(n.rotation),i.remove(n),r.add(n),i.add(r),t.object3D=r,n.position.set(-1*e.x,-1*e.y,-1*e.z),r.position.set(e.x+zi.x,e.y+zi.y,e.z+zi.z),r.rotation.copy(n.rotation),n.rotation.set(0,0,0)}}),Mt("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}}),Mt("a-cursor",Rt({},se(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}})),Mt("a-curvedimage",Rt({},se(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}})),Mt("a-gltf-model",{mappings:{src:"gltf-model"}}),Mt("a-image",Rt({},se(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),Mt("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}}),Mt("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}}),Mt("a-obj-model",Rt({},se(),{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}));const Il={},nu=Il;function za(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var wr,qi;_o.forEach((function(e){var t=ve[e],i=za(e),n={};Object.keys(t.schema).forEach((function(s){n[za(s)]="geometry."+s}));var r="a-"+i,o=Mt(r,Rt({},se(),{defaultComponents:{geometry:{primitive:e}},mappings:n}));Il[r]=o})),Mt("a-sky",Rt({},se(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:Rt({},nu["a-sphere"].mappings)})),Mt("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}}),wr={text:{anchor:"align",width:5}},qi=qi||{},Object.keys(wr).forEach((function(e){(function(t,i){var n=gt[t].schema;Object.keys(n).forEach((function(r){var o=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();i[o]!==void 0&&(o=t+"-"+r),i[o]=t+"."+r}))})(e,qi)})),Mt("a-text",Rt({},null,{defaultComponents:wr,mappings:qi})),Mt("a-video",Rt({},se(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),Mt("a-videosphere",Rt({},se(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}));var Go=et,ru=Go("A-Frame:error"),ou=Go("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&ou("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),window.cordova||window.location.protocol!=="file:"||ru("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server."),Io&&(window.logs=Go,G(7180),G(9379)),console.log("A-Frame Version: 1.7.0 (Date 2025-03-12, Commit #1b9650f1)"),console.log("THREE Version (https://github.com/supermedium/three.js):",zA.REVISION),window.AFRAME_ASYNC||(document.readyState!=="complete"?document.addEventListener("readystatechange",(function e(){document.readyState==="complete"&&(document.removeEventListener("readystatechange",e),no())})):no());const su=globalThis.AFRAME={AComponent:fi,AEntity:yt,ANode:wt,ANIME:Zi,AScene:ml,components:gt,coreComponents:Object.keys(gt),geometries:ve,registerComponent:_,registerGeometry:Lt,registerPrimitive:Mt,registerShader:fe,registerSystem:Nt,primitives:{getMeshMixin:se,primitives:El},scenes:ke,schema:Nr,shaders:Xt,systems:oe,emitReady:no,THREE:zA,utils:Pr,version:vl};AA.A;const xl="180",Ql=300,qa=1e3,Vi=1001,Va=1002,Ao=1006,au=1008,Au=1009,lu=1023,hu="",Wi=2e3,Wa=2001;class jo{addEventListener(t,i){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(i)===-1&&n[t].push(i)}hasEventListener(t,i){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(i)!==-1}removeEventListener(t,i){const n=this._listeners;if(n===void 0)return;const r=n[t];if(r!==void 0){const o=r.indexOf(i);o!==-1&&r.splice(o,1)}}dispatchEvent(t){const i=this._listeners;if(i===void 0)return;const n=i[t.type];if(n!==void 0){t.target=this;const r=n.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,t);t.target=null}}}const xt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ya=1234567;const Ml=Math.PI/180,Ll=180/Math.PI;function Qn(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(xt[e&255]+xt[e>>8&255]+xt[e>>16&255]+xt[e>>24&255]+"-"+xt[t&255]+xt[t>>8&255]+"-"+xt[t>>16&15|64]+xt[t>>24&255]+"-"+xt[i&63|128]+xt[i>>8&255]+"-"+xt[i>>16&255]+xt[i>>24&255]+xt[n&255]+xt[n>>8&255]+xt[n>>16&255]+xt[n>>24&255]).toLowerCase()}function ct(e,t,i){return Math.max(t,Math.min(i,e))}function Sl(e,t){return(e%t+t)%t}function cu(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)}function du(e,t,i){return e!==t?(i-e)/(t-e):0}function Dl(e,t,i){return(1-i)*e+i*t}function uu(e,t,i,n){return Dl(e,t,1-Math.exp(-i*n))}function gu(e,t=1){return t-Math.abs(Sl(e,t*2)-t)}function pu(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))}function fu(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(e*6-15)+10))}function mu(e,t){return e+Math.floor(Math.random()*(t-e+1))}function Eu(e,t){return e+Math.random()*(t-e)}function Cu(e){return e*(.5-Math.random())}function vu(e){e!==void 0&&(Ya=e);let t=Ya+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function yu(e){return e*Ml}function bu(e){return e*Ll}function Bu(e){return(e&e-1)===0&&e!==0}function wu(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Iu(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function xu(e,t,i,n,r){const o=Math.cos,s=Math.sin,a=o(i/2),A=s(i/2),l=o((t+n)/2),h=s((t+n)/2),c=o((t-n)/2),g=s((t-n)/2),p=o((n-t)/2),E=s((n-t)/2);switch(r){case"XYX":e.set(a*h,A*c,A*g,a*l);break;case"YZY":e.set(A*g,a*h,A*c,a*l);break;case"ZXZ":e.set(A*c,A*g,a*h,a*l);break;case"XZX":e.set(a*h,A*E,A*p,a*l);break;case"YXY":e.set(A*p,a*h,A*E,a*l);break;case"ZYZ":e.set(A*E,A*p,a*h,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Qu(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Mu(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(e*4294967295);case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int32Array:return Math.round(e*2147483647);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}const Tt={DEG2RAD:Ml,RAD2DEG:Ll,generateUUID:Qn,clamp:ct,euclideanModulo:Sl,mapLinear:cu,inverseLerp:du,lerp:Dl,damp:uu,pingpong:gu,smoothstep:pu,smootherstep:fu,randInt:mu,randFloat:Eu,randFloatSpread:Cu,seededRandom:vu,degToRad:yu,radToDeg:bu,isPowerOfTwo:Bu,ceilPowerOfTwo:wu,floorPowerOfTwo:Iu,setQuaternionFromProperEuler:xu,normalize:Mu,denormalize:Qu};class ci{constructor(t=0,i=0){ci.prototype.isVector2=!0,this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,n=this.y,r=t.elements;return this.x=r[0]*i+r[3]*n+r[6],this.y=r[1]*i+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=ct(this.x,t.x,i.x),this.y=ct(this.y,t.y,i.y),this}clampScalar(t,i){return this.x=ct(this.x,t,i),this.y=ct(this.y,t,i),this}clampLength(t,i){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ct(n,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const n=this.dot(t)/i;return Math.acos(ct(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,n=this.y-t.y;return i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const n=Math.cos(i),r=Math.sin(i),o=this.x-t.x,s=this.y-t.y;return this.x=o*n-s*r+t.x,this.y=o*r+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class be{constructor(t=0,i=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=n,this._w=r}static slerpFlat(t,i,n,r,o,s,a){let A=n[r+0],l=n[r+1],h=n[r+2],c=n[r+3];const g=o[s+0],p=o[s+1],E=o[s+2],m=o[s+3];if(a===0){t[i+0]=A,t[i+1]=l,t[i+2]=h,t[i+3]=c;return}if(a===1){t[i+0]=g,t[i+1]=p,t[i+2]=E,t[i+3]=m;return}if(c!==m||A!==g||l!==p||h!==E){let C=1-a;const y=A*g+l*p+h*E+c*m,b=y>=0?1:-1,B=1-y*y;if(B>Number.EPSILON){const I=Math.sqrt(B),S=Math.atan2(I,y*b);C=Math.sin(C*S)/I,a=Math.sin(a*S)/I}const w=a*b;if(A=A*C+g*w,l=l*C+p*w,h=h*C+E*w,c=c*C+m*w,C===1-a){const I=1/Math.sqrt(A*A+l*l+h*h+c*c);A*=I,l*=I,h*=I,c*=I}}t[i]=A,t[i+1]=l,t[i+2]=h,t[i+3]=c}static multiplyQuaternionsFlat(t,i,n,r,o,s){const a=n[r],A=n[r+1],l=n[r+2],h=n[r+3],c=o[s],g=o[s+1],p=o[s+2],E=o[s+3];return t[i]=a*E+h*c+A*p-l*g,t[i+1]=A*E+h*g+l*c-a*p,t[i+2]=l*E+h*p+a*g-A*c,t[i+3]=h*E-a*c-A*g-l*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,n,r){return this._x=t,this._y=i,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i=!0){const n=t._x,r=t._y,o=t._z,s=t._order,a=Math.cos,A=Math.sin,l=a(n/2),h=a(r/2),c=a(o/2),g=A(n/2),p=A(r/2),E=A(o/2);switch(s){case"XYZ":this._x=g*h*c+l*p*E,this._y=l*p*c-g*h*E,this._z=l*h*E+g*p*c,this._w=l*h*c-g*p*E;break;case"YXZ":this._x=g*h*c+l*p*E,this._y=l*p*c-g*h*E,this._z=l*h*E-g*p*c,this._w=l*h*c+g*p*E;break;case"ZXY":this._x=g*h*c-l*p*E,this._y=l*p*c+g*h*E,this._z=l*h*E+g*p*c,this._w=l*h*c-g*p*E;break;case"ZYX":this._x=g*h*c-l*p*E,this._y=l*p*c+g*h*E,this._z=l*h*E-g*p*c,this._w=l*h*c+g*p*E;break;case"YZX":this._x=g*h*c+l*p*E,this._y=l*p*c+g*h*E,this._z=l*h*E-g*p*c,this._w=l*h*c-g*p*E;break;case"XZY":this._x=g*h*c-l*p*E,this._y=l*p*c-g*h*E,this._z=l*h*E+g*p*c,this._w=l*h*c+g*p*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return i===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const n=i/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,n=i[0],r=i[4],o=i[8],s=i[1],a=i[5],A=i[9],l=i[2],h=i[6],c=i[10],g=n+a+c;if(g>0){const p=.5/Math.sqrt(g+1);this._w=.25/p,this._x=(h-A)*p,this._y=(o-l)*p,this._z=(s-r)*p}else if(n>a&&n>c){const p=2*Math.sqrt(1+n-a-c);this._w=(h-A)/p,this._x=.25*p,this._y=(r+s)/p,this._z=(o+l)/p}else if(a>c){const p=2*Math.sqrt(1+a-n-c);this._w=(o-l)/p,this._x=(r+s)/p,this._y=.25*p,this._z=(A+h)/p}else{const p=2*Math.sqrt(1+c-n-a);this._w=(s-r)/p,this._x=(o+l)/p,this._y=(A+h)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let n=t.dot(i)+1;return n<1e-8?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(ct(this.dot(t),-1,1)))}rotateTowards(t,i){const n=this.angleTo(t);if(n===0)return this;const r=Math.min(1,i/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const n=t._x,r=t._y,o=t._z,s=t._w,a=i._x,A=i._y,l=i._z,h=i._w;return this._x=n*h+s*a+r*l-o*A,this._y=r*h+s*A+o*a-n*l,this._z=o*h+s*l+n*A-r*a,this._w=s*h-n*a-r*A-o*l,this._onChangeCallback(),this}slerp(t,i){if(i===0)return this;if(i===1)return this.copy(t);const n=this._x,r=this._y,o=this._z,s=this._w;let a=s*t._w+n*t._x+r*t._y+o*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=n,this._y=r,this._z=o,this;const A=1-a*a;if(A<=Number.EPSILON){const p=1-i;return this._w=p*s+i*this._w,this._x=p*n+i*this._x,this._y=p*r+i*this._y,this._z=p*o+i*this._z,this.normalize(),this}const l=Math.sqrt(A),h=Math.atan2(l,a),c=Math.sin((1-i)*h)/l,g=Math.sin(i*h)/l;return this._w=s*c+this._w*g,this._x=n*c+this._x*g,this._y=r*c+this._y*g,this._z=o*c+this._z*g,this._onChangeCallback(),this}slerpQuaternions(t,i,n){return this.copy(t).slerp(i,n)}random(){const t=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),o*Math.sin(i),o*Math.cos(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pt{constructor(t=0,i=0,n=0){pt.prototype.isVector3=!0,this.x=t,this.y=i,this.z=n}set(t,i,n){return n===void 0&&(n=this.z),this.x=t,this.y=i,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(Ka.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(Ka.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*i+o[3]*n+o[6]*r,this.y=o[1]*i+o[4]*n+o[7]*r,this.z=o[2]*i+o[5]*n+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,n=this.y,r=this.z,o=t.elements,s=1/(o[3]*i+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*i+o[4]*n+o[8]*r+o[12])*s,this.y=(o[1]*i+o[5]*n+o[9]*r+o[13])*s,this.z=(o[2]*i+o[6]*n+o[10]*r+o[14])*s,this}applyQuaternion(t){const i=this.x,n=this.y,r=this.z,o=t.x,s=t.y,a=t.z,A=t.w,l=2*(s*r-a*n),h=2*(a*i-o*r),c=2*(o*n-s*i);return this.x=i+A*l+s*c-a*h,this.y=n+A*h+a*l-o*c,this.z=r+A*c+o*h-s*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*i+o[4]*n+o[8]*r,this.y=o[1]*i+o[5]*n+o[9]*r,this.z=o[2]*i+o[6]*n+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=ct(this.x,t.x,i.x),this.y=ct(this.y,t.y,i.y),this.z=ct(this.z,t.z,i.z),this}clampScalar(t,i){return this.x=ct(this.x,t,i),this.y=ct(this.y,t,i),this.z=ct(this.z,t,i),this}clampLength(t,i){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ct(n,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this.z=t.z+(i.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){const n=t.x,r=t.y,o=t.z,s=i.x,a=i.y,A=i.z;return this.x=r*A-o*a,this.y=o*s-n*A,this.z=n*a-r*s,this}projectOnVector(t){const i=t.lengthSq();if(i===0)return this.set(0,0,0);const n=t.dot(this)/i;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Ir.copy(this).projectOnVector(t),this.sub(Ir)}reflect(t){return this.sub(Ir.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const n=this.dot(t)/i;return Math.acos(ct(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return i*i+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,n){const r=Math.sin(i)*t;return this.x=r*Math.sin(n),this.y=Math.cos(i)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,n){return this.x=t*Math.sin(i),this.y=n,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=n,this.z=r,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,i*4)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,i*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,i=Math.random()*2-1,n=Math.sqrt(1-i*i);return this.x=n*Math.cos(t),this.y=i,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ir=new pt,Ka=new be;class Ci{constructor(t,i,n,r,o,s,a,A,l){Ci.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,i,n,r,o,s,a,A,l)}set(t,i,n,r,o,s,a,A,l){const h=this.elements;return h[0]=t,h[1]=r,h[2]=a,h[3]=i,h[4]=o,h[5]=A,h[6]=n,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,n=t.elements;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],this}extractBasis(t,i,n){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const n=t.elements,r=i.elements,o=this.elements,s=n[0],a=n[3],A=n[6],l=n[1],h=n[4],c=n[7],g=n[2],p=n[5],E=n[8],m=r[0],C=r[3],y=r[6],b=r[1],B=r[4],w=r[7],I=r[2],S=r[5],Q=r[8];return o[0]=s*m+a*b+A*I,o[3]=s*C+a*B+A*S,o[6]=s*y+a*w+A*Q,o[1]=l*m+h*b+c*I,o[4]=l*C+h*B+c*S,o[7]=l*y+h*w+c*Q,o[2]=g*m+p*b+E*I,o[5]=g*C+p*B+E*S,o[8]=g*y+p*w+E*Q,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],A=t[6],l=t[7],h=t[8];return i*s*h-i*a*l-n*o*h+n*a*A+r*o*l-r*s*A}invert(){const t=this.elements,i=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],A=t[6],l=t[7],h=t[8],c=h*s-a*l,g=a*A-h*o,p=l*o-s*A,E=i*c+n*g+r*p;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/E;return t[0]=c*m,t[1]=(r*l-h*n)*m,t[2]=(a*n-r*s)*m,t[3]=g*m,t[4]=(h*i-r*A)*m,t[5]=(r*o-a*i)*m,t[6]=p*m,t[7]=(n*A-l*i)*m,t[8]=(s*i-n*o)*m,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,n,r,o,s,a){const A=Math.cos(o),l=Math.sin(o);return this.set(n*A,n*l,-n*(A*s+l*a)+s+t,-r*l,r*A,-r*(-l*s+A*a)+a+i,0,0,1),this}scale(t,i){return this.premultiply(xr.makeScale(t,i)),this}rotate(t){return this.premultiply(xr.makeRotation(-t)),this}translate(t,i){return this.premultiply(xr.makeTranslation(t,i)),this}makeTranslation(t,i){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,i,0,0,1),this}makeRotation(t){const i=Math.cos(t),n=Math.sin(t);return this.set(i,-n,0,n,i,0,0,0,1),this}makeScale(t,i){return this.set(t,0,0,0,i,0,0,0,1),this}equals(t){const i=this.elements,n=t.elements;for(let r=0;r<9;r++)if(i[r]!==n[r])return!1;return!0}fromArray(t,i=0){for(let n=0;n<9;n++)this.elements[n]=t[n+i];return this}toArray(t=[],i=0){const n=this.elements;return t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3],t[i+4]=n[4],t[i+5]=n[5],t[i+6]=n[6],t[i+7]=n[7],t[i+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const xr=new Ci;function Ja(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Qr(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}let Ge;class Lu{static getDataURL(t,i="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{Ge===void 0&&(Ge=Ja("canvas")),Ge.width=t.width,Ge.height=t.height;const r=Ge.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),n=Ge}return n.toDataURL(i)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const i=Ja("canvas");i.width=t.width,i.height=t.height;const n=i.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Qr(o[s]/255)*255;return n.putImageData(r,0,0),i}else if(t.data){const i=t.data.slice(0);for(let n=0;n<i.length;n++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[n]=Math.floor(Qr(i[n]/255)*255):i[n]=Qr(i[n]);return{data:i,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Su=0;class Du{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Su++}),this.uuid=Qn(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const i=this.data;return typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement?t.set(i.videoWidth,i.videoHeight,0):i instanceof VideoFrame?t.set(i.displayHeight,i.displayWidth,0):i!==null?t.set(i.width,i.height,i.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(Mr(r[s].image)):o.push(Mr(r[s]))}else o=Mr(r);n.url=o}return i||(t.images[this.uuid]=n),n}}function Mr(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?Lu.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ku=0;const Lr=new pt;class me extends jo{constructor(t=me.DEFAULT_IMAGE,i=me.DEFAULT_MAPPING,n=Vi,r=Vi,o=Ao,s=au,a=lu,A=Au,l=me.DEFAULT_ANISOTROPY,h=hu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ku++}),this.uuid=Qn(),this.name="",this.source=new Du(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=o,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=A,this.offset=new ci(0,0),this.repeat=new ci(1,1),this.center=new ci(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ci,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Lr).x}get height(){return this.source.getSize(Lr).y}get depth(){return this.source.getSize(Lr).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const i in t){const n=t[i];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${i}' has value of undefined.`);continue}const r=this[i];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${i}' does not exist.`);continue}r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[i]=n}}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),i||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Ql)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case qa:t.x=t.x-Math.floor(t.x);break;case Vi:t.x=t.x<0?0:1;break;case Va:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case qa:t.y=t.y-Math.floor(t.y);break;case Vi:t.y=t.y<0?0:1;break;case Va:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}me.DEFAULT_IMAGE=null;me.DEFAULT_MAPPING=Ql;me.DEFAULT_ANISOTROPY=1;class le{constructor(t,i,n,r,o,s,a,A,l,h,c,g,p,E,m,C){le.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,i,n,r,o,s,a,A,l,h,c,g,p,E,m,C)}set(t,i,n,r,o,s,a,A,l,h,c,g,p,E,m,C){const y=this.elements;return y[0]=t,y[4]=i,y[8]=n,y[12]=r,y[1]=o,y[5]=s,y[9]=a,y[13]=A,y[2]=l,y[6]=h,y[10]=c,y[14]=g,y[3]=p,y[7]=E,y[11]=m,y[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new le().fromArray(this.elements)}copy(t){const i=this.elements,n=t.elements;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this}copyPosition(t){const i=this.elements,n=t.elements;return i[12]=n[12],i[13]=n[13],i[14]=n[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,n){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,i,n){return this.set(t.x,i.x,n.x,0,t.y,i.y,n.y,0,t.z,i.z,n.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,n=t.elements,r=1/je.setFromMatrixColumn(t,0).length(),o=1/je.setFromMatrixColumn(t,1).length(),s=1/je.setFromMatrixColumn(t,2).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[3]=0,i[4]=n[4]*o,i[5]=n[5]*o,i[6]=n[6]*o,i[7]=0,i[8]=n[8]*s,i[9]=n[9]*s,i[10]=n[10]*s,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){const i=this.elements,n=t.x,r=t.y,o=t.z,s=Math.cos(n),a=Math.sin(n),A=Math.cos(r),l=Math.sin(r),h=Math.cos(o),c=Math.sin(o);if(t.order==="XYZ"){const g=s*h,p=s*c,E=a*h,m=a*c;i[0]=A*h,i[4]=-A*c,i[8]=l,i[1]=p+E*l,i[5]=g-m*l,i[9]=-a*A,i[2]=m-g*l,i[6]=E+p*l,i[10]=s*A}else if(t.order==="YXZ"){const g=A*h,p=A*c,E=l*h,m=l*c;i[0]=g+m*a,i[4]=E*a-p,i[8]=s*l,i[1]=s*c,i[5]=s*h,i[9]=-a,i[2]=p*a-E,i[6]=m+g*a,i[10]=s*A}else if(t.order==="ZXY"){const g=A*h,p=A*c,E=l*h,m=l*c;i[0]=g-m*a,i[4]=-s*c,i[8]=E+p*a,i[1]=p+E*a,i[5]=s*h,i[9]=m-g*a,i[2]=-s*l,i[6]=a,i[10]=s*A}else if(t.order==="ZYX"){const g=s*h,p=s*c,E=a*h,m=a*c;i[0]=A*h,i[4]=E*l-p,i[8]=g*l+m,i[1]=A*c,i[5]=m*l+g,i[9]=p*l-E,i[2]=-l,i[6]=a*A,i[10]=s*A}else if(t.order==="YZX"){const g=s*A,p=s*l,E=a*A,m=a*l;i[0]=A*h,i[4]=m-g*c,i[8]=E*c+p,i[1]=c,i[5]=s*h,i[9]=-a*h,i[2]=-l*h,i[6]=p*c+E,i[10]=g-m*c}else if(t.order==="XZY"){const g=s*A,p=s*l,E=a*A,m=a*l;i[0]=A*h,i[4]=-c,i[8]=l*h,i[1]=g*c+m,i[5]=s*h,i[9]=p*c-E,i[2]=E*c-p,i[6]=a*h,i[10]=m*c+g}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Tu,t,Ru)}lookAt(t,i,n){const r=this.elements;return kt.subVectors(t,i),kt.lengthSq()===0&&(kt.z=1),kt.normalize(),pe.crossVectors(n,kt),pe.lengthSq()===0&&(Math.abs(n.z)===1?kt.x+=1e-4:kt.z+=1e-4,kt.normalize(),pe.crossVectors(n,kt)),pe.normalize(),Yi.crossVectors(kt,pe),r[0]=pe.x,r[4]=Yi.x,r[8]=kt.x,r[1]=pe.y,r[5]=Yi.y,r[9]=kt.y,r[2]=pe.z,r[6]=Yi.z,r[10]=kt.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const n=t.elements,r=i.elements,o=this.elements,s=n[0],a=n[4],A=n[8],l=n[12],h=n[1],c=n[5],g=n[9],p=n[13],E=n[2],m=n[6],C=n[10],y=n[14],b=n[3],B=n[7],w=n[11],I=n[15],S=r[0],Q=r[4],D=r[8],k=r[12],F=r[1],R=r[5],P=r[9],O=r[13],Y=r[2],it=r[6],U=r[10],N=r[14],K=r[3],H=r[7],Z=r[11],st=r[15];return o[0]=s*S+a*F+A*Y+l*K,o[4]=s*Q+a*R+A*it+l*H,o[8]=s*D+a*P+A*U+l*Z,o[12]=s*k+a*O+A*N+l*st,o[1]=h*S+c*F+g*Y+p*K,o[5]=h*Q+c*R+g*it+p*H,o[9]=h*D+c*P+g*U+p*Z,o[13]=h*k+c*O+g*N+p*st,o[2]=E*S+m*F+C*Y+y*K,o[6]=E*Q+m*R+C*it+y*H,o[10]=E*D+m*P+C*U+y*Z,o[14]=E*k+m*O+C*N+y*st,o[3]=b*S+B*F+w*Y+I*K,o[7]=b*Q+B*R+w*it+I*H,o[11]=b*D+B*P+w*U+I*Z,o[15]=b*k+B*O+w*N+I*st,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],n=t[4],r=t[8],o=t[12],s=t[1],a=t[5],A=t[9],l=t[13],h=t[2],c=t[6],g=t[10],p=t[14],E=t[3],m=t[7],C=t[11],y=t[15];return E*(+o*A*c-r*l*c-o*a*g+n*l*g+r*a*p-n*A*p)+m*(+i*A*p-i*l*g+o*s*g-r*s*p+r*l*h-o*A*h)+C*(+i*l*c-i*a*p-o*s*c+n*s*p+o*a*h-n*l*h)+y*(-r*a*h-i*A*c+i*a*g+r*s*c-n*s*g+n*A*h)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=i,r[14]=n),this}invert(){const t=this.elements,i=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],A=t[6],l=t[7],h=t[8],c=t[9],g=t[10],p=t[11],E=t[12],m=t[13],C=t[14],y=t[15],b=c*C*l-m*g*l+m*A*p-a*C*p-c*A*y+a*g*y,B=E*g*l-h*C*l-E*A*p+s*C*p+h*A*y-s*g*y,w=h*m*l-E*c*l+E*a*p-s*m*p-h*a*y+s*c*y,I=E*c*A-h*m*A-E*a*g+s*m*g+h*a*C-s*c*C,S=i*b+n*B+r*w+o*I;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Q=1/S;return t[0]=b*Q,t[1]=(m*g*o-c*C*o-m*r*p+n*C*p+c*r*y-n*g*y)*Q,t[2]=(a*C*o-m*A*o+m*r*l-n*C*l-a*r*y+n*A*y)*Q,t[3]=(c*A*o-a*g*o-c*r*l+n*g*l+a*r*p-n*A*p)*Q,t[4]=B*Q,t[5]=(h*C*o-E*g*o+E*r*p-i*C*p-h*r*y+i*g*y)*Q,t[6]=(E*A*o-s*C*o-E*r*l+i*C*l+s*r*y-i*A*y)*Q,t[7]=(s*g*o-h*A*o+h*r*l-i*g*l-s*r*p+i*A*p)*Q,t[8]=w*Q,t[9]=(E*c*o-h*m*o-E*n*p+i*m*p+h*n*y-i*c*y)*Q,t[10]=(s*m*o-E*a*o+E*n*l-i*m*l-s*n*y+i*a*y)*Q,t[11]=(h*a*o-s*c*o-h*n*l+i*c*l+s*n*p-i*a*p)*Q,t[12]=I*Q,t[13]=(h*m*r-E*c*r+E*n*g-i*m*g-h*n*C+i*c*C)*Q,t[14]=(E*a*r-s*m*r-E*n*A+i*m*A+s*n*C-i*a*C)*Q,t[15]=(s*c*r-h*a*r+h*n*A-i*c*A-s*n*g+i*a*g)*Q,this}scale(t){const i=this.elements,n=t.x,r=t.y,o=t.z;return i[0]*=n,i[4]*=r,i[8]*=o,i[1]*=n,i[5]*=r,i[9]*=o,i[2]*=n,i[6]*=r,i[10]*=o,i[3]*=n,i[7]*=r,i[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,n,r))}makeTranslation(t,i,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,i,0,0,1,n,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,i,-n,0,0,n,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),n=Math.sin(t);return this.set(i,0,n,0,0,1,0,0,-n,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),n=Math.sin(t);return this.set(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const n=Math.cos(i),r=Math.sin(i),o=1-n,s=t.x,a=t.y,A=t.z,l=o*s,h=o*a;return this.set(l*s+n,l*a-r*A,l*A+r*a,0,l*a+r*A,h*a+n,h*A-r*s,0,l*A-r*a,h*A+r*s,o*A*A+n,0,0,0,0,1),this}makeScale(t,i,n){return this.set(t,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,i,n,r,o,s){return this.set(1,n,o,0,t,1,s,0,i,r,1,0,0,0,0,1),this}compose(t,i,n){const r=this.elements,o=i._x,s=i._y,a=i._z,A=i._w,l=o+o,h=s+s,c=a+a,g=o*l,p=o*h,E=o*c,m=s*h,C=s*c,y=a*c,b=A*l,B=A*h,w=A*c,I=n.x,S=n.y,Q=n.z;return r[0]=(1-(m+y))*I,r[1]=(p+w)*I,r[2]=(E-B)*I,r[3]=0,r[4]=(p-w)*S,r[5]=(1-(g+y))*S,r[6]=(C+b)*S,r[7]=0,r[8]=(E+B)*Q,r[9]=(C-b)*Q,r[10]=(1-(g+m))*Q,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,i,n){const r=this.elements;let o=je.set(r[0],r[1],r[2]).length();const s=je.set(r[4],r[5],r[6]).length(),a=je.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],zt.copy(this);const l=1/o,h=1/s,c=1/a;return zt.elements[0]*=l,zt.elements[1]*=l,zt.elements[2]*=l,zt.elements[4]*=h,zt.elements[5]*=h,zt.elements[6]*=h,zt.elements[8]*=c,zt.elements[9]*=c,zt.elements[10]*=c,i.setFromRotationMatrix(zt),n.x=o,n.y=s,n.z=a,this}makePerspective(t,i,n,r,o,s,a=Wi,A=!1){const l=this.elements,h=2*o/(i-t),c=2*o/(n-r),g=(i+t)/(i-t),p=(n+r)/(n-r);let E,m;if(A)E=o/(s-o),m=s*o/(s-o);else if(a===Wi)E=-(s+o)/(s-o),m=-2*s*o/(s-o);else if(a===Wa)E=-s/(s-o),m=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=h,l[4]=0,l[8]=g,l[12]=0,l[1]=0,l[5]=c,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=E,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,i,n,r,o,s,a=Wi,A=!1){const l=this.elements,h=2/(i-t),c=2/(n-r),g=-(i+t)/(i-t),p=-(n+r)/(n-r);let E,m;if(A)E=1/(s-o),m=s/(s-o);else if(a===Wi)E=-2/(s-o),m=-(s+o)/(s-o);else if(a===Wa)E=-1/(s-o),m=-o/(s-o);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=h,l[4]=0,l[8]=0,l[12]=g,l[1]=0,l[5]=c,l[9]=0,l[13]=p,l[2]=0,l[6]=0,l[10]=E,l[14]=m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const i=this.elements,n=t.elements;for(let r=0;r<16;r++)if(i[r]!==n[r])return!1;return!0}fromArray(t,i=0){for(let n=0;n<16;n++)this.elements[n]=t[n+i];return this}toArray(t=[],i=0){const n=this.elements;return t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3],t[i+4]=n[4],t[i+5]=n[5],t[i+6]=n[6],t[i+7]=n[7],t[i+8]=n[8],t[i+9]=n[9],t[i+10]=n[10],t[i+11]=n[11],t[i+12]=n[12],t[i+13]=n[13],t[i+14]=n[14],t[i+15]=n[15],t}}const je=new pt,zt=new le,Tu=new pt(0,0,0),Ru=new pt(1,1,1),pe=new pt,Yi=new pt,kt=new pt,Xa=new le,Za=new be;class ye{constructor(t=0,i=0,n=0,r=ye.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,n,r=this._order){return this._x=t,this._y=i,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,n=!0){const r=t.elements,o=r[0],s=r[4],a=r[8],A=r[1],l=r[5],h=r[9],c=r[2],g=r[6],p=r[10];switch(i){case"XYZ":this._y=Math.asin(ct(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(g,l),this._z=0);break;case"YXZ":this._x=Math.asin(-ct(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(A,l)):(this._y=Math.atan2(-c,o),this._z=0);break;case"ZXY":this._x=Math.asin(ct(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-c,p),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(A,o));break;case"ZYX":this._y=Math.asin(-ct(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(g,p),this._z=Math.atan2(A,o)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(ct(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,o)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-ct(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(g,l),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,n){return Xa.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Xa,i,n)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return Za.setFromEuler(this),this.setFromQuaternion(Za,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ye.DEFAULT_ORDER="XYZ";class Fu{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Ou=0;const $a=new pt,He=new be,ee=new le,Ki=new pt,si=new pt,Uu=new pt,_u=new be,tA=new pt(1,0,0),eA=new pt(0,1,0),iA=new pt(0,0,1),nA={type:"added"},Pu={type:"removed"},ze={type:"childadded",child:null},Sr={type:"childremoved",child:null};class Ee extends jo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ou++}),this.uuid=Qn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ee.DEFAULT_UP.clone();const t=new pt,i=new ye,n=new be,r=new pt(1,1,1);function o(){n.setFromEuler(i,!1)}function s(){i.setFromQuaternion(n,void 0,!1)}i._onChange(o),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new le},normalMatrix:{value:new Ci}}),this.matrix=new le,this.matrixWorld=new le,this.matrixAutoUpdate=Ee.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ee.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Fu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return He.setFromAxisAngle(t,i),this.quaternion.multiply(He),this}rotateOnWorldAxis(t,i){return He.setFromAxisAngle(t,i),this.quaternion.premultiply(He),this}rotateX(t){return this.rotateOnAxis(tA,t)}rotateY(t){return this.rotateOnAxis(eA,t)}rotateZ(t){return this.rotateOnAxis(iA,t)}translateOnAxis(t,i){return $a.copy(t).applyQuaternion(this.quaternion),this.position.add($a.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(tA,t)}translateY(t){return this.translateOnAxis(eA,t)}translateZ(t){return this.translateOnAxis(iA,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(ee.copy(this.matrixWorld).invert())}lookAt(t,i,n){t.isVector3?Ki.copy(t):Ki.set(t,i,n);const r=this.parent;this.updateWorldMatrix(!0,!1),si.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ee.lookAt(si,Ki,this.up):ee.lookAt(Ki,si,this.up),this.quaternion.setFromRotationMatrix(ee),r&&(ee.extractRotation(r.matrixWorld),He.setFromRotationMatrix(ee),this.quaternion.premultiply(He.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(nA),ze.child=t,this.dispatchEvent(ze),ze.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Pu),Sr.child=t,this.dispatchEvent(Sr),Sr.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),ee.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),ee.multiply(t.parent.matrixWorld)),t.applyMatrix4(ee),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(nA),ze.child=t,this.dispatchEvent(ze),ze.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let n=0,r=this.children.length;n<r;n++){const s=this.children[n].getObjectByProperty(t,i);if(s!==void 0)return s}}getObjectsByProperty(t,i,n=[]){this[t]===i&&n.push(this);const r=this.children;for(let o=0,s=r.length;o<s;o++)r[o].getObjectsByProperty(t,i,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(si,t,Uu),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(si,_u,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let n=0,r=i.length;n<r;n++)i[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const i=this.children;for(let n=0,r=i.length;n<r;n++)i[n].traverseVisible(t)}traverseAncestors(t){const i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let n=0,r=i.length;n<r;n++)i[n].updateMatrixWorld(t)}updateWorldMatrix(t,i){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){const r=this.children;for(let o=0,s=r.length;o<s;o++)r[o].updateWorldMatrix(!1,!0)}}toJSON(t){const i=t===void 0||typeof t=="string",n={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(a=>({...a})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(t),r.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function o(a,A){return a[A.uuid]===void 0&&(a[A.uuid]=A.toJSON(t)),A.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=o(t.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const A=a.shapes;if(Array.isArray(A))for(let l=0,h=A.length;l<h;l++){const c=A[l];o(t.shapes,c)}else o(t.shapes,A)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let A=0,l=this.material.length;A<l;A++)a.push(o(t.materials,this.material[A]));r.material=a}else r.material=o(t.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const A=this.animations[a];r.animations.push(o(t.animations,A))}}if(i){const a=s(t.geometries),A=s(t.materials),l=s(t.textures),h=s(t.images),c=s(t.shapes),g=s(t.skeletons),p=s(t.animations),E=s(t.nodes);a.length>0&&(n.geometries=a),A.length>0&&(n.materials=A),l.length>0&&(n.textures=l),h.length>0&&(n.images=h),c.length>0&&(n.shapes=c),g.length>0&&(n.skeletons=g),p.length>0&&(n.animations=p),E.length>0&&(n.nodes=E)}return n.object=r,n;function s(a){const A=[];for(const l in a){const h=a[l];delete h.metadata,A.push(h)}return A}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let n=0;n<t.children.length;n++){const r=t.children[n];this.add(r.clone())}return this}}Ee.DEFAULT_UP=new pt(0,1,0);Ee.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ee.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;class Nu extends Ee{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ye,this.environmentIntensity=1,this.environmentRotation=new ye,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}}class Gu extends me{constructor(t,i,n,r,o=Ao,s=Ao,a,A,l){super(t,i,n,r,o,s,a,A,l),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const h=this;function c(){h.needsUpdate=!0,h._requestVideoFrameCallbackId=t.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in t&&(this._requestVideoFrameCallbackId=t.requestVideoFrameCallback(c))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xl}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xl);class ju{constructor(){this.project=(t,i)=>[this.#t(t),this.#e(i)],this.unproject=t=>[this.#i(t[0]),this.#n(t[1])],this.#t=t=>t/180*this.HALF_EARTH,this.#e=t=>{var i=Math.log(Math.tan((90+t)*Math.PI/360))/(Math.PI/180);return i*this.HALF_EARTH/180},this.#i=t=>t/this.HALF_EARTH*180,this.#n=t=>{var i=t/this.HALF_EARTH*180;return i=180/Math.PI*(2*Math.atan(Math.exp(i*Math.PI/180))-Math.PI/2),i},this.getID=()=>"epsg:3857",this.EARTH=4007501668e-2,this.HALF_EARTH=2003750834e-2}#t;#e;#i;#n}class Ho{constructor(){this.on=(t,i)=>{this.eventHandlers[t]===void 0&&(this.eventHandlers[t]=[]),this.eventHandlers[t].push(i)},this.emit=(t,...i)=>{this.eventHandlers[t]?.forEach(n=>{n(...i)})},this.off=(t,i)=>{if(this.eventHandlers[t]){const n=this.eventHandlers[t].indexOf(i);n>-1&&this.eventHandlers[t].splice(n,1)}},this.eventHandlers={}}}class Hu extends Ho{#t;#e;#i;#n;#s;#r;#A;#a;#o;constructor(t,i,n={},r=null){super(),this.scene=t,this.camera=i,this.#t=new ju,this.#e=null,this.#i=0,this.#n=100,this.#s=null,this.setGpsOptions(n),this.#r=null,this.#A=0,this.#a=0,this.#o=r}setProjection(t){this.#t=t}setGpsOptions(t={}){t.gpsMinDistance!==void 0&&(this.#i=t.gpsMinDistance),t.gpsMinAccuracy!==void 0&&(this.#n=t.gpsMinAccuracy)}async startGps(){if(this.#o){const t=await(await this.#o.sendData("/gps/start",{gpsMinDistance:this.#i,gpsMinAccuracy:this.#n})).json();this.#a=t.session}return this.#s===null?(this.#s=navigator.geolocation.watchPosition(t=>{this.#h(t)},t=>{this.emit("gpserror",t)},{enableHighAccuracy:!0}),!0):!1}stopGps(){return this.#s!==null?(navigator.geolocation.clearWatch(this.#s),this.#s=null,!0):!1}fakeGps(t,i,n=null,r=0){n!==null&&this.setElevation(n),this.#h({coords:{longitude:t,latitude:i,accuracy:r}})}lonLatToWorldCoords(t,i){const n=this.#t.project(t,i);if(this.#r)n[0]-=this.#r[0],n[1]-=this.#r[1];else throw"No initial position determined";return[n[0],-n[1]]}add(t,i,n,r,o={}){t.properties=o,this.#l(t,i,n,r),this.scene.add(t),this.#o?.sendData("/object/new",{position:t.position,x:t.position.x,z:t.position.z,session:this.#a,properties:o})}#l(t,i,n,r){const o=this.lonLatToWorldCoords(i,n);r!==void 0&&(t.position.y=r),[t.position.x,t.position.z]=o}setElevation(t){this.camera.position.y=t}#c(t,i){this.#r=this.#t.project(t,i)}#h(t){let i=Number.MAX_VALUE;this.#A++,this.#o?.sendData("/gps/new",{gpsCount:this.#A,lat:t.coords.latitude,lon:t.coords.longitude,acc:t.coords.accuracy,session:this.#a}),t.coords.accuracy<=this.#n&&(this.#e===null?this.#e={latitude:t.coords.latitude,longitude:t.coords.longitude}:i=this.#d(this.#e,t.coords),i>=this.#i&&(this.#e.longitude=t.coords.longitude,this.#e.latitude=t.coords.latitude,this.#r||(this.#c(t.coords.longitude,t.coords.latitude),this.#o?.sendData("/worldorigin/new",{gpsCount:this.#A,lat:t.coords.latitude,lon:t.coords.longitude,session:this.#a,initialPosition:this.#r})),this.#l(this.camera,t.coords.longitude,t.coords.latitude),this.#o?.sendData("/gps/accepted",{gpsCount:this.#A,cameraX:this.camera.position.x,cameraZ:this.camera.position.z,session:this.#a,distMoved:i}),this.emit("gpsupdate",{position:t,distMoved:i})))}#d(t,i){const n=Tt.degToRad(i.longitude-t.longitude),r=Tt.degToRad(i.latitude-t.latitude),o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(Tt.degToRad(t.latitude))*Math.cos(Tt.degToRad(i.latitude))*(Math.sin(n/2)*Math.sin(n/2));return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371e3}getLastKnownLocation(){return this.#e}}const zu="locar-device-orientation-permission-modal",qu="locar-device-orientation-permission-button",Vu="locar-device-orientation-permission-message",Wu="locar-device-orientation-permission-inner",Yu="locar-device-orientation-permission-button-inner",rA="This immersive website requires access to your device motion sensors.",Ji=navigator.userAgent.match(/iPhone|iPad|iPod/i)||/Macintosh/i.test(navigator.userAgent)&&navigator.maxTouchPoints!=null&&navigator.maxTouchPoints>1,Ku=new pt(0,0,1),oA=new ye,Ju=new be,Xu=new be(-Math.sqrt(.5),0,0,Math.sqrt(.5)),sA=.5*Math.PI;class Zu extends jo{constructor(t,i={}){super(),this.init=()=>{window.DeviceOrientationEvent===void 0?this.eventEmitter.emit("deviceorientationerror",{code:"LOCAR_DEVICE_ORIENTATION_NOT_SUPPORTED",message:"Device orientation API not supported"}):window.isSecureContext===!1?this.eventEmitter.emit("deviceorientationerror",{code:"LOCAR_DEVICE_ORIENTATION_NO_HTTPS",message:"DeviceOrientationEvent is only available in secure contexts (https)"}):typeof window.DeviceOrientationEvent.requestPermission=="function"&&this.enablePermissionDialog?this.obtainPermissionGesture():this.eventEmitter.emit("deviceorientationgranted",{target:this})},this.eventEmitter=new Ho;const n=this;this.object=t,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation=null,this.screenOrientation=0,this.alphaOffset=0,this.orientationOffset=0,this.initialOffset=null,this.lastQuaternion=null,this.orientationChangeEventName="ondeviceorientationabsolute"in window?"deviceorientationabsolute":"deviceorientation",this.smoothingFactor=i.smoothingFactor||1,this.enablePermissionDialog=i.enablePermissionDialog??!0,this.enableInlineStyling=i.enableStyling??!0,this.preferConfirmDialog=i.preferConfirmDialog??!1,this.orientationChangeThreshold=i.orientationChangeThreshold??0;const r=a=>{let{alpha:A,beta:l,gamma:h,webkitCompassHeading:c}=a;if(A=A??0,l=l??0,h=h??0,c=c??0,Ji){const g=360-c;n.alphaOffset=Tt.degToRad(g-A),n.deviceOrientation={alpha:A,beta:l,gamma:h,webkitCompassHeading:c}}else A<0&&(A+=360),n.deviceOrientation={alpha:A,beta:l,gamma:h};window.dispatchEvent(new CustomEvent("camera-rotation-change",{detail:{cameraRotation:t.rotation}}))},o=()=>{n.screenOrientation=window.screen.orientation?.angle??0,Ji&&(n.screenOrientation===90?n.orientationOffset=-sA:n.screenOrientation===-90?n.orientationOffset=sA:n.orientationOffset=0)},s=(a,A,l,h,c)=>{oA.set(l,A,-h,"YXZ"),a.setFromEuler(oA),a.multiply(Xu),a.multiply(Ju.setFromAxisAngle(Ku,-c))};this.connect=()=>{o(),window.addEventListener("orientationchange",o),window.addEventListener(n.orientationChangeEventName,r),n.enabled=!0},this.disconnect=()=>{window.removeEventListener("orientationchange",o),window.removeEventListener(n.orientationChangeEventName,r),n.enabled=!1,n.initialOffset=!1,n.deviceOrientation=null,n.lastQuaternion=null},this.requestOrientationPermissions=()=>{window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(a=>{a==="granted"?this.eventEmitter.emit("deviceorientationgranted",{target:this}):this.eventEmitter.emit("deviceorientationerror",{code:"LOCAR_DEVICE_ORIENTATION_PERMISSION_DENIED",message:"Permission for device orientation denied - AR will not work correctly"})}).catch(a=>{this.eventEmitter.emit("deviceorientationerror",{code:"LOCAR_DEVICE_ORIENTATION_PERMISSION_FAILED",message:"Permission request for device orientation failed - AR will not work correctly",error:JSON.stringify(a,null,2)})}):this.eventEmitter.emit("deviceorientationerror",{code:"LOCAR_DEVICE_ORIENTATION_INTERNAL_ERROR",message:"Internal error: no requestPermission() found although requestOrientationPermissions() was called - please raise an issue on GitHub"})},this.update=()=>{if(n.enabled===!1)return;const a=n.deviceOrientation;if(a){let A=a.alpha?Tt.degToRad(a.alpha)+n.alphaOffset:0,l=a.beta?Tt.degToRad(a.beta):0,h=a.gamma?Tt.degToRad(a.gamma):0;const c=n.screenOrientation?Tt.degToRad(n.screenOrientation):0,g=new be;if(Ji){s(g,A,l,h,c);const p=new ye().setFromQuaternion(g,"YXZ"),E=Tt.degToRad(360-(a.webkitCompassHeading??0));p.y=E+(n.orientationOffset||0),g.setFromEuler(p)}else s(g,A,l,h,c);if(n.lastQuaternion&&n.orientationChangeThreshold>0&&g.angleTo(n.lastQuaternion)<n.orientationChangeThreshold)return;if(n.smoothingFactor<1&&n.lastQuaternion){const p=1-n.smoothingFactor;n.object.quaternion.slerp(g,p)}else n.object.quaternion.copy(g);n.lastQuaternion=n.object.quaternion.clone(),window.dispatchEvent(new CustomEvent("camera-rotation-change",{detail:{cameraRotation:n.object.rotation}}))}},this.getCorrectedHeading=()=>{const{deviceOrientation:a}=n;if(!a)return 0;let A=0;return Ji?(A=360-(a.webkitCompassHeading??0),n.orientationOffset&&(A+=n.orientationOffset*(180/Math.PI),A=(A+360)%360)):(a.absolute===!0||n.orientationChangeEventName,A=a.alpha?a.alpha:0,A=(360-A)%360,A<0&&(A+=360)),A},this.updateAlphaOffset=()=>{n.initialOffset=!1},this.dispose=()=>{n.disconnect()},this.getAlpha=()=>{const{deviceOrientation:a}=n;return a&&a.alpha?Tt.degToRad(a.alpha)+n.alphaOffset:0},this.getBeta=()=>{const{deviceOrientation:a}=n;return a&&a.beta?Tt.degToRad(a.beta):0},this.getGamma=()=>{const{deviceOrientation:a}=n;return a&&a.gamma?Tt.degToRad(a.gamma):0},this.createObtainPermissionGestureDialog=()=>{const a=document.createElement("div");a.classList.add(zu);const A=document.createElement("div");A.classList.add(Wu);const l=document.createElement("div");l.classList.add(Vu);const h=document.createElement("div");h.classList.add(Yu);const c=document.createElement("button");c.classList.add(qu),document.body.appendChild(a),this.enableInlineStyling===!0&&(a.style.fontFamily="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'",a.style.display="flex",a.style.position="fixed",a.style.zIndex="100000",a.style.justifyContent="center",a.style.alignItems="center",a.style.backgroundColor="rgba(0,0,0,0.2)",a.style.inset="0",a.style.padding="20px",A.style.backgroundColor="rgba(220, 220, 220, 0.85)",A.style.padding="6px 0",A.style.borderRadius="10px",A.style.width="100%",A.style.maxWidth="400px",l.style.padding="10px 12px",l.style.textAlign="center",l.style.fontWeight="400",l.style.fontSize="13px",l.style.display="flex",l.style.justifyContent="center",l.style.alignItems="center",h.style.display="block",h.style.textAlign="center",h.style.textDecoration="none",h.style.borderTop="rgb(180,180,180) solid 1px",c.style.display="block",c.style.width="100%",c.style.textAlign="center",c.style.appearance="none",c.style.background="none",c.style.border="none",c.style.outline="none",c.style.padding="10px",c.style.fontWeight="400",c.style.fontSize="16px",c.style.color="#2e7cf1",c.style.cursor="pointer"),a.appendChild(A),A.appendChild(l),A.appendChild(h),l.appendChild(document.createTextNode(rA));const g=()=>{this.requestOrientationPermissions(),a.style.display="none"};c.addEventListener("click",g),c.appendChild(document.createTextNode("OK")),h.appendChild(c),document.body.appendChild(a)},this.obtainPermissionGesture=()=>{this.preferConfirmDialog===!0?window.confirm(rA)&&this.requestOrientationPermissions():this.createObtainPermissionGestureDialog()}}on(t,i){this.eventEmitter.on(t,i)}}class $u extends Ho{#t;constructor(t={video:{facingMode:"environment"}},i){super(),this.sceneWebcam=new Nu,i?this.#t=document.querySelector(i):(this.#t=document.createElement("video"),this.#t.setAttribute("autoplay","true"),this.#t.setAttribute("playsinline","true"),this.#t.style.display="none",document.body.appendChild(this.#t)),this.texture=this.#t?new Gu(this.#t):null,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(t).then(n=>{this.#t?.addEventListener("loadedmetadata",()=>{this.#t?.setAttribute("width",this.#t?.videoWidth.toString()??"0"),this.#t?.setAttribute("height",this.#t?.videoHeight.toString()??"0"),this.#t?.play(),this.emit("webcamstarted",{texture:this.texture})}),this.#t&&(this.#t.srcObject=n)}).catch(n=>{this.emit("webcamerror",{code:n.name,message:n.message})}):this.emit("webcamerror",{code:"LOCAR_NO_MEDIA_DEVICES_API",message:"Media devices API not supported"})}dispose(){this.texture?.dispose()}}AFRAME.registerComponent("locar-webcam",{schema:{idealWidth:{type:"number",default:1024},idealHeight:{type:"number",default:768},videoElement:{type:"string",default:""}},init:function(){const e=new $u({video:{facingMode:"environment",width:{ideal:this.data.idealWidth},height:{ideal:this.data.idealHeight}}},this.data.videoElement||null);e.on("webcamstarted",t=>{this.el.object3D.background=t.texture}),e.on("webcamerror",t=>{this.el.emit("webcamerror",t)})}});AFRAME.registerComponent("locar-camera",{schema:{simulateLatitude:{type:"number",default:0},simulateLongitude:{type:"number",default:0},simulateAltitude:{type:"number",default:-Number.MAX_VALUE},positionMinAccuracy:{type:"number",default:100},smoothingFactor:{type:"number",default:1},enablePermissionDialog:{type:"boolean",default:!0}},init:function(){this.hasPosition=!1,this.locar=new Hu(this.el.sceneEl.object3D,this.el.object3D),this.locar.on("gpsupdate",e=>{this.el.emit("gpsupdate",e),this.hasPosition||(this.el.emit("gps-initial-position-determined",e),this.hasPosition=!0)}),this.locar.on("gpserror",e=>{this.el.emit("gpserror",e)}),this._isMobile()&&(this.deviceOrientationControls=new Zu(this.el.object3D,{smoothingFactor:this.data.smoothingFactor,enablePermissionDialog:this.data.enablePermissionDialog}),this.deviceOrientationControls.on("deviceorientationgranted",e=>{e.target.connect()}),this.deviceOrientationControls.on("deviceorientationerror",e=>{alert(`Device orientation error: code ${e.code} message ${e.message}`)}),this.deviceOrientationControls.init())},update:function(e){this.locar.setGpsOptions({gpsMinAccuracy:this.data.positionMinAccuracy,gpsMinDistance:this.data.gpsMinDistance}),(this.data.simulateLatitude!=e?.simulateLatitude||this.data.simulateLongitude!=e?.simulateLongitude)&&(this.locar.stopGps(),this.locar.fakeGps(this.data.simulateLongitude,this.data.simulateLatitude),this.data.simulateLongitude=0,this.data.simulateLatitude=0),this.data.simulateAltitude>-Number.MAX_VALUE&&this.locar.setElevation(this.data.simulateAltitude+1.6)},play:function(){this.locar.startGps()},pause:function(){this.locar.stopGps()},lonLatToWorldCoords:function(e,t){return this.locar.lonLatToWorldCoords(e,t)},tick:function(){var e;(e=this.deviceOrientationControls)==null||e.update()},positionFound:function(){return this.hasPosition},_isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||/Macintosh/i.test(navigator.userAgent)&&navigator.maxTouchPoints!=null&&navigator.maxTouchPoints>1}});AFRAME.registerComponent("locar-entity-place",{schema:{latitude:{type:"number",default:0},longitude:{type:"number",default:0}},init:function(){const e=this.el.sceneEl.querySelector("[locar-camera]");this.locarCamera=e.components["locar-camera"],this.locarCamera||e.addEventListener("gps-initial-position-determined",t=>{this.locarCamera=e.components["locar-camera"],this._applyProjectedCoordinates()})},update:function(e){this.locarCamera&&this._applyProjectedCoordinates()},_applyProjectedCoordinates:function(){const e=this.locarCamera.lonLatToWorldCoords(this.data.longitude,this.data.latitude);this.el.object3D.position.set(e[0],this.el.object3D.position.y,e[1])}});
