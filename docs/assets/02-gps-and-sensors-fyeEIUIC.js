import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{P as w,W as u,S as p,B as f,M as g,a as h}from"./three.module-PVX39CwJ.js";import{a as D,r as x,c as G}from"./locar.es-B5qGi27V.js";const n=new w(80,window.innerWidth/window.innerHeight,.001,1e3),i=new u({canvas:document.getElementById("glscene")});i.setSize(window.innerWidth,window.innerHeight);const r=new p,t=new D(r,n);window.addEventListener("resize",e=>{i.setSize(window.innerWidth,window.innerHeight),n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix()});const c=new x({idealWidth:1024,idealHeight:768},null);c.on("webcamstarted",e=>{r.background=e.texture});c.on("webcamerror",e=>{alert(`Webcam error: code ${e.code} message ${e.message}`)});let s=!0,o=new G(n);o.on("deviceorientationgranted",e=>{e.target.connect()});o.on("deviceorientationerror",e=>{alert(`Device orientation error: code ${e.code} message ${e.message}`)});o.init();t.on("gpserror",e=>{alert(`GPS error: ${e.code}`)});t.on("gpsupdate",e=>{if(s){alert(`Got the initial location: longitude ${e.position.coords.longitude}, latitude ${e.position.coords.latitude}`);const d=[{latDis:5e-4,lonDis:0,colour:16711680},{latDis:-5e-4,lonDis:0,colour:16776960},{latDis:0,lonDis:-5e-4,colour:65535},{latDis:0,lonDis:5e-4,colour:65280}],l=new f(10,10,10);for(const a of d){const m=new g(l,new h({color:a.colour}));t.add(m,e.position.coords.longitude+a.lonDis,e.position.coords.latitude+a.latDis)}s=!1}});t.startGps();document.getElementById("setFakeLoc").addEventListener("click",e=>{alert("Using fake input GPS, not real GPS location"),t.stopGps(),t.fakeGps(parseFloat(document.getElementById("fakeLon").value),parseFloat(document.getElementById("fakeLat").value))});i.setAnimationLoop(L);function L(){o==null||o.update(),i.render(r,n)}
