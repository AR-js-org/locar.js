import"./modulepreload-polyfill-B5Qt9EMX.js";import{P as w,W as l,S as p,K as m,s as h,J as u,B as g,r as f,M as b,a as y}from"./locar.es-DzsISBSy.js";const t=new w(80,window.innerWidth/window.innerHeight,.001,1e3),n=new l;n.setSize(window.innerWidth,window.innerHeight);const s=new p;document.body.appendChild(n.domElement);window.addEventListener("resize",e=>{n.setSize(window.innerWidth,window.innerHeight),t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix()});const i=new m(s,t),k=new h(t);new u({idealWidth:1024,idealHeight:768,onVideoStarted:e=>{s.background=e}});let r=!0;const d={},E=new g(20,20,20),G=new f(n);i.on("gpsupdate",async(e,c)=>{(r||c>100)&&((await(await fetch(`https://hikar.org/webapp/map?bbox=${e.coords.longitude-.02},${e.coords.latitude-.02},${e.coords.longitude+.02},${e.coords.latitude+.02}&layers=poi&outProj=4326`)).json()).features.forEach(o=>{if(!d[o.properties.osm_id]){const a=new b(E,new y({color:16711680}));i.add(a,o.geometry.coordinates[0],o.geometry.coordinates[1],0,o.properties),d[o.properties.osm_id]=a}}),r=!1)});document.getElementById("setFakeLoc").addEventListener("click",e=>{alert("Using fake input GPS, not real GPS location"),i.stopGps(),i.fakeGps(parseFloat(document.getElementById("fakeLon").value),parseFloat(document.getElementById("fakeLat").value))});i.startGps();n.setAnimationLoop(L);function L(){k.update();const e=G.raycast(t,s);e.length&&alert(`This is ${e[0].object.properties.name}`),n.render(s,t)}
